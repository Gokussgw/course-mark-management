{"ast":null,"code":"import _regenerator from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n// Notification API service for frontend\nexport default {\n  getUnreadCount: function getUnreadCount(userId) {\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var response, data, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.p = 0;\n            _context.n = 1;\n            return fetch(\"http://localhost:8080/marks-api.php?action=unread_notifications&user_id=\".concat(userId), {\n              credentials: 'include'\n            });\n          case 1:\n            response = _context.v;\n            _context.n = 2;\n            return response.json();\n          case 2:\n            data = _context.v;\n            return _context.a(2, data.unread_count || 0);\n          case 3:\n            _context.p = 3;\n            _t = _context.v;\n            console.error('Error fetching unread notification count:', _t);\n            return _context.a(2, 0);\n        }\n      }, _callee, null, [[0, 3]]);\n    }))();\n  },\n  getRecentNotifications: function getRecentNotifications(userId) {\n    var _arguments = arguments;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n      var limit, response, data, _t2;\n      return _regenerator().w(function (_context2) {\n        while (1) switch (_context2.n) {\n          case 0:\n            limit = _arguments.length > 1 && _arguments[1] !== undefined ? _arguments[1] : 10;\n            _context2.p = 1;\n            _context2.n = 2;\n            return fetch(\"http://localhost:8080/marks-api.php?action=recent_notifications&user_id=\".concat(userId, \"&limit=\").concat(limit), {\n              credentials: 'include'\n            });\n          case 2:\n            response = _context2.v;\n            _context2.n = 3;\n            return response.json();\n          case 3:\n            data = _context2.v;\n            return _context2.a(2, data.notifications || []);\n          case 4:\n            _context2.p = 4;\n            _t2 = _context2.v;\n            console.error('Error fetching recent notifications:', _t2);\n            return _context2.a(2, []);\n        }\n      }, _callee2, null, [[1, 4]]);\n    }))();\n  },\n  sendCourseAnnouncement: function sendCourseAnnouncement(courseId, lecturerId, title, message) {\n    var _arguments2 = arguments;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n      var includeMarks, response, data, _t3;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            includeMarks = _arguments2.length > 4 && _arguments2[4] !== undefined ? _arguments2[4] : false;\n            _context3.p = 1;\n            _context3.n = 2;\n            return fetch('http://localhost:8080/marks-api.php', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              credentials: 'include',\n              body: JSON.stringify({\n                action: 'send_course_announcement',\n                course_id: courseId,\n                lecturer_id: lecturerId,\n                title: title,\n                message: message,\n                include_marks: includeMarks\n              })\n            });\n          case 2:\n            response = _context3.v;\n            _context3.n = 3;\n            return response.json();\n          case 3:\n            data = _context3.v;\n            return _context3.a(2, data);\n          case 4:\n            _context3.p = 4;\n            _t3 = _context3.v;\n            console.error('Error sending course announcement:', _t3);\n            throw _t3;\n          case 5:\n            return _context3.a(2);\n        }\n      }, _callee3, null, [[1, 4]]);\n    }))();\n  },\n  markAsRead: function markAsRead(notificationId) {\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {\n      var response, _t4;\n      return _regenerator().w(function (_context4) {\n        while (1) switch (_context4.n) {\n          case 0:\n            _context4.p = 0;\n            _context4.n = 1;\n            return fetch(\"http://localhost:8000/api/notifications/\".concat(notificationId), {\n              method: 'PUT',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': \"Bearer \".concat(localStorage.getItem('token'))\n              }\n            });\n          case 1:\n            response = _context4.v;\n            return _context4.a(2, response.ok);\n          case 2:\n            _context4.p = 2;\n            _t4 = _context4.v;\n            console.error('Error marking notification as read:', _t4);\n            return _context4.a(2, false);\n        }\n      }, _callee4, null, [[0, 2]]);\n    }))();\n  },\n  formatNotificationTime: function formatNotificationTime(timestamp) {\n    var now = new Date();\n    var notificationTime = new Date(timestamp);\n    var diffInMs = now - notificationTime;\n    var diffInHours = diffInMs / (1000 * 60 * 60);\n    var diffInDays = diffInMs / (1000 * 60 * 60 * 24);\n    if (diffInHours < 1) {\n      var diffInMinutes = diffInMs / (1000 * 60);\n      return \"\".concat(Math.floor(diffInMinutes), \" minutes ago\");\n    } else if (diffInHours < 24) {\n      return \"\".concat(Math.floor(diffInHours), \" hours ago\");\n    } else if (diffInDays < 7) {\n      return \"\".concat(Math.floor(diffInDays), \" days ago\");\n    } else {\n      return notificationTime.toLocaleDateString();\n    }\n  },\n  getNotificationIcon: function getNotificationIcon(type) {\n    switch (type) {\n      case 'mark':\n        return 'fas fa-graduation-cap text-primary';\n      case 'course':\n        return 'fas fa-book text-info';\n      case 'warning':\n        return 'fas fa-exclamation-triangle text-warning';\n      case 'system':\n        return 'fas fa-cog text-secondary';\n      default:\n        return 'fas fa-bell text-primary';\n    }\n  },\n  getNotificationStyle: function getNotificationStyle(type) {\n    switch (type) {\n      case 'mark':\n        return 'border-left: 4px solid #007bff;';\n      case 'course':\n        return 'border-left: 4px solid #17a2b8;';\n      case 'warning':\n        return 'border-left: 4px solid #ffc107;';\n      case 'system':\n        return 'border-left: 4px solid #6c757d;';\n      default:\n        return 'border-left: 4px solid #007bff;';\n    }\n  }\n};","map":{"version":3,"names":["getUnreadCount","userId","_asyncToGenerator","_regenerator","m","_callee","response","data","_t","w","_context","n","p","fetch","concat","credentials","v","json","a","unread_count","console","error","getRecentNotifications","_arguments","arguments","_callee2","limit","_t2","_context2","length","undefined","notifications","sendCourseAnnouncement","courseId","lecturerId","title","message","_arguments2","_callee3","includeMarks","_t3","_context3","method","headers","body","JSON","stringify","action","course_id","lecturer_id","include_marks","markAsRead","notificationId","_callee4","_t4","_context4","localStorage","getItem","ok","formatNotificationTime","timestamp","now","Date","notificationTime","diffInMs","diffInHours","diffInDays","diffInMinutes","Math","floor","toLocaleDateString","getNotificationIcon","type","getNotificationStyle"],"sources":["C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/src/services/NotificationService.js"],"sourcesContent":["// Notification API service for frontend\r\nexport default {\r\n  async getUnreadCount(userId) {\r\n    try {\r\n      const response = await fetch(`http://localhost:8080/marks-api.php?action=unread_notifications&user_id=${userId}`, {\r\n        credentials: 'include'\r\n      });\r\n      const data = await response.json();\r\n      return data.unread_count || 0;\r\n    } catch (error) {\r\n      console.error('Error fetching unread notification count:', error);\r\n      return 0;\r\n    }\r\n  },\r\n\r\n  async getRecentNotifications(userId, limit = 10) {\r\n    try {\r\n      const response = await fetch(`http://localhost:8080/marks-api.php?action=recent_notifications&user_id=${userId}&limit=${limit}`, {\r\n        credentials: 'include'\r\n      });\r\n      const data = await response.json();\r\n      return data.notifications || [];\r\n    } catch (error) {\r\n      console.error('Error fetching recent notifications:', error);\r\n      return [];\r\n    }\r\n  },\r\n\r\n  async sendCourseAnnouncement(courseId, lecturerId, title, message, includeMarks = false) {\r\n    try {\r\n      const response = await fetch('http://localhost:8080/marks-api.php', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          action: 'send_course_announcement',\r\n          course_id: courseId,\r\n          lecturer_id: lecturerId,\r\n          title: title,\r\n          message: message,\r\n          include_marks: includeMarks\r\n        })\r\n      });\r\n      \r\n      const data = await response.json();\r\n      return data;\r\n    } catch (error) {\r\n      console.error('Error sending course announcement:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async markAsRead(notificationId) {\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/notifications/${notificationId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Error marking notification as read:', error);\r\n      return false;\r\n    }\r\n  },\r\n\r\n  formatNotificationTime(timestamp) {\r\n    const now = new Date();\r\n    const notificationTime = new Date(timestamp);\r\n    const diffInMs = now - notificationTime;\r\n    const diffInHours = diffInMs / (1000 * 60 * 60);\r\n    const diffInDays = diffInMs / (1000 * 60 * 60 * 24);\r\n\r\n    if (diffInHours < 1) {\r\n      const diffInMinutes = diffInMs / (1000 * 60);\r\n      return `${Math.floor(diffInMinutes)} minutes ago`;\r\n    } else if (diffInHours < 24) {\r\n      return `${Math.floor(diffInHours)} hours ago`;\r\n    } else if (diffInDays < 7) {\r\n      return `${Math.floor(diffInDays)} days ago`;\r\n    } else {\r\n      return notificationTime.toLocaleDateString();\r\n    }\r\n  },\r\n\r\n  getNotificationIcon(type) {\r\n    switch (type) {\r\n      case 'mark':\r\n        return 'fas fa-graduation-cap text-primary';\r\n      case 'course':\r\n        return 'fas fa-book text-info';\r\n      case 'warning':\r\n        return 'fas fa-exclamation-triangle text-warning';\r\n      case 'system':\r\n        return 'fas fa-cog text-secondary';\r\n      default:\r\n        return 'fas fa-bell text-primary';\r\n    }\r\n  },\r\n\r\n  getNotificationStyle(type) {\r\n    switch (type) {\r\n      case 'mark':\r\n        return 'border-left: 4px solid #007bff;';\r\n      case 'course':\r\n        return 'border-left: 4px solid #17a2b8;';\r\n      case 'warning':\r\n        return 'border-left: 4px solid #ffc107;';\r\n      case 'system':\r\n        return 'border-left: 4px solid #6c757d;';\r\n      default:\r\n        return 'border-left: 4px solid #007bff;';\r\n    }\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}