{"ast":null,"code":"import _regenerator from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _toConsumableArray from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { mapGetters } from 'vuex';\nimport AssessmentChart from '@/components/charts/AssessmentChart.vue';\nimport MarkDistributionChart from '@/components/charts/MarkDistributionChart.vue';\nimport * as bootstrap from 'bootstrap';\nexport default {\n  name: 'LecturerDashboard',\n  components: {\n    AssessmentChart: AssessmentChart,\n    MarkDistributionChart: MarkDistributionChart\n  },\n  data: function data() {\n    return _defineProperty(_defineProperty({\n      courses: [],\n      assessments: [],\n      marks: [],\n      selectedAssessment: null,\n      notification: {\n        title: '',\n        message: '',\n        includeMarks: true\n      },\n      markDistribution: {\n        gradeA: 4,\n        gradeB: 7,\n        gradeC: 10,\n        gradeD: 5,\n        gradeF: 2\n      },\n      recentActivities: [{\n        title: 'Marks Updated',\n        description: 'You updated marks for Database Systems assignment',\n        time: '2 hours ago',\n        icon: 'fas fa-pen text-primary'\n      }, {\n        title: 'New Assessment Added',\n        description: 'Web Development - Midterm Exam',\n        time: '1 day ago',\n        icon: 'fas fa-plus-circle text-success'\n      }, {\n        title: 'Student Request',\n        description: 'John Smith requested a mark review',\n        time: '2 days ago',\n        icon: 'fas fa-question-circle text-warning'\n      }],\n      newCourse: {\n        code: '',\n        name: '',\n        semester: '',\n        academic_year: ''\n      }\n    }, \"selectedAssessment\", null), \"notification\", {\n      title: '',\n      message: '',\n      includeMarks: false\n    });\n  },\n  computed: _objectSpread(_objectSpread(_objectSpread({}, mapGetters(['isLoading'])), mapGetters('auth', ['getUser'])), {}, {\n    upcomingAssessments: function upcomingAssessments() {\n      return this.assessments.filter(function (assessment) {\n        return !assessment.is_graded;\n      }).sort(function (a, b) {\n        return new Date(a.date) - new Date(b.date);\n      }).slice(0, 5);\n    }\n  }),\n  created: function created() {\n    this.loadData();\n  },\n  methods: {\n    loadData: function loadData() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var courseIds, _iterator, _step, courseId, courseAssessments, _t, _t2;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.p = 0;\n              _context.n = 1;\n              return _this.$store.dispatch('courses/fetchCourses', {\n                lecturerId: _this.getUser.id\n              });\n            case 1:\n              _this.courses = _context.v;\n              // Fetch assessments for all courses\n              courseIds = _this.courses.map(function (course) {\n                return course.id;\n              });\n              _iterator = _createForOfIteratorHelper(courseIds);\n              _context.p = 2;\n              _iterator.s();\n            case 3:\n              if ((_step = _iterator.n()).done) {\n                _context.n = 6;\n                break;\n              }\n              courseId = _step.value;\n              _context.n = 4;\n              return _this.$store.dispatch('assessments/fetchAssessments', {\n                courseId: courseId\n              });\n            case 4:\n              courseAssessments = _context.v;\n              _this.assessments = [].concat(_toConsumableArray(_this.assessments), _toConsumableArray(courseAssessments));\n            case 5:\n              _context.n = 3;\n              break;\n            case 6:\n              _context.n = 8;\n              break;\n            case 7:\n              _context.p = 7;\n              _t = _context.v;\n              _iterator.e(_t);\n            case 8:\n              _context.p = 8;\n              _iterator.f();\n              return _context.f(8);\n            case 9:\n              _context.n = 11;\n              break;\n            case 10:\n              _context.p = 10;\n              _t2 = _context.v;\n              console.error('Error loading dashboard data:', _t2);\n            case 11:\n              return _context.a(2);\n          }\n        }, _callee, null, [[2, 7, 8, 9], [0, 10]]);\n      }))();\n    },\n    getAssessmentCountForCourse: function getAssessmentCountForCourse(courseId) {\n      return this.assessments.filter(function (a) {\n        return a.course_id === courseId;\n      }).length;\n    },\n    getCourseNameById: function getCourseNameById(courseId) {\n      var course = this.courses.find(function (c) {\n        return c.id === courseId;\n      });\n      return course ? \"\".concat(course.code, \" - \").concat(course.name) : 'Unknown Course';\n    },\n    getAssessmentTypeBadgeClass: function getAssessmentTypeBadgeClass(type) {\n      switch (type) {\n        case 'quiz':\n          return 'bg-info';\n        case 'assignment':\n          return 'bg-primary';\n        case 'midterm':\n          return 'bg-warning';\n        case 'final_exam':\n          return 'bg-danger';\n        default:\n          return 'bg-secondary';\n      }\n    },\n    formatDate: function formatDate(dateString) {\n      if (!dateString) return 'Not scheduled';\n      var date = new Date(dateString);\n      return date.toLocaleDateString('en-GB', {\n        day: 'numeric',\n        month: 'short',\n        year: 'numeric'\n      });\n    },\n    isPending: function isPending() {\n      // Simple logic to determine if an assessment is pending\n      // In a real app, this would check if all students have marks for this assessment\n      return true;\n    },\n    openAddCourseModal: function openAddCourseModal() {\n      // Reset the form\n      this.newCourse = {\n        code: '',\n        name: '',\n        semester: '',\n        academic_year: ''\n      };\n\n      // Open the modal using Bootstrap's JavaScript\n      var modal = new bootstrap.Modal(document.getElementById('addCourseModal'));\n      modal.show();\n    },\n    addCourse: function addCourse() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var courseData, modalElement, modal, _t3;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.p = 0;\n              // Add lecturer_id to the course data\n              courseData = _objectSpread(_objectSpread({}, _this2.newCourse), {}, {\n                lecturer_id: _this2.getUser.id\n              });\n              _context2.n = 1;\n              return _this2.$store.dispatch('courses/createCourse', courseData);\n            case 1:\n              // Close the modal using Bootstrap's JavaScript\n              modalElement = document.getElementById('addCourseModal');\n              modal = bootstrap.Modal.getInstance(modalElement);\n              modal.hide();\n\n              // Reload courses\n              _this2.loadData();\n              _context2.n = 3;\n              break;\n            case 2:\n              _context2.p = 2;\n              _t3 = _context2.v;\n              console.error('Error adding course:', _t3);\n            case 3:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[0, 2]]);\n      }))();\n    },\n    exportCoursesToCSV: function exportCoursesToCSV() {\n      var _this3 = this;\n      if (!this.courses.length) {\n        alert('No courses to export');\n        return;\n      }\n\n      // Convert courses data to CSV format\n      var headers = ['ID', 'Code', 'Name', 'Semester', 'Academic Year', 'Number of Assessments'];\n      var csvContent = headers.join(',') + '\\n';\n      this.courses.forEach(function (course) {\n        var assessmentCount = _this3.getAssessmentCountForCourse(course.id);\n        var row = [course.id, course.code, \"\\\"\".concat(course.name, \"\\\"\"),\n        // Quotes to handle commas in names\n        course.semester || 'Not specified', course.academic_year || 'Not specified', assessmentCount];\n        csvContent += row.join(',') + '\\n';\n      });\n\n      // Create and trigger download\n      this.downloadCSV(csvContent, 'courses.csv');\n    },\n    exportAssessmentsToCSV: function exportAssessmentsToCSV() {\n      var _this4 = this;\n      if (!this.assessments.length) {\n        alert('No assessments to export');\n        return;\n      }\n\n      // Convert assessments data to CSV format\n      var headers = ['ID', 'Course', 'Name', 'Type', 'Date', 'Max Mark', 'Weightage', 'Status'];\n      var csvContent = headers.join(',') + '\\n';\n      this.assessments.forEach(function (assessment) {\n        var row = [assessment.id, \"\\\"\".concat(_this4.getCourseNameById(assessment.course_id), \"\\\"\"), \"\\\"\".concat(assessment.name, \"\\\"\"), assessment.type, assessment.date || 'Not scheduled', assessment.max_mark, \"\".concat(assessment.weightage, \"%\"), _this4.isPending(assessment) ? 'Pending' : 'Completed'];\n        csvContent += row.join(',') + '\\n';\n      });\n\n      // Create and trigger download\n      this.downloadCSV(csvContent, 'assessments.csv');\n    },\n    downloadCSV: function downloadCSV(csvContent, fileName) {\n      // Create a Blob with the CSV content\n      var blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      var url = URL.createObjectURL(blob);\n\n      // Create a temporary link and trigger download\n      var link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', fileName);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n    openNotificationModal: function openNotificationModal(assessment) {\n      // Set the selected assessment\n      this.selectedAssessment = assessment;\n\n      // Pre-fill notification fields\n      var courseName = this.getCourseNameById(assessment.course_id);\n      this.notification = {\n        title: \"\".concat(assessment.name, \" Update\"),\n        message: \"Dear Students,\\n\\nThe marks for \".concat(assessment.name, \" in \").concat(courseName, \" have been updated. Please login to view your results.\\n\\nRegards,\\n\").concat(this.getUser.name),\n        includeMarks: true\n      };\n\n      // Open the modal\n      var modal = new bootstrap.Modal(document.getElementById('notifyStudentsModal'));\n      modal.show();\n    },\n    sendNotification: function sendNotification() {\n      var _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var newActivity, modalElement, modal, _t4;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.p = 0;\n              _context3.n = 1;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 1000);\n              });\n            case 1:\n              // Show success message\n              alert(\"Notification sent to students in \".concat(_this5.getCourseNameById(_this5.selectedAssessment.course_id)));\n\n              // Add to recent activities\n              newActivity = {\n                title: 'Students Notified',\n                description: \"\".concat(_this5.notification.title, \" - \").concat(_this5.getCourseNameById(_this5.selectedAssessment.course_id)),\n                time: 'Just now',\n                icon: 'fas fa-bell text-success'\n              };\n              _this5.recentActivities.unshift(newActivity);\n              if (_this5.recentActivities.length > 5) {\n                _this5.recentActivities.pop();\n              }\n\n              // Close the modal\n              modalElement = document.getElementById('notifyStudentsModal');\n              modal = bootstrap.Modal.getInstance(modalElement);\n              modal.hide();\n              _context3.n = 3;\n              break;\n            case 2:\n              _context3.p = 2;\n              _t4 = _context3.v;\n              console.error('Error sending notification:', _t4);\n              alert('Failed to send notification. Please try again.');\n            case 3:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[0, 2]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","AssessmentChart","MarkDistributionChart","bootstrap","name","components","data","_defineProperty","courses","assessments","marks","selectedAssessment","notification","title","message","includeMarks","markDistribution","gradeA","gradeB","gradeC","gradeD","gradeF","recentActivities","description","time","icon","newCourse","code","semester","academic_year","computed","_objectSpread","upcomingAssessments","filter","assessment","is_graded","sort","a","b","Date","date","slice","created","loadData","methods","_this","_asyncToGenerator","_regenerator","m","_callee","courseIds","_iterator","_step","courseId","courseAssessments","_t","_t2","w","_context","n","p","$store","dispatch","lecturerId","getUser","id","v","map","course","_createForOfIteratorHelper","s","done","value","concat","_toConsumableArray","e","f","console","error","getAssessmentCountForCourse","course_id","length","getCourseNameById","find","c","getAssessmentTypeBadgeClass","type","formatDate","dateString","toLocaleDateString","day","month","year","isPending","openAddCourseModal","modal","Modal","document","getElementById","show","addCourse","_this2","_callee2","courseData","modalElement","_t3","_context2","lecturer_id","getInstance","hide","exportCoursesToCSV","_this3","alert","headers","csvContent","join","forEach","assessmentCount","row","downloadCSV","exportAssessmentsToCSV","_this4","max_mark","weightage","fileName","blob","Blob","url","URL","createObjectURL","link","createElement","href","setAttribute","body","appendChild","click","removeChild","openNotificationModal","courseName","sendNotification","_this5","_callee3","newActivity","_t4","_context3","Promise","resolve","setTimeout","unshift","pop"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\course-mark-management\\frontend\\src\\views\\lecturer\\Dashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard\">\r\n    <h1 class=\"mb-4\">Lecturer Dashboard</h1>\r\n    \r\n    <div class=\"row\">\r\n      <div class=\"col-md-6 mb-4\">\r\n        <div class=\"card h-100\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">My Courses</h5>\r\n            <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n              <p class=\"card-text text-muted mb-0\">Courses you are teaching this semester</p>\r\n              <button class=\"btn btn-sm btn-success\" @click=\"exportCoursesToCSV\">\r\n                <i class=\"fas fa-file-export me-2\"></i>Export CSV\r\n              </button>\r\n            </div>\r\n            \r\n            <div v-if=\"isLoading\" class=\"text-center\">\r\n              <div class=\"spinner-border text-primary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div v-else-if=\"courses.length === 0\" class=\"text-center\">\r\n              <p>You have no courses assigned yet.</p>\r\n              <button class=\"btn btn-primary\" @click=\"openAddCourseModal\">\r\n                <i class=\"fas fa-plus-circle me-2\"></i> Add a Course\r\n              </button>\r\n            </div>\r\n            \r\n            <div v-else class=\"list-group\">\r\n              <div v-for=\"course in courses\" :key=\"course.id\" class=\"list-group-item\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <div class=\"flex-grow-1\">\r\n                    <router-link \r\n                      :to=\"`/lecturer/course/${course.id}`\" \r\n                      class=\"text-decoration-none\"\r\n                    >\r\n                      <strong>{{ course.code }}</strong> - {{ course.name }}\r\n                      <div class=\"text-muted small\">\r\n                        {{ course.semester || 'No semester' }} | {{ course.academic_year || 'No year' }}\r\n                      </div>\r\n                    </router-link>\r\n                  </div>\r\n                  <div class=\"d-flex align-items-center gap-2\">\r\n                    <span class=\"badge bg-primary rounded-pill\">\r\n                      {{ getAssessmentCountForCourse(course.id) }} assessments\r\n                    </span>\r\n                    <div class=\"btn-group\" role=\"group\">\r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-primary\" \r\n                        @click=\"editCourse(course)\"\r\n                        title=\"Edit Course\"\r\n                      >\r\n                        <i class=\"fas fa-edit\"></i>\r\n                      </button>\r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-danger\" \r\n                        @click=\"confirmDeleteCourse(course)\"\r\n                        title=\"Delete Course\"\r\n                      >\r\n                        <i class=\"fas fa-trash\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"col-md-6 mb-4\">\r\n        <div class=\"card h-100\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">Recent Activity</h5>\r\n            <p class=\"card-text text-muted mb-4\">Latest updates and actions</p>\r\n            \r\n            <div class=\"timeline\">\r\n              <div class=\"timeline-item\" v-for=\"(activity, index) in recentActivities\" :key=\"index\">\r\n                <div class=\"timeline-item-icon\">\r\n                  <i :class=\"activity.icon\"></i>\r\n                </div>\r\n                <div class=\"timeline-item-content\">\r\n                  <h6>{{ activity.title }}</h6>\r\n                  <p class=\"text-muted mb-0\">{{ activity.description }}</p>\r\n                  <small class=\"text-muted\">{{ activity.time }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Analytics Charts Row -->\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6 mb-4\">\r\n        <div class=\"card h-100\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">Assessment Types</h5>\r\n            <p class=\"card-text text-muted mb-3\">Distribution of assessment types across courses</p>\r\n            <AssessmentChart :assessments=\"assessments\" :height=\"250\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"col-md-6 mb-4\">\r\n        <div class=\"card h-100\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">Mark Distribution</h5>\r\n            <p class=\"card-text text-muted mb-3\">Overview of student performance</p>\r\n            <MarkDistributionChart :mark-data=\"markDistribution\" :height=\"250\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"row\">\r\n      <div class=\"col-md-12 mb-4\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex justify-content-between align-items-center mb-2\">\r\n              <h5 class=\"card-title mb-0\">Assessment Overview</h5>\r\n              <button class=\"btn btn-sm btn-success\" @click=\"exportAssessmentsToCSV\">\r\n                <i class=\"fas fa-file-export me-2\"></i>Export Marks\r\n              </button>\r\n            </div>\r\n            <p class=\"card-text text-muted mb-4\">Current status of assessments across all courses</p>\r\n            \r\n            <div v-if=\"isLoading\" class=\"text-center\">\r\n              <div class=\"spinner-border text-primary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <table v-else class=\"table table-hover\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Course</th>\r\n                  <th>Assessment</th>\r\n                  <th>Type</th>\r\n                  <th>Date</th>\r\n                  <th>Status</th>\r\n                  <th>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"assessment in upcomingAssessments\" :key=\"assessment.id\">\r\n                  <td>{{ getCourseNameById(assessment.course_id) }}</td>\r\n                  <td>{{ assessment.name }}</td>\r\n                  <td>\r\n                    <span class=\"badge\" :class=\"getAssessmentTypeBadgeClass(assessment.type)\">\r\n                      {{ assessment.type }}\r\n                    </span>\r\n                  </td>\r\n                  <td>{{ formatDate(assessment.date) }}</td>\r\n                  <td>\r\n                    <span class=\"badge bg-warning\" v-if=\"isPending(assessment)\">Pending</span>\r\n                    <span class=\"badge bg-success\" v-else>Completed</span>\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"btn-group btn-group-sm\" role=\"group\">\r\n                      <router-link :to=\"`/lecturer/assessment/edit/${assessment.id}`\" class=\"btn btn-outline-primary\">\r\n                        <i class=\"fas fa-edit\"></i>\r\n                      </router-link>\r\n                      <router-link :to=\"`/lecturer/course/${assessment.course_id}`\" class=\"btn btn-outline-info\">\r\n                        <i class=\"fas fa-eye\"></i>\r\n                      </router-link>\r\n                      <button \r\n                        class=\"btn btn-outline-success\"\r\n                        @click=\"openNotificationModal(assessment)\"\r\n                        title=\"Notify Students\"\r\n                      >\r\n                        <i class=\"fas fa-bell\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                \r\n                <tr v-if=\"upcomingAssessments.length === 0\">\r\n                  <td colspan=\"6\" class=\"text-center\">No upcoming assessments</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Add Course Modal -->\r\n    <div class=\"modal fade\" id=\"addCourseModal\" tabindex=\"-1\" aria-labelledby=\"addCourseModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"addCourseModalLabel\">Add New Course</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"addCourse\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"courseCode\" class=\"form-label\">Course Code</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"courseCode\" v-model=\"newCourse.code\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"courseName\" class=\"form-label\">Course Name</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"courseName\" v-model=\"newCourse.name\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"semester\" class=\"form-label\">Semester</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"semester\" v-model=\"newCourse.semester\">\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"academicYear\" class=\"form-label\">Academic Year</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"academicYear\" v-model=\"newCourse.academic_year\">\r\n              </div>\r\n              <button type=\"submit\" class=\"btn btn-primary\">Save Course</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Notify Students Modal -->\r\n    <div class=\"modal fade\" id=\"notifyStudentsModal\" tabindex=\"-1\" aria-labelledby=\"notifyStudentsModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"notifyStudentsModalLabel\">Notify Students</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div v-if=\"selectedAssessment\">\r\n              <p><strong>Course:</strong> {{ getCourseNameById(selectedAssessment.course_id) }}</p>\r\n              <p><strong>Assessment:</strong> {{ selectedAssessment.name }} ({{ selectedAssessment.type }})</p>\r\n              \r\n              <form @submit.prevent=\"sendNotification\">\r\n                <div class=\"mb-3\">\r\n                  <label for=\"notificationTitle\" class=\"form-label\">Notification Title</label>\r\n                  <input type=\"text\" class=\"form-control\" id=\"notificationTitle\" v-model=\"notification.title\" required>\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"notificationMessage\" class=\"form-label\">Message</label>\r\n                  <textarea class=\"form-control\" id=\"notificationMessage\" rows=\"4\" v-model=\"notification.message\" required></textarea>\r\n                </div>\r\n                <div class=\"form-check mb-3\">\r\n                  <input class=\"form-check-input\" type=\"checkbox\" id=\"includeMarks\" v-model=\"notification.includeMarks\">\r\n                  <label class=\"form-check-label\" for=\"includeMarks\">\r\n                    Include marks in notification\r\n                  </label>\r\n                </div>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Send Notification</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport AssessmentChart from '@/components/charts/AssessmentChart.vue';\r\nimport MarkDistributionChart from '@/components/charts/MarkDistributionChart.vue';\r\nimport * as bootstrap from 'bootstrap';\r\n\r\nexport default {\r\n  name: 'LecturerDashboard',\r\n  components: {\r\n    AssessmentChart,\r\n    MarkDistributionChart\r\n  },\r\n  data() {\r\n    return {\r\n      courses: [],\r\n      assessments: [],\r\n      marks: [],\r\n      selectedAssessment: null,\r\n      notification: {\r\n        title: '',\r\n        message: '',\r\n        includeMarks: true\r\n      },\r\n      markDistribution: {\r\n        gradeA: 4,\r\n        gradeB: 7,\r\n        gradeC: 10,\r\n        gradeD: 5,\r\n        gradeF: 2\r\n      },\r\n      recentActivities: [\r\n        {\r\n          title: 'Marks Updated',\r\n          description: 'You updated marks for Database Systems assignment',\r\n          time: '2 hours ago',\r\n          icon: 'fas fa-pen text-primary'\r\n        },\r\n        {\r\n          title: 'New Assessment Added',\r\n          description: 'Web Development - Midterm Exam',\r\n          time: '1 day ago',\r\n          icon: 'fas fa-plus-circle text-success'\r\n        },\r\n        {\r\n          title: 'Student Request',\r\n          description: 'John Smith requested a mark review',\r\n          time: '2 days ago',\r\n          icon: 'fas fa-question-circle text-warning'\r\n        }\r\n      ],\r\n      newCourse: {\r\n        code: '',\r\n        name: '',\r\n        semester: '',\r\n        academic_year: ''\r\n      },\r\n      selectedAssessment: null,\r\n      notification: {\r\n        title: '',\r\n        message: '',\r\n        includeMarks: false\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(['isLoading']),\r\n    ...mapGetters('auth', ['getUser']),\r\n    \r\n    upcomingAssessments() {\r\n      return this.assessments\r\n        .filter(assessment => !assessment.is_graded)\r\n        .sort((a, b) => new Date(a.date) - new Date(b.date))\r\n        .slice(0, 5);\r\n    }\r\n  },\r\n  created() {\r\n    this.loadData();\r\n  },\r\n  methods: {\r\n    async loadData() {\r\n      try {\r\n        // Fetch courses for the current lecturer\r\n        this.courses = await this.$store.dispatch('courses/fetchCourses', {\r\n          lecturerId: this.getUser.id\r\n        });\r\n        \r\n        // Fetch assessments for all courses\r\n        const courseIds = this.courses.map(course => course.id);\r\n        \r\n        for (const courseId of courseIds) {\r\n          const courseAssessments = await this.$store.dispatch('assessments/fetchAssessments', {\r\n            courseId\r\n          });\r\n          this.assessments = [...this.assessments, ...courseAssessments];\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading dashboard data:', error);\r\n      }\r\n    },\r\n    \r\n    getAssessmentCountForCourse(courseId) {\r\n      return this.assessments.filter(a => a.course_id === courseId).length;\r\n    },\r\n    \r\n    getCourseNameById(courseId) {\r\n      const course = this.courses.find(c => c.id === courseId);\r\n      return course ? `${course.code} - ${course.name}` : 'Unknown Course';\r\n    },\r\n    \r\n    getAssessmentTypeBadgeClass(type) {\r\n      switch (type) {\r\n        case 'quiz': return 'bg-info';\r\n        case 'assignment': return 'bg-primary';\r\n        case 'midterm': return 'bg-warning';\r\n        case 'final_exam': return 'bg-danger';\r\n        default: return 'bg-secondary';\r\n      }\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'Not scheduled';\r\n      \r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('en-GB', {\r\n        day: 'numeric',\r\n        month: 'short',\r\n        year: 'numeric'\r\n      });\r\n    },\r\n    \r\n    isPending() {\r\n      // Simple logic to determine if an assessment is pending\r\n      // In a real app, this would check if all students have marks for this assessment\r\n      return true;\r\n    },\r\n    \r\n    openAddCourseModal() {\r\n      // Reset the form\r\n      this.newCourse = {\r\n        code: '',\r\n        name: '',\r\n        semester: '',\r\n        academic_year: ''\r\n      };\r\n      \r\n      // Open the modal using Bootstrap's JavaScript\r\n      const modal = new bootstrap.Modal(document.getElementById('addCourseModal'));\r\n      modal.show();\r\n    },\r\n    \r\n    async addCourse() {\r\n      try {\r\n        // Add lecturer_id to the course data\r\n        const courseData = {\r\n          ...this.newCourse,\r\n          lecturer_id: this.getUser.id\r\n        };\r\n        \r\n        await this.$store.dispatch('courses/createCourse', courseData);\r\n        \r\n        // Close the modal using Bootstrap's JavaScript\r\n        const modalElement = document.getElementById('addCourseModal');\r\n        const modal = bootstrap.Modal.getInstance(modalElement);\r\n        modal.hide();\r\n        \r\n        // Reload courses\r\n        this.loadData();\r\n      } catch (error) {\r\n        console.error('Error adding course:', error);\r\n      }\r\n    },\r\n    \r\n    exportCoursesToCSV() {\r\n      if (!this.courses.length) {\r\n        alert('No courses to export');\r\n        return;\r\n      }\r\n      \r\n      // Convert courses data to CSV format\r\n      const headers = ['ID', 'Code', 'Name', 'Semester', 'Academic Year', 'Number of Assessments'];\r\n      let csvContent = headers.join(',') + '\\n';\r\n      \r\n      this.courses.forEach(course => {\r\n        const assessmentCount = this.getAssessmentCountForCourse(course.id);\r\n        const row = [\r\n          course.id,\r\n          course.code,\r\n          `\"${course.name}\"`,  // Quotes to handle commas in names\r\n          course.semester || 'Not specified',\r\n          course.academic_year || 'Not specified',\r\n          assessmentCount\r\n        ];\r\n        csvContent += row.join(',') + '\\n';\r\n      });\r\n      \r\n      // Create and trigger download\r\n      this.downloadCSV(csvContent, 'courses.csv');\r\n    },\r\n    \r\n    exportAssessmentsToCSV() {\r\n      if (!this.assessments.length) {\r\n        alert('No assessments to export');\r\n        return;\r\n      }\r\n      \r\n      // Convert assessments data to CSV format\r\n      const headers = ['ID', 'Course', 'Name', 'Type', 'Date', 'Max Mark', 'Weightage', 'Status'];\r\n      let csvContent = headers.join(',') + '\\n';\r\n      \r\n      this.assessments.forEach(assessment => {\r\n        const row = [\r\n          assessment.id,\r\n          `\"${this.getCourseNameById(assessment.course_id)}\"`,\r\n          `\"${assessment.name}\"`,\r\n          assessment.type,\r\n          assessment.date || 'Not scheduled',\r\n          assessment.max_mark,\r\n          `${assessment.weightage}%`,\r\n          this.isPending(assessment) ? 'Pending' : 'Completed'\r\n        ];\r\n        csvContent += row.join(',') + '\\n';\r\n      });\r\n      \r\n      // Create and trigger download\r\n      this.downloadCSV(csvContent, 'assessments.csv');\r\n    },\r\n    \r\n    downloadCSV(csvContent, fileName) {\r\n      // Create a Blob with the CSV content\r\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      \r\n      // Create a temporary link and trigger download\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', fileName);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    },\r\n    \r\n    openNotificationModal(assessment) {\r\n      // Set the selected assessment\r\n      this.selectedAssessment = assessment;\r\n      \r\n      // Pre-fill notification fields\r\n      const courseName = this.getCourseNameById(assessment.course_id);\r\n      this.notification = {\r\n        title: `${assessment.name} Update`,\r\n        message: `Dear Students,\\n\\nThe marks for ${assessment.name} in ${courseName} have been updated. Please login to view your results.\\n\\nRegards,\\n${this.getUser.name}`,\r\n        includeMarks: true\r\n      };\r\n      \r\n      // Open the modal\r\n      const modal = new bootstrap.Modal(document.getElementById('notifyStudentsModal'));\r\n      modal.show();\r\n    },\r\n    \r\n    async sendNotification() {\r\n      try {\r\n        // In a real implementation, this would make an API call to send notifications\r\n        // to all students enrolled in the course with the assessment\r\n        \r\n        // Simulate API call\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n        \r\n        // Show success message\r\n        alert(`Notification sent to students in ${this.getCourseNameById(this.selectedAssessment.course_id)}`);\r\n        \r\n        // Add to recent activities\r\n        const newActivity = {\r\n          title: 'Students Notified',\r\n          description: `${this.notification.title} - ${this.getCourseNameById(this.selectedAssessment.course_id)}`,\r\n          time: 'Just now',\r\n          icon: 'fas fa-bell text-success'\r\n        };\r\n        this.recentActivities.unshift(newActivity);\r\n        if (this.recentActivities.length > 5) {\r\n          this.recentActivities.pop();\r\n        }\r\n        \r\n        // Close the modal\r\n        const modalElement = document.getElementById('notifyStudentsModal');\r\n        const modal = bootstrap.Modal.getInstance(modalElement);\r\n        modal.hide();\r\n      } catch (error) {\r\n        console.error('Error sending notification:', error);\r\n        alert('Failed to send notification. Please try again.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard h1 {\r\n  color: #2c3e50;\r\n  font-weight: 700;\r\n}\r\n\r\n.card {\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  border: none;\r\n  border-radius: 10px;\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-title {\r\n  color: #2c3e50;\r\n  font-weight: 600;\r\n}\r\n\r\n.list-group-item {\r\n  border-left: 0;\r\n  border-right: 0;\r\n  padding: 15px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.list-group-item:first-child {\r\n  border-top: 0;\r\n}\r\n\r\n.list-group-item:last-child {\r\n  border-bottom: 0;\r\n}\r\n\r\n.timeline {\r\n  position: relative;\r\n  padding-left: 30px;\r\n}\r\n\r\n.timeline-item {\r\n  position: relative;\r\n  margin-bottom: 25px;\r\n}\r\n\r\n.timeline-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.timeline-item:before {\r\n  content: '';\r\n  position: absolute;\r\n  left: -30px;\r\n  top: 0;\r\n  bottom: -25px;\r\n  width: 2px;\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.timeline-item:last-child:before {\r\n  bottom: 0;\r\n}\r\n\r\n.timeline-item-icon {\r\n  position: absolute;\r\n  left: -39px;\r\n  top: 0;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  background-color: #ffffff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1;\r\n}\r\n\r\n.timeline-item-icon i {\r\n  font-size: 14px;\r\n}\r\n\r\n.timeline-item-content h6 {\r\n  margin-bottom: 5px;\r\n  font-weight: 600;\r\n}\r\n\r\n.badge {\r\n  padding: 6px 10px;\r\n  font-weight: 500;\r\n  text-transform: capitalize;\r\n}\r\n\r\n.table th {\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}