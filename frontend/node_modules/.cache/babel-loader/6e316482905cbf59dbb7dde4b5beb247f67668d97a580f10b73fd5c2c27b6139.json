{"ast":null,"code":"import _regenerator from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"CourseComparison\",\n  data: function data() {\n    return {\n      courses: [],\n      selectedCourseId: \"\",\n      comparisonData: null,\n      loading: false,\n      error: null\n    };\n  },\n  computed: {\n    performanceComparisonClass: function performanceComparisonClass() {\n      if (!this.comparisonData) return \"bg-secondary\";\n      var studentScore = this.comparisonData.student_performance.total_score;\n      var classAverage = this.comparisonData.class_performance.average_score;\n      if (studentScore > classAverage + 10) return \"bg-success\";\n      if (studentScore > classAverage) return \"bg-primary\";\n      if (studentScore > classAverage - 10) return \"bg-warning\";\n      return \"bg-danger\";\n    },\n    performanceComparisonText: function performanceComparisonText() {\n      if (!this.comparisonData) return \"No data\";\n      var studentScore = this.comparisonData.student_performance.total_score;\n      var classAverage = this.comparisonData.class_performance.average_score;\n      var difference = studentScore - classAverage;\n      if (difference > 10) return \"Excellent (+\".concat(difference.toFixed(1), \" above average)\");\n      if (difference > 0) return \"Above Average (+\".concat(difference.toFixed(1), \")\");\n      if (difference > -10) return \"Below Average (\".concat(difference.toFixed(1), \")\");\n      return \"Needs Improvement (\".concat(difference.toFixed(1), \")\");\n    },\n    performanceInsights: function performanceInsights() {\n      if (!this.comparisonData) return {\n        strengths: [],\n        improvements: []\n      };\n      var strengths = [];\n      var improvements = [];\n      this.comparisonData.assessments.forEach(function (assessment) {\n        if (assessment.comparison.above_average) {\n          if (assessment.comparison.difference_from_average > 5) {\n            strengths.push(\"Strong performance in \".concat(assessment.assessment.type, \" (\").concat(assessment.assessment.name, \")\"));\n          }\n        } else {\n          if (assessment.comparison.difference_from_average < -5) {\n            improvements.push(\"Focus needed on \".concat(assessment.assessment.type, \" (\").concat(assessment.assessment.name, \")\"));\n          }\n        }\n      });\n\n      // Overall performance insights based on rank\n      var studentRank = this.comparisonData.student_performance.rank;\n      var totalStudents = this.comparisonData.student_performance.total_students;\n      if (studentRank && totalStudents) {\n        if (studentRank <= Math.ceil(totalStudents * 0.25)) {\n          strengths.push(\"Consistently high performer in class\");\n        } else if (studentRank > Math.ceil(totalStudents * 0.75)) {\n          improvements.push(\"Overall performance below class median\");\n        }\n      }\n      return {\n        strengths: strengths,\n        improvements: improvements\n      };\n    }\n  },\n  created: function created() {\n    var _this = this;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return _this.loadCourses();\n          case 1:\n            return _context.a(2);\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    loadCourses: function loadCourses() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var isAuthenticated, currentUser, response, _currentUser, _error$response, _error$response2, _t;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.p = 0;\n              console.log(\"=== loadCourses called ===\");\n\n              // Check if user is authenticated first\n              isAuthenticated = _this2.$store.getters[\"auth/isAuthenticated\"];\n              console.log(\"Is authenticated:\", isAuthenticated);\n              if (isAuthenticated) {\n                _context2.n = 1;\n                break;\n              }\n              _this2.error = \"Please log in to view your courses\";\n              _this2.$router.push('/login');\n              return _context2.a(2);\n            case 1:\n              currentUser = _this2.$store.getters[\"auth/user\"];\n              console.log(\"Current user from store:\", currentUser);\n              console.log(\"LocalStorage token:\", localStorage.getItem('token'));\n              console.log(\"LocalStorage user:\", localStorage.getItem('user'));\n\n              // If store user is undefined but we have token, try to re-init from localStorage\n              if (!(!currentUser && localStorage.getItem('token') && localStorage.getItem('user'))) {\n                _context2.n = 3;\n                break;\n              }\n              console.log(\"Re-initializing auth from localStorage...\");\n              _context2.n = 2;\n              return _this2.$store.dispatch('auth/checkAuth');\n            case 2:\n              currentUser = _this2.$store.getters[\"auth/user\"];\n              console.log(\"Refreshed user:\", currentUser);\n            case 3:\n              // Final fallback: parse user directly from localStorage if store is still empty\n              if (!currentUser && localStorage.getItem('user')) {\n                try {\n                  console.log(\"Emergency fallback: parsing user from localStorage\");\n                  currentUser = JSON.parse(localStorage.getItem('user'));\n                  console.log(\"Emergency fallback user:\", currentUser);\n                } catch (e) {\n                  console.error(\"Failed to parse user from localStorage:\", e);\n                }\n              }\n              if (!(currentUser && currentUser.role === \"student\")) {\n                _context2.n = 5;\n                break;\n              }\n              console.log(\"Making API call to get courses...\"); // Debug log\n              // Get courses the student is enrolled in\n              _context2.n = 4;\n              return axios.get(\"/api/enrollments/student/courses\");\n            case 4:\n              response = _context2.v;\n              console.log(\"API Response:\", response.data); // Debug log\n              _this2.courses = response.data;\n              if (_this2.courses.length === 0) {\n                _this2.error = \"You are not enrolled in any courses yet\";\n              }\n              _context2.n = 6;\n              break;\n            case 5:\n              _this2.error = \"Access denied - Student role required. Current user role: \".concat(((_currentUser = currentUser) === null || _currentUser === void 0 ? void 0 : _currentUser.role) || 'undefined');\n            case 6:\n              _context2.n = 8;\n              break;\n            case 7:\n              _context2.p = 7;\n              _t = _context2.v;\n              console.error(\"Error loading courses:\", _t);\n              if (((_error$response = _t.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n                _this2.error = \"Authentication failed - please log in again\";\n                _this2.$router.push('/login');\n              } else {\n                _this2.error = ((_error$response2 = _t.response) === null || _error$response2 === void 0 || (_error$response2 = _error$response2.data) === null || _error$response2 === void 0 ? void 0 : _error$response2.error) || \"Failed to load courses\";\n              }\n            case 8:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[0, 7]]);\n      }))();\n    },\n    loadComparison: function loadComparison() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var response, _error$response3, _t2;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              if (_this3.selectedCourseId) {\n                _context3.n = 1;\n                break;\n              }\n              _this3.comparisonData = null;\n              return _context3.a(2);\n            case 1:\n              _this3.loading = true;\n              _this3.error = null;\n              _context3.p = 2;\n              _context3.n = 3;\n              return axios.get(\"/api/comparisons/coursemates/\".concat(_this3.selectedCourseId));\n            case 3:\n              response = _context3.v;\n              _this3.comparisonData = response.data;\n              _context3.n = 5;\n              break;\n            case 4:\n              _context3.p = 4;\n              _t2 = _context3.v;\n              console.error(\"Error loading comparison:\", _t2);\n              _this3.error = ((_error$response3 = _t2.response) === null || _error$response3 === void 0 || (_error$response3 = _error$response3.data) === null || _error$response3 === void 0 ? void 0 : _error$response3.error) || \"Failed to load comparison data\";\n            case 5:\n              _context3.p = 5;\n              _this3.loading = false;\n              return _context3.f(5);\n            case 6:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[2, 4, 5, 6]]);\n      }))();\n    },\n    getPerformanceBadgeClass: function getPerformanceBadgeClass(percentage) {\n      if (percentage >= 90) return \"bg-success\";\n      if (percentage >= 80) return \"bg-primary\";\n      if (percentage >= 70) return \"bg-info\";\n      if (percentage >= 60) return \"bg-warning\";\n      return \"bg-danger\";\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","courses","selectedCourseId","comparisonData","loading","error","computed","performanceComparisonClass","studentScore","student_performance","total_score","classAverage","class_performance","average_score","performanceComparisonText","difference","concat","toFixed","performanceInsights","strengths","improvements","assessments","forEach","assessment","comparison","above_average","difference_from_average","push","type","studentRank","rank","totalStudents","total_students","Math","ceil","created","_this","_asyncToGenerator","_regenerator","m","_callee","w","_context","n","loadCourses","a","methods","_this2","_callee2","isAuthenticated","currentUser","response","_currentUser","_error$response","_error$response2","_t","_context2","p","console","log","$store","getters","$router","localStorage","getItem","dispatch","JSON","parse","e","role","get","v","length","status","loadComparison","_this3","_callee3","_error$response3","_t2","_context3","f","getPerformanceBadgeClass","percentage"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\NEW\\course-mark-management\\frontend\\src\\views\\student\\CourseComparison.vue"],"sourcesContent":["<template>\r\n  <div class=\"coursemate-comparison\">\r\n    <div class=\"container mt-4\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"card\">\r\n            <div class=\"card-header bg-primary text-white\">\r\n              <h4 class=\"mb-0\">\r\n                <i class=\"fas fa-chart-line me-2\"></i>\r\n                Performance Comparison with Coursemates\r\n              </h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <!-- Course Selection -->\r\n              <div class=\"row mb-4\">\r\n                <div class=\"col-md-6\">\r\n                  <label for=\"courseSelect\" class=\"form-label\"\r\n                    >Select Course:</label\r\n                  >\r\n                  <select\r\n                    id=\"courseSelect\"\r\n                    v-model=\"selectedCourseId\"\r\n                    @change=\"loadComparison\"\r\n                    class=\"form-select\"\r\n                  >\r\n                    <option value=\"\">Choose a course...</option>\r\n                    <option\r\n                      v-for=\"course in courses\"\r\n                      :key=\"course.id\"\r\n                      :value=\"course.id\"\r\n                    >\r\n                      {{ course.code }} - {{ course.name }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Loading State -->\r\n              <div v-if=\"loading\" class=\"text-center py-4\">\r\n                <div class=\"spinner-border text-primary\" role=\"status\">\r\n                  <span class=\"visually-hidden\">Loading...</span>\r\n                </div>\r\n                <p class=\"mt-2\">Loading comparison data...</p>\r\n              </div>\r\n\r\n              <!-- Error State -->\r\n              <div v-if=\"error\" class=\"alert alert-danger\">\r\n                <i class=\"fas fa-exclamation-triangle me-2\"></i>\r\n                {{ error }}\r\n              </div>\r\n\r\n              <!-- Comparison Results -->\r\n              <div v-if=\"comparisonData && !loading\" class=\"comparison-results\">\r\n                <!-- Overall Performance Summary -->\r\n                <div class=\"row mb-4\">\r\n                  <div class=\"col-md-6\">\r\n                    <div class=\"card border-success\">\r\n                      <div class=\"card-header bg-light\">\r\n                        <h5 class=\"mb-0\">\r\n                          <i class=\"fas fa-user me-2\"></i>\r\n                          Your Performance\r\n                        </h5>\r\n                      </div>\r\n                      <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                          <div class=\"col-6\">\r\n                            <h3 class=\"text-success\">\r\n                              {{\r\n                                comparisonData?.student?.marks?.overall?.final_grade || 0\r\n                              }}%\r\n                            </h3>\r\n                            <small class=\"text-muted\">Overall Score</small>\r\n                          </div>\r\n                          <div class=\"col-6\">\r\n                            <h4 class=\"text-primary\">\r\n                              {{ comparisonData?.student?.position || 'N/A' }}\r\n                              <small class=\"text-muted\"\r\n                                >/\r\n                                {{\r\n                                  comparisonData?.student?.total_students || 0\r\n                                    .total_students\r\n                                }}</small\r\n                              >\r\n                            </h4>\r\n                            <small class=\"text-muted\">Class Ranking</small>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-md-6\">\r\n                    <div class=\"card border-info\">\r\n                      <div class=\"card-header bg-light\">\r\n                        <h5 class=\"mb-0\">\r\n                          <i class=\"fas fa-users me-2\"></i>\r\n                          Class Performance\r\n                        </h5>\r\n                      </div>\r\n                      <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                          <div class=\"col-6\">\r\n                            <h3 class=\"text-info\">\r\n                              {{\r\n                                comparisonData.class_performance.average_score\r\n                              }}%\r\n                            </h3>\r\n                            <small class=\"text-muted\">Class Average</small>\r\n                          </div>\r\n                          <div class=\"col-6\">\r\n                            <h4 class=\"text-secondary\">\r\n                              {{\r\n                                comparisonData.class_performance.total_enrolled\r\n                              }}\r\n                            </h4>\r\n                            <small class=\"text-muted\">Total Students</small>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"mt-2\">\r\n                          <span\r\n                            class=\"badge\"\r\n                            :class=\"performanceComparisonClass\"\r\n                          >\r\n                            {{ performanceComparisonText }}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Assessment-wise Comparison -->\r\n                <div class=\"card\">\r\n                  <div class=\"card-header\">\r\n                    <h5 class=\"mb-0\">\r\n                      <i class=\"fas fa-clipboard-list me-2\"></i>\r\n                      Assessment-wise Comparison\r\n                    </h5>\r\n                  </div>\r\n                  <div class=\"card-body\">\r\n                    <div class=\"table-responsive\">\r\n                      <table class=\"table table-striped\">\r\n                        <thead class=\"table-dark\">\r\n                          <tr>\r\n                            <th>Assessment</th>\r\n                            <th>Type</th>\r\n                            <th>Your Score</th>\r\n                            <th>Your %</th>\r\n                            <th>Class Avg</th>\r\n                            <th>Class Avg %</th>\r\n                            <th>Highest</th>\r\n                            <th>Performance</th>\r\n                            <th>Percentile Range</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          <tr\r\n                            v-for=\"assessment in comparisonData.assessments\"\r\n                            :key=\"assessment.assessment.name\"\r\n                          >\r\n                            <td>\r\n                              <strong>{{ assessment.assessment.name }}</strong>\r\n                              <br />\r\n                              <small class=\"text-muted\">\r\n                                Weight: {{ assessment.assessment.weightage }}%\r\n                              </small>\r\n                            </td>\r\n                            <td>\r\n                              <span class=\"badge bg-secondary\">\r\n                                {{ assessment.assessment.type }}\r\n                              </span>\r\n                            </td>\r\n                            <td>\r\n                              {{ assessment.student_performance.mark }} /\r\n                              {{ assessment.assessment.max_mark }}\r\n                            </td>\r\n                            <td>\r\n                              <span\r\n                                class=\"badge\"\r\n                                :class=\"\r\n                                  getPerformanceBadgeClass(\r\n                                    assessment.student_performance.percentage\r\n                                  )\r\n                                \"\r\n                              >\r\n                                {{ assessment.student_performance.percentage }}%\r\n                              </span>\r\n                            </td>\r\n                            <td>{{ assessment.class_statistics.average }}</td>\r\n                            <td>\r\n                              {{\r\n                                assessment.class_statistics.average_percentage\r\n                              }}%\r\n                            </td>\r\n                            <td>{{ assessment.class_statistics.highest }}</td>\r\n                            <td>\r\n                              <span\r\n                                class=\"badge\"\r\n                                :class=\"\r\n                                  assessment.comparison.above_average\r\n                                    ? 'bg-success'\r\n                                    : 'bg-warning'\r\n                                \"\r\n                              >\r\n                                {{\r\n                                  assessment.comparison.above_average\r\n                                    ? \"Above Average\"\r\n                                    : \"Below Average\"\r\n                                }}\r\n                              </span>\r\n                              <br />\r\n                              <small class=\"text-muted\">\r\n                                {{\r\n                                  assessment.comparison\r\n                                    .difference_from_average > 0\r\n                                    ? \"+\"\r\n                                    : \"\"\r\n                                }}{{\r\n                                  assessment.comparison.difference_from_average\r\n                                }}\r\n                                pts\r\n                              </small>\r\n                            </td>\r\n                            <td>\r\n                              <small class=\"text-muted\">\r\n                                25th:\r\n                                {{\r\n                                  assessment.class_statistics.percentiles[\r\n                                    \"25th\"\r\n                                  ]\r\n                                }}<br />\r\n                                50th:\r\n                                {{\r\n                                  assessment.class_statistics.percentiles[\r\n                                    \"50th\"\r\n                                  ]\r\n                                }}<br />\r\n                                75th:\r\n                                {{\r\n                                  assessment.class_statistics.percentiles[\r\n                                    \"75th\"\r\n                                  ]\r\n                                }}\r\n                              </small>\r\n                            </td>\r\n                          </tr>\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Performance Insights -->\r\n                <div class=\"row mt-4\">\r\n                  <div class=\"col-12\">\r\n                    <div class=\"card border-warning\">\r\n                      <div class=\"card-header bg-warning text-dark\">\r\n                        <h5 class=\"mb-0\">\r\n                          <i class=\"fas fa-lightbulb me-2\"></i>\r\n                          Performance Insights\r\n                        </h5>\r\n                      </div>\r\n                      <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                          <div class=\"col-md-6\">\r\n                            <h6>Strengths:</h6>\r\n                            <ul class=\"list-unstyled\">\r\n                              <li\r\n                                v-for=\"strength in performanceInsights.strengths\"\r\n                                :key=\"strength\"\r\n                                class=\"text-success\"\r\n                              >\r\n                                <i class=\"fas fa-check-circle me-2\"></i\r\n                                >{{ strength }}\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                          <div class=\"col-md-6\">\r\n                            <h6>Areas for Improvement:</h6>\r\n                            <ul class=\"list-unstyled\">\r\n                              <li\r\n                                v-for=\"improvement in performanceInsights.improvements\"\r\n                                :key=\"improvement\"\r\n                                class=\"text-warning\"\r\n                              >\r\n                                <i class=\"fas fa-exclamation-circle me-2\"></i\r\n                                >{{ improvement }}\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"CourseComparison\",\r\n  data() {\r\n    return {\r\n      courses: [],\r\n      selectedCourseId: \"\",\r\n      comparisonData: null,\r\n      loading: false,\r\n      error: null,\r\n    };\r\n  },\r\n  computed: {\r\n    performanceComparisonClass() {\r\n      if (!this.comparisonData) return \"bg-secondary\";\r\n      const studentScore = this.comparisonData.student_performance.total_score;\r\n      const classAverage = this.comparisonData.class_performance.average_score;\r\n\r\n      if (studentScore > classAverage + 10) return \"bg-success\";\r\n      if (studentScore > classAverage) return \"bg-primary\";\r\n      if (studentScore > classAverage - 10) return \"bg-warning\";\r\n      return \"bg-danger\";\r\n    },\r\n    performanceComparisonText() {\r\n      if (!this.comparisonData) return \"No data\";\r\n      const studentScore = this.comparisonData.student_performance.total_score;\r\n      const classAverage = this.comparisonData.class_performance.average_score;\r\n      const difference = studentScore - classAverage;\r\n\r\n      if (difference > 10)\r\n        return `Excellent (+${difference.toFixed(1)} above average)`;\r\n      if (difference > 0) return `Above Average (+${difference.toFixed(1)})`;\r\n      if (difference > -10) return `Below Average (${difference.toFixed(1)})`;\r\n      return `Needs Improvement (${difference.toFixed(1)})`;\r\n    },\r\n    performanceInsights() {\r\n      if (!this.comparisonData) return { strengths: [], improvements: [] };\r\n\r\n      const strengths = [];\r\n      const improvements = [];\r\n\r\n      this.comparisonData.assessments.forEach((assessment) => {\r\n        if (assessment.comparison.above_average) {\r\n          if (assessment.comparison.difference_from_average > 5) {\r\n            strengths.push(\r\n              `Strong performance in ${assessment.assessment.type} (${assessment.assessment.name})`\r\n            );\r\n          }\r\n        } else {\r\n          if (assessment.comparison.difference_from_average < -5) {\r\n            improvements.push(\r\n              `Focus needed on ${assessment.assessment.type} (${assessment.assessment.name})`\r\n            );\r\n          }\r\n        }\r\n      });\r\n\r\n      // Overall performance insights based on rank\r\n      const studentRank = this.comparisonData.student_performance.rank;\r\n      const totalStudents = this.comparisonData.student_performance.total_students;\r\n      if (studentRank && totalStudents) {\r\n        if (studentRank <= Math.ceil(totalStudents * 0.25)) {\r\n          strengths.push(\"Consistently high performer in class\");\r\n        } else if (studentRank > Math.ceil(totalStudents * 0.75)) {\r\n          improvements.push(\"Overall performance below class median\");\r\n        }\r\n      }\r\n\r\n      return { strengths, improvements };\r\n    },\r\n  },\r\n  async created() {\r\n    await this.loadCourses();\r\n  },\r\n  methods: {\r\n    async loadCourses() {\r\n      try {\r\n        console.log(\"=== loadCourses called ===\");\r\n        \r\n        // Check if user is authenticated first\r\n        const isAuthenticated = this.$store.getters[\"auth/isAuthenticated\"];\r\n        console.log(\"Is authenticated:\", isAuthenticated);\r\n        \r\n        if (!isAuthenticated) {\r\n          this.error = \"Please log in to view your courses\";\r\n          this.$router.push('/login');\r\n          return;\r\n        }\r\n\r\n        let currentUser = this.$store.getters[\"auth/user\"];\r\n        console.log(\"Current user from store:\", currentUser);\r\n        console.log(\"LocalStorage token:\", localStorage.getItem('token'));\r\n        console.log(\"LocalStorage user:\", localStorage.getItem('user'));\r\n        \r\n        // If store user is undefined but we have token, try to re-init from localStorage\r\n        if (!currentUser && localStorage.getItem('token') && localStorage.getItem('user')) {\r\n          console.log(\"Re-initializing auth from localStorage...\");\r\n          await this.$store.dispatch('auth/checkAuth');\r\n          currentUser = this.$store.getters[\"auth/user\"];\r\n          console.log(\"Refreshed user:\", currentUser);\r\n        }\r\n        \r\n        // Final fallback: parse user directly from localStorage if store is still empty\r\n        if (!currentUser && localStorage.getItem('user')) {\r\n          try {\r\n            console.log(\"Emergency fallback: parsing user from localStorage\");\r\n            currentUser = JSON.parse(localStorage.getItem('user'));\r\n            console.log(\"Emergency fallback user:\", currentUser);\r\n          } catch (e) {\r\n            console.error(\"Failed to parse user from localStorage:\", e);\r\n          }\r\n        }\r\n\r\n        if (currentUser && currentUser.role === \"student\") {\r\n          console.log(\"Making API call to get courses...\"); // Debug log\r\n          // Get courses the student is enrolled in\r\n          const response = await axios.get(\"/api/enrollments/student/courses\");\r\n          console.log(\"API Response:\", response.data); // Debug log\r\n          this.courses = response.data;\r\n          \r\n          if (this.courses.length === 0) {\r\n            this.error = \"You are not enrolled in any courses yet\";\r\n          }\r\n        } else {\r\n          this.error = `Access denied - Student role required. Current user role: ${currentUser?.role || 'undefined'}`;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading courses:\", error);\r\n        if (error.response?.status === 401) {\r\n          this.error = \"Authentication failed - please log in again\";\r\n          this.$router.push('/login');\r\n        } else {\r\n          this.error = error.response?.data?.error || \"Failed to load courses\";\r\n        }\r\n      }\r\n    },\r\n    async loadComparison() {\r\n      if (!this.selectedCourseId) {\r\n        this.comparisonData = null;\r\n        return;\r\n      }\r\n\r\n      this.loading = true;\r\n      this.error = null;\r\n\r\n      try {\r\n        const response = await axios.get(\r\n          `/api/comparisons/coursemates/${this.selectedCourseId}`\r\n        );\r\n        this.comparisonData = response.data;\r\n      } catch (error) {\r\n        console.error(\"Error loading comparison:\", error);\r\n        this.error =\r\n          error.response?.data?.error || \"Failed to load comparison data\";\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    getPerformanceBadgeClass(percentage) {\r\n      if (percentage >= 90) return \"bg-success\";\r\n      if (percentage >= 80) return \"bg-primary\";\r\n      if (percentage >= 70) return \"bg-info\";\r\n      if (percentage >= 60) return \"bg-warning\";\r\n      return \"bg-danger\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.coursemate-comparison {\r\n  min-height: 100vh;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.card {\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n  border: 1px solid rgba(0, 0, 0, 0.125);\r\n}\r\n\r\n.table th {\r\n  font-weight: 600;\r\n  border-top: none;\r\n}\r\n\r\n.badge {\r\n  font-size: 0.8em;\r\n}\r\n\r\n.performance-metric {\r\n  font-size: 1.2em;\r\n  font-weight: 600;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}