{"ast":null,"code":"import _objectSpread from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport axios from 'axios';\nexport default {\n  name: 'UserManagement',\n  data: function data() {\n    return {\n      users: [],\n      advisors: [],\n      searchQuery: '',\n      roleFilter: '',\n      currentPage: 1,\n      itemsPerPage: 10,\n      showAddUserModal: false,\n      showEditUserModal: false,\n      showDeleteModal: false,\n      showResetPasswordModal: false,\n      newUser: {\n        name: '',\n        email: '',\n        role: 'student',\n        matricNumber: '',\n        pin: '',\n        advisorId: null,\n        password: ''\n      },\n      editingUser: {\n        id: null,\n        name: '',\n        email: '',\n        role: '',\n        matric_number: '',\n        advisor_id: null,\n        password: ''\n      },\n      userToDelete: null,\n      userToResetPassword: null,\n      newPassword: '',\n      newPin: ''\n    };\n  },\n  computed: {\n    filteredUsers: function filteredUsers() {\n      var _this = this;\n      var filtered = this.users;\n\n      // Apply search query filter\n      if (this.searchQuery) {\n        var query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(function (user) {\n          return user.name.toLowerCase().includes(query) || user.email.toLowerCase().includes(query) || user.matric_number && user.matric_number.toLowerCase().includes(query);\n        });\n      }\n\n      // Apply role filter\n      if (this.roleFilter) {\n        filtered = filtered.filter(function (user) {\n          return user.role === _this.roleFilter;\n        });\n      }\n\n      // Calculate pagination\n      var start = (this.currentPage - 1) * this.itemsPerPage;\n      var end = start + this.itemsPerPage;\n      return filtered.slice(start, end);\n    },\n    totalPages: function totalPages() {\n      var _this2 = this;\n      var filtered = this.users;\n      if (this.searchQuery) {\n        var query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(function (user) {\n          return user.name.toLowerCase().includes(query) || user.email.toLowerCase().includes(query) || user.matric_number && user.matric_number.toLowerCase().includes(query);\n        });\n      }\n      if (this.roleFilter) {\n        filtered = filtered.filter(function (user) {\n          return user.role === _this2.roleFilter;\n        });\n      }\n      return Math.ceil(filtered.length / this.itemsPerPage);\n    }\n  },\n  methods: {\n    formatDate: function formatDate(dateString) {\n      var date = new Date(dateString);\n      return new Intl.DateTimeFormat('en-GB', {\n        day: '2-digit',\n        month: 'short',\n        year: 'numeric'\n      }).format(date);\n    },\n    getRoleBadgeClass: function getRoleBadgeClass(role) {\n      switch (role) {\n        case 'admin':\n          return 'bg-danger';\n        case 'lecturer':\n          return 'bg-primary';\n        case 'student':\n          return 'bg-success';\n        case 'advisor':\n          return 'bg-warning';\n        default:\n          return 'bg-secondary';\n      }\n    },\n    changePage: function changePage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    },\n    fetchUsers: function fetchUsers() {\n      var _this3 = this;\n      var token = this.$store.getters['auth/token'];\n      axios.get(\"\".concat(process.env.VUE_APP_API_URL, \"/api/admin/users\"), {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        _this3.users = response.data;\n      })[\"catch\"](function (error) {\n        console.error('Error fetching users:', error);\n        _this3.$toast.error('Failed to load users');\n      });\n    },\n    fetchAdvisors: function fetchAdvisors() {\n      var _this4 = this;\n      var token = this.$store.getters['auth/token'];\n      axios.get(\"\".concat(process.env.VUE_APP_API_URL, \"/api/users?role=advisor\"), {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        _this4.advisors = response.data;\n      })[\"catch\"](function (error) {\n        console.error('Error fetching advisors:', error);\n      });\n    },\n    addUser: function addUser() {\n      var _this5 = this;\n      var token = this.$store.getters['auth/token'];\n      axios.post(\"\".concat(process.env.VUE_APP_API_URL, \"/api/admin/users\"), this.newUser, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        _this5.$toast.success('User added successfully');\n        _this5.showAddUserModal = false;\n        _this5.fetchUsers();\n\n        // Reset form\n        _this5.newUser = {\n          name: '',\n          email: '',\n          role: 'student',\n          matricNumber: '',\n          pin: '',\n          advisorId: null,\n          password: ''\n        };\n      })[\"catch\"](function (error) {\n        var _error$response;\n        console.error('Error adding user:', error);\n        _this5.$toast.error(((_error$response = error.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || 'Failed to add user');\n      });\n    },\n    editUser: function editUser(user) {\n      this.editingUser = _objectSpread({}, user);\n      this.showEditUserModal = true;\n    },\n    updateUser: function updateUser() {\n      var _this6 = this;\n      var token = this.$store.getters['auth/token'];\n      var userId = this.editingUser.id;\n\n      // Only send fields that should be updated\n      var updateData = {\n        name: this.editingUser.name,\n        email: this.editingUser.email,\n        role: this.editingUser.role\n      };\n      if (this.editingUser.role === 'student') {\n        updateData.matricNumber = this.editingUser.matric_number;\n        updateData.advisorId = this.editingUser.advisor_id;\n      }\n      if (this.editingUser.password) {\n        updateData.password = this.editingUser.password;\n      }\n      axios.put(\"\".concat(process.env.VUE_APP_API_URL, \"/api/admin/users/\").concat(userId), updateData, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        _this6.$toast.success('User updated successfully');\n        _this6.showEditUserModal = false;\n        _this6.fetchUsers();\n      })[\"catch\"](function (error) {\n        var _error$response2;\n        console.error('Error updating user:', error);\n        _this6.$toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 || (_error$response2 = _error$response2.data) === null || _error$response2 === void 0 ? void 0 : _error$response2.error) || 'Failed to update user');\n      });\n    },\n    confirmDeleteUser: function confirmDeleteUser(user) {\n      this.userToDelete = user;\n      this.showDeleteModal = true;\n    },\n    deleteUser: function deleteUser() {\n      var _this7 = this;\n      var token = this.$store.getters['auth/token'];\n      var userId = this.userToDelete.id;\n      axios[\"delete\"](\"\".concat(process.env.VUE_APP_API_URL, \"/api/admin/users/\").concat(userId), {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        _this7.$toast.success('User deleted successfully');\n        _this7.showDeleteModal = false;\n        _this7.fetchUsers();\n      })[\"catch\"](function (error) {\n        var _error$response3;\n        console.error('Error deleting user:', error);\n        _this7.$toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 || (_error$response3 = _error$response3.data) === null || _error$response3 === void 0 ? void 0 : _error$response3.error) || 'Failed to delete user');\n      });\n    },\n    resetPassword: function resetPassword(user) {\n      this.userToResetPassword = user;\n      this.newPassword = '';\n      this.newPin = '';\n      this.showResetPasswordModal = true;\n    },\n    confirmResetPassword: function confirmResetPassword() {\n      var _this8 = this;\n      var token = this.$store.getters['auth/token'];\n      var userId = this.userToResetPassword.id;\n      var updateData = {\n        password: this.newPassword\n      };\n      if (this.userToResetPassword.role === 'student' && this.newPin) {\n        updateData.pin = this.newPin;\n      }\n      axios.put(\"\".concat(process.env.VUE_APP_API_URL, \"/api/admin/users/\").concat(userId), updateData, {\n        headers: {\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (response) {\n        _this8.$toast.success('Password reset successfully');\n        _this8.showResetPasswordModal = false;\n      })[\"catch\"](function (error) {\n        var _error$response4;\n        console.error('Error resetting password:', error);\n        _this8.$toast.error(((_error$response4 = error.response) === null || _error$response4 === void 0 || (_error$response4 = _error$response4.data) === null || _error$response4 === void 0 ? void 0 : _error$response4.error) || 'Failed to reset password');\n      });\n    }\n  },\n  created: function created() {\n    this.fetchUsers();\n    this.fetchAdvisors();\n  }\n};","map":{"version":3,"names":["axios","name","data","users","advisors","searchQuery","roleFilter","currentPage","itemsPerPage","showAddUserModal","showEditUserModal","showDeleteModal","showResetPasswordModal","newUser","email","role","matricNumber","pin","advisorId","password","editingUser","id","matric_number","advisor_id","userToDelete","userToResetPassword","newPassword","newPin","computed","filteredUsers","_this","filtered","query","toLowerCase","filter","user","includes","start","end","slice","totalPages","_this2","Math","ceil","length","methods","formatDate","dateString","date","Date","Intl","DateTimeFormat","day","month","year","format","getRoleBadgeClass","changePage","page","fetchUsers","_this3","token","$store","getters","get","concat","process","env","VUE_APP_API_URL","headers","Authorization","then","response","error","console","$toast","fetchAdvisors","_this4","addUser","_this5","post","success","_error$response","editUser","_objectSpread","updateUser","_this6","userId","updateData","put","_error$response2","confirmDeleteUser","deleteUser","_this7","_error$response3","resetPassword","confirmResetPassword","_this8","_error$response4","created"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\NEW\\course-mark-management\\frontend\\src\\views\\admin\\UserManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-management\">\r\n    <h1>User Management</h1>\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n        <h5 class=\"mb-0\">Users</h5>\r\n        <button class=\"btn btn-primary\" @click=\"showAddUserModal = true\">\r\n          <i class=\"bi bi-plus\"></i> Add User\r\n        </button>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div class=\"mb-3\">\r\n          <div class=\"input-group\">\r\n            <span class=\"input-group-text\">\r\n              <i class=\"bi bi-search\"></i>\r\n            </span>\r\n            <input \r\n              type=\"text\" \r\n              class=\"form-control\" \r\n              v-model=\"searchQuery\" \r\n              placeholder=\"Search users...\" \r\n            />\r\n            <select class=\"form-select\" v-model=\"roleFilter\" style=\"max-width: 150px;\">\r\n              <option value=\"\">All Roles</option>\r\n              <option value=\"admin\">Admin</option>\r\n              <option value=\"lecturer\">Lecturer</option>\r\n              <option value=\"student\">Student</option>\r\n              <option value=\"advisor\">Advisor</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"table-responsive\">\r\n          <table class=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                <th>Role</th>\r\n                <th>Matric Number</th>\r\n                <th>Created</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"user in filteredUsers\" :key=\"user.id\">\r\n                <td>{{ user.name }}</td>\r\n                <td>{{ user.email }}</td>\r\n                <td>\r\n                  <span class=\"badge\" :class=\"getRoleBadgeClass(user.role)\">\r\n                    {{ user.role }}\r\n                  </span>\r\n                </td>\r\n                <td>{{ user.matric_number || '-' }}</td>\r\n                <td>{{ formatDate(user.created_at) }}</td>\r\n                <td>\r\n                  <div class=\"btn-group\">\r\n                    <button \r\n                      class=\"btn btn-sm btn-outline-secondary\"\r\n                      @click=\"editUser(user)\"\r\n                    >\r\n                      <i class=\"bi bi-pencil\"></i>\r\n                    </button>\r\n                    <button \r\n                      class=\"btn btn-sm btn-outline-danger\"\r\n                      @click=\"confirmDeleteUser(user)\"\r\n                    >\r\n                      <i class=\"bi bi-trash\"></i>\r\n                    </button>\r\n                    <button \r\n                      class=\"btn btn-sm btn-outline-primary\"\r\n                      @click=\"resetPassword(user)\"\r\n                    >\r\n                      <i class=\"bi bi-key\"></i>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- Pagination controls -->\r\n        <nav aria-label=\"User pagination\">\r\n          <ul class=\"pagination justify-content-center\">\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(currentPage - 1)\">Previous</a>\r\n            </li>\r\n            <li v-for=\"page in totalPages\" :key=\"page\" class=\"page-item\" :class=\"{ active: page === currentPage }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(page)\">{{ page }}</a>\r\n            </li>\r\n            <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\r\n              <a class=\"page-link\" href=\"#\" @click.prevent=\"changePage(currentPage + 1)\">Next</a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Add User Modal -->\r\n    <div class=\"modal\" tabindex=\"-1\" :class=\"{ 'd-block': showAddUserModal }\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Add New User</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"showAddUserModal = false\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"addUser\">\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Name</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"newUser.name\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Email</label>\r\n                <input type=\"email\" class=\"form-control\" v-model=\"newUser.email\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Role</label>\r\n                <select class=\"form-select\" v-model=\"newUser.role\" required>\r\n                  <option value=\"admin\">Admin</option>\r\n                  <option value=\"lecturer\">Lecturer</option>\r\n                  <option value=\"student\">Student</option>\r\n                  <option value=\"advisor\">Advisor</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"mb-3\" v-if=\"newUser.role === 'student'\">\r\n                <label class=\"form-label\">Matric Number</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"newUser.matricNumber\">\r\n              </div>\r\n              <div class=\"mb-3\" v-if=\"newUser.role === 'student'\">\r\n                <label class=\"form-label\">PIN (for student login)</label>\r\n                <input type=\"password\" class=\"form-control\" v-model=\"newUser.pin\">\r\n              </div>\r\n              <div class=\"mb-3\" v-if=\"newUser.role === 'student'\">\r\n                <label class=\"form-label\">Advisor</label>\r\n                <select class=\"form-select\" v-model=\"newUser.advisorId\">\r\n                  <option value=\"\">Select Advisor</option>\r\n                  <option \r\n                    v-for=\"advisor in advisors\" \r\n                    :key=\"advisor.id\" \r\n                    :value=\"advisor.id\"\r\n                  >\r\n                    {{ advisor.name }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Password</label>\r\n                <input type=\"password\" class=\"form-control\" v-model=\"newUser.password\" required>\r\n              </div>\r\n              <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-secondary me-2\" @click=\"showAddUserModal = false\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Add User</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-backdrop fade show\" v-if=\"showAddUserModal\"></div>\r\n\r\n    <!-- Edit User Modal -->\r\n    <div class=\"modal\" tabindex=\"-1\" :class=\"{ 'd-block': showEditUserModal }\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Edit User</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"showEditUserModal = false\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"updateUser\">\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Name</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"editingUser.name\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Email</label>\r\n                <input type=\"email\" class=\"form-control\" v-model=\"editingUser.email\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Role</label>\r\n                <select class=\"form-select\" v-model=\"editingUser.role\" required>\r\n                  <option value=\"admin\">Admin</option>\r\n                  <option value=\"lecturer\">Lecturer</option>\r\n                  <option value=\"student\">Student</option>\r\n                  <option value=\"advisor\">Advisor</option>\r\n                </select>\r\n              </div>\r\n              <div class=\"mb-3\" v-if=\"editingUser.role === 'student'\">\r\n                <label class=\"form-label\">Matric Number</label>\r\n                <input type=\"text\" class=\"form-control\" v-model=\"editingUser.matric_number\">\r\n              </div>\r\n              <div class=\"mb-3\" v-if=\"editingUser.role === 'student'\">\r\n                <label class=\"form-label\">Advisor</label>\r\n                <select class=\"form-select\" v-model=\"editingUser.advisor_id\">\r\n                  <option value=\"\">Select Advisor</option>\r\n                  <option \r\n                    v-for=\"advisor in advisors\" \r\n                    :key=\"advisor.id\" \r\n                    :value=\"advisor.id\"\r\n                  >\r\n                    {{ advisor.name }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">New Password (leave blank to keep current)</label>\r\n                <input type=\"password\" class=\"form-control\" v-model=\"editingUser.password\">\r\n              </div>\r\n              <div class=\"d-flex justify-content-end\">\r\n                <button type=\"button\" class=\"btn btn-secondary me-2\" @click=\"showEditUserModal = false\">Cancel</button>\r\n                <button type=\"submit\" class=\"btn btn-primary\">Update User</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-backdrop fade show\" v-if=\"showEditUserModal\"></div>\r\n\r\n    <!-- Delete Confirmation Modal -->\r\n    <div class=\"modal\" tabindex=\"-1\" :class=\"{ 'd-block': showDeleteModal }\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Confirm Delete</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"showDeleteModal = false\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p>Are you sure you want to delete user <strong>{{ userToDelete?.name }}</strong>?</p>\r\n            <p class=\"text-danger\">This action cannot be undone and will remove all associated data.</p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"showDeleteModal = false\">Cancel</button>\r\n            <button type=\"button\" class=\"btn btn-danger\" @click=\"deleteUser\">Delete User</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-backdrop fade show\" v-if=\"showDeleteModal\"></div>\r\n\r\n    <!-- Reset Password Modal -->\r\n    <div class=\"modal\" tabindex=\"-1\" :class=\"{ 'd-block': showResetPasswordModal }\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Reset Password</h5>\r\n            <button type=\"button\" class=\"btn-close\" @click=\"showResetPasswordModal = false\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p>Set a new password for <strong>{{ userToResetPassword?.name }}</strong>:</p>\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\">New Password</label>\r\n              <input type=\"password\" class=\"form-control\" v-model=\"newPassword\" required>\r\n            </div>\r\n            <div class=\"mb-3\" v-if=\"userToResetPassword?.role === 'student'\">\r\n              <label class=\"form-label\">New PIN (for student login)</label>\r\n              <input type=\"password\" class=\"form-control\" v-model=\"newPin\">\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"showResetPasswordModal = false\">Cancel</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"confirmResetPassword\">Reset Password</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-backdrop fade show\" v-if=\"showResetPasswordModal\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'UserManagement',\r\n  data() {\r\n    return {\r\n      users: [],\r\n      advisors: [],\r\n      searchQuery: '',\r\n      roleFilter: '',\r\n      currentPage: 1,\r\n      itemsPerPage: 10,\r\n      showAddUserModal: false,\r\n      showEditUserModal: false,\r\n      showDeleteModal: false,\r\n      showResetPasswordModal: false,\r\n      newUser: {\r\n        name: '',\r\n        email: '',\r\n        role: 'student',\r\n        matricNumber: '',\r\n        pin: '',\r\n        advisorId: null,\r\n        password: ''\r\n      },\r\n      editingUser: {\r\n        id: null,\r\n        name: '',\r\n        email: '',\r\n        role: '',\r\n        matric_number: '',\r\n        advisor_id: null,\r\n        password: ''\r\n      },\r\n      userToDelete: null,\r\n      userToResetPassword: null,\r\n      newPassword: '',\r\n      newPin: ''\r\n    };\r\n  },\r\n  computed: {\r\n    filteredUsers() {\r\n      let filtered = this.users;\r\n      \r\n      // Apply search query filter\r\n      if (this.searchQuery) {\r\n        const query = this.searchQuery.toLowerCase();\r\n        filtered = filtered.filter(user => \r\n          user.name.toLowerCase().includes(query) || \r\n          user.email.toLowerCase().includes(query) ||\r\n          (user.matric_number && user.matric_number.toLowerCase().includes(query))\r\n        );\r\n      }\r\n      \r\n      // Apply role filter\r\n      if (this.roleFilter) {\r\n        filtered = filtered.filter(user => user.role === this.roleFilter);\r\n      }\r\n      \r\n      // Calculate pagination\r\n      const start = (this.currentPage - 1) * this.itemsPerPage;\r\n      const end = start + this.itemsPerPage;\r\n      \r\n      return filtered.slice(start, end);\r\n    },\r\n    totalPages() {\r\n      let filtered = this.users;\r\n      \r\n      if (this.searchQuery) {\r\n        const query = this.searchQuery.toLowerCase();\r\n        filtered = filtered.filter(user => \r\n          user.name.toLowerCase().includes(query) || \r\n          user.email.toLowerCase().includes(query) ||\r\n          (user.matric_number && user.matric_number.toLowerCase().includes(query))\r\n        );\r\n      }\r\n      \r\n      if (this.roleFilter) {\r\n        filtered = filtered.filter(user => user.role === this.roleFilter);\r\n      }\r\n      \r\n      return Math.ceil(filtered.length / this.itemsPerPage);\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate(dateString) {\r\n      const date = new Date(dateString);\r\n      return new Intl.DateTimeFormat('en-GB', {\r\n        day: '2-digit',\r\n        month: 'short',\r\n        year: 'numeric'\r\n      }).format(date);\r\n    },\r\n    getRoleBadgeClass(role) {\r\n      switch (role) {\r\n        case 'admin':\r\n          return 'bg-danger';\r\n        case 'lecturer':\r\n          return 'bg-primary';\r\n        case 'student':\r\n          return 'bg-success';\r\n        case 'advisor':\r\n          return 'bg-warning';\r\n        default:\r\n          return 'bg-secondary';\r\n      }\r\n    },\r\n    changePage(page) {\r\n      if (page >= 1 && page <= this.totalPages) {\r\n        this.currentPage = page;\r\n      }\r\n    },\r\n    fetchUsers() {\r\n      const token = this.$store.getters['auth/token'];\r\n      \r\n      axios.get(`${process.env.VUE_APP_API_URL}/api/admin/users`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.users = response.data;\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching users:', error);\r\n        this.$toast.error('Failed to load users');\r\n      });\r\n    },\r\n    fetchAdvisors() {\r\n      const token = this.$store.getters['auth/token'];\r\n      \r\n      axios.get(`${process.env.VUE_APP_API_URL}/api/users?role=advisor`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.advisors = response.data;\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching advisors:', error);\r\n      });\r\n    },\r\n    addUser() {\r\n      const token = this.$store.getters['auth/token'];\r\n      \r\n      axios.post(`${process.env.VUE_APP_API_URL}/api/admin/users`, this.newUser, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.$toast.success('User added successfully');\r\n        this.showAddUserModal = false;\r\n        this.fetchUsers();\r\n        \r\n        // Reset form\r\n        this.newUser = {\r\n          name: '',\r\n          email: '',\r\n          role: 'student',\r\n          matricNumber: '',\r\n          pin: '',\r\n          advisorId: null,\r\n          password: ''\r\n        };\r\n      })\r\n      .catch(error => {\r\n        console.error('Error adding user:', error);\r\n        this.$toast.error(error.response?.data?.error || 'Failed to add user');\r\n      });\r\n    },\r\n    editUser(user) {\r\n      this.editingUser = { ...user };\r\n      this.showEditUserModal = true;\r\n    },\r\n    updateUser() {\r\n      const token = this.$store.getters['auth/token'];\r\n      const userId = this.editingUser.id;\r\n      \r\n      // Only send fields that should be updated\r\n      const updateData = {\r\n        name: this.editingUser.name,\r\n        email: this.editingUser.email,\r\n        role: this.editingUser.role\r\n      };\r\n      \r\n      if (this.editingUser.role === 'student') {\r\n        updateData.matricNumber = this.editingUser.matric_number;\r\n        updateData.advisorId = this.editingUser.advisor_id;\r\n      }\r\n      \r\n      if (this.editingUser.password) {\r\n        updateData.password = this.editingUser.password;\r\n      }\r\n      \r\n      axios.put(`${process.env.VUE_APP_API_URL}/api/admin/users/${userId}`, updateData, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.$toast.success('User updated successfully');\r\n        this.showEditUserModal = false;\r\n        this.fetchUsers();\r\n      })\r\n      .catch(error => {\r\n        console.error('Error updating user:', error);\r\n        this.$toast.error(error.response?.data?.error || 'Failed to update user');\r\n      });\r\n    },\r\n    confirmDeleteUser(user) {\r\n      this.userToDelete = user;\r\n      this.showDeleteModal = true;\r\n    },\r\n    deleteUser() {\r\n      const token = this.$store.getters['auth/token'];\r\n      const userId = this.userToDelete.id;\r\n      \r\n      axios.delete(`${process.env.VUE_APP_API_URL}/api/admin/users/${userId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.$toast.success('User deleted successfully');\r\n        this.showDeleteModal = false;\r\n        this.fetchUsers();\r\n      })\r\n      .catch(error => {\r\n        console.error('Error deleting user:', error);\r\n        this.$toast.error(error.response?.data?.error || 'Failed to delete user');\r\n      });\r\n    },\r\n    resetPassword(user) {\r\n      this.userToResetPassword = user;\r\n      this.newPassword = '';\r\n      this.newPin = '';\r\n      this.showResetPasswordModal = true;\r\n    },\r\n    confirmResetPassword() {\r\n      const token = this.$store.getters['auth/token'];\r\n      const userId = this.userToResetPassword.id;\r\n      \r\n      const updateData = {\r\n        password: this.newPassword\r\n      };\r\n      \r\n      if (this.userToResetPassword.role === 'student' && this.newPin) {\r\n        updateData.pin = this.newPin;\r\n      }\r\n      \r\n      axios.put(`${process.env.VUE_APP_API_URL}/api/admin/users/${userId}`, updateData, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n      .then(response => {\r\n        this.$toast.success('Password reset successfully');\r\n        this.showResetPasswordModal = false;\r\n      })\r\n      .catch(error => {\r\n        console.error('Error resetting password:', error);\r\n        this.$toast.error(error.response?.data?.error || 'Failed to reset password');\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchUsers();\r\n    this.fetchAdvisors();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management {\r\n  padding: 20px;\r\n}\r\n\r\n.modal {\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.badge {\r\n  text-transform: capitalize;\r\n  font-size: 0.8rem;\r\n  padding: 5px 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}