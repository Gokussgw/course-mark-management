{"ast":null,"code":"import _regenerator from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/ansmu/Desktop/Web/NEW/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport axios from 'axios';\nimport { Modal } from 'bootstrap';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'StudentFeedback',\n  data: function data() {\n    return {\n      courses: [],\n      selectedCourseId: '',\n      feedbackList: [],\n      courseStudents: [],\n      isLoading: false,\n      isSaving: false,\n      isEditMode: false,\n      selectedFeedback: null,\n      feedbackForm: {\n        id: null,\n        student_id: '',\n        course_id: '',\n        lecturer_id: '',\n        feedback_type: 'general',\n        subject: '',\n        feedback: '',\n        priority: 'medium',\n        is_visible_to_student: true,\n        is_visible_to_advisor: true\n      }\n    };\n  },\n  computed: _objectSpread({}, mapGetters('auth', ['getUser'])),\n  mounted: function mounted() {\n    this.loadCourses();\n  },\n  methods: {\n    loadCourses: function loadCourses() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var _this$getUser, userId, response, _error$response, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              console.log('Loading courses...');\n              console.log('User data:', _this.getUser);\n              _context.p = 1;\n              userId = (_this$getUser = _this.getUser) === null || _this$getUser === void 0 ? void 0 : _this$getUser.id;\n              if (userId) {\n                _context.n = 2;\n                break;\n              }\n              console.error('No user ID found. User data:', _this.getUser);\n              _this.$store.dispatch('showToast', {\n                message: 'Please login first',\n                type: 'warning'\n              });\n              return _context.a(2);\n            case 2:\n              console.log('Making API call with lecturer_id:', userId);\n              _context.n = 3;\n              return axios.get(\"/api/courses/lecturer/\".concat(userId));\n            case 3:\n              response = _context.v;\n              console.log('API response:', response.data);\n              _this.courses = response.data || [];\n              console.log('Courses loaded:', _this.courses.length);\n              _context.n = 5;\n              break;\n            case 4:\n              _context.p = 4;\n              _t = _context.v;\n              console.error('Error loading courses:', _t);\n              console.error('Error response:', (_error$response = _t.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n              _this.$store.dispatch('showToast', {\n                message: 'Error loading courses',\n                type: 'error'\n              });\n            case 5:\n              return _context.a(2);\n          }\n        }, _callee, null, [[1, 4]]);\n      }))();\n    },\n    loadCourseFeedback: function loadCourseFeedback() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var _this2$getUser, lecturerId, response, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              if (_this2.selectedCourseId) {\n                _context2.n = 1;\n                break;\n              }\n              _this2.feedbackList = [];\n              return _context2.a(2);\n            case 1:\n              _this2.isLoading = true;\n              _context2.p = 2;\n              lecturerId = (_this2$getUser = _this2.getUser) === null || _this2$getUser === void 0 ? void 0 : _this2$getUser.id;\n              _context2.n = 3;\n              return axios.get(\"/api/feedback/lecturer/\".concat(lecturerId, \"/course/\").concat(_this2.selectedCourseId));\n            case 3:\n              response = _context2.v;\n              _this2.feedbackList = response.data || [];\n\n              // Also load students for this course\n              _context2.n = 4;\n              return _this2.loadCourseStudents();\n            case 4:\n              _context2.n = 6;\n              break;\n            case 5:\n              _context2.p = 5;\n              _t2 = _context2.v;\n              console.error('Error loading feedback:', _t2);\n              _this2.$store.dispatch('showToast', {\n                message: 'Error loading feedback',\n                type: 'error'\n              });\n            case 6:\n              _context2.p = 6;\n              _this2.isLoading = false;\n              return _context2.f(6);\n            case 7:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[2, 5, 6, 7]]);\n      }))();\n    },\n    loadCourseStudents: function loadCourseStudents() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var response, _t3;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.p = 0;\n              _context3.n = 1;\n              return axios.get(\"/api/courses/\".concat(_this3.selectedCourseId, \"/students\"));\n            case 1:\n              response = _context3.v;\n              _this3.courseStudents = response.data || [];\n              _context3.n = 3;\n              break;\n            case 2:\n              _context3.p = 2;\n              _t3 = _context3.v;\n              console.error('Error loading students:', _t3);\n            case 3:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[0, 2]]);\n      }))();\n    },\n    showAddFeedbackModal: function showAddFeedbackModal() {\n      var _this$getUser2;\n      if (!this.selectedCourseId) {\n        this.$store.dispatch('showToast', {\n          message: 'Please select a course first',\n          type: 'warning'\n        });\n        return;\n      }\n      this.isEditMode = false;\n      this.resetFeedbackForm();\n      this.feedbackForm.course_id = this.selectedCourseId;\n      this.feedbackForm.lecturer_id = (_this$getUser2 = this.getUser) === null || _this$getUser2 === void 0 ? void 0 : _this$getUser2.id;\n      var modal = new Modal(document.getElementById('feedbackModal'));\n      modal.show();\n    },\n    editFeedback: function editFeedback(feedback) {\n      this.isEditMode = true;\n      this.feedbackForm = _objectSpread({}, feedback);\n\n      // Close view modal if open\n      var viewModal = Modal.getInstance(document.getElementById('viewFeedbackModal'));\n      if (viewModal) {\n        viewModal.hide();\n      }\n\n      // Show edit modal\n      var modal = new Modal(document.getElementById('feedbackModal'));\n      modal.show();\n    },\n    viewFeedback: function viewFeedback(feedback) {\n      this.selectedFeedback = feedback;\n      var modal = new Modal(document.getElementById('viewFeedbackModal'));\n      modal.show();\n    },\n    saveFeedback: function saveFeedback() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {\n        var modal, _t4;\n        return _regenerator().w(function (_context4) {\n          while (1) switch (_context4.n) {\n            case 0:\n              _this4.isSaving = true;\n              _context4.p = 1;\n              _context4.n = 2;\n              return _this4.isEditMode ? axios.put(\"/api/feedback/\".concat(_this4.feedbackForm.id), _this4.feedbackForm) : axios.post('/api/feedback', _this4.feedbackForm);\n            case 2:\n              _this4.$store.dispatch('showToast', {\n                message: _this4.isEditMode ? 'Feedback updated successfully' : 'Feedback added successfully',\n                type: 'success'\n              });\n\n              // Hide modal\n              modal = Modal.getInstance(document.getElementById('feedbackModal'));\n              modal.hide();\n\n              // Reload feedback list\n              _context4.n = 3;\n              return _this4.loadCourseFeedback();\n            case 3:\n              _context4.n = 5;\n              break;\n            case 4:\n              _context4.p = 4;\n              _t4 = _context4.v;\n              console.error('Error saving feedback:', _t4);\n              _this4.$store.dispatch('showToast', {\n                message: 'Error saving feedback',\n                type: 'error'\n              });\n            case 5:\n              _context4.p = 5;\n              _this4.isSaving = false;\n              return _context4.f(5);\n            case 6:\n              return _context4.a(2);\n          }\n        }, _callee4, null, [[1, 4, 5, 6]]);\n      }))();\n    },\n    deleteFeedback: function deleteFeedback(feedback) {\n      var _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {\n        var _t5;\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.n) {\n            case 0:\n              if (confirm(\"Are you sure you want to delete this feedback for \".concat(feedback.student_name, \"?\"))) {\n                _context5.n = 1;\n                break;\n              }\n              return _context5.a(2);\n            case 1:\n              _context5.p = 1;\n              _context5.n = 2;\n              return axios[\"delete\"](\"/api/feedback/\".concat(feedback.id));\n            case 2:\n              _this5.$store.dispatch('showToast', {\n                message: 'Feedback deleted successfully',\n                type: 'success'\n              });\n              _context5.n = 3;\n              return _this5.loadCourseFeedback();\n            case 3:\n              _context5.n = 5;\n              break;\n            case 4:\n              _context5.p = 4;\n              _t5 = _context5.v;\n              console.error('Error deleting feedback:', _t5);\n              _this5.$store.dispatch('showToast', {\n                message: 'Error deleting feedback',\n                type: 'error'\n              });\n            case 5:\n              return _context5.a(2);\n          }\n        }, _callee5, null, [[1, 4]]);\n      }))();\n    },\n    resetFeedbackForm: function resetFeedbackForm() {\n      this.feedbackForm = {\n        id: null,\n        student_id: '',\n        course_id: '',\n        lecturer_id: '',\n        feedback_type: 'general',\n        subject: '',\n        feedback: '',\n        priority: 'medium',\n        is_visible_to_student: true,\n        is_visible_to_advisor: true\n      };\n    },\n    getStudentInitials: function getStudentInitials(name) {\n      return name.split(' ').map(function (n) {\n        return n.charAt(0);\n      }).join('').toUpperCase();\n    },\n    getFeedbackTypeBadgeClass: function getFeedbackTypeBadgeClass(type) {\n      var classes = {\n        'general': 'bg-secondary',\n        'performance': 'bg-success',\n        'improvement': 'bg-warning text-dark',\n        'commendation': 'bg-info',\n        'concern': 'bg-danger'\n      };\n      return classes[type] || 'bg-secondary';\n    },\n    getPriorityBadgeClass: function getPriorityBadgeClass(priority) {\n      var classes = {\n        'low': 'bg-light text-dark',\n        'medium': 'bg-info',\n        'high': 'bg-warning text-dark',\n        'urgent': 'bg-danger'\n      };\n      return classes[priority] || 'bg-info';\n    },\n    formatFeedbackType: function formatFeedbackType(type) {\n      return type.charAt(0).toUpperCase() + type.slice(1);\n    },\n    formatDate: function formatDate(dateString) {\n      return new Date(dateString).toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    truncateText: function truncateText(text, length) {\n      return text.length > length ? text.substring(0, length) + '...' : text;\n    }\n  }\n};","map":{"version":3,"names":["axios","Modal","mapGetters","name","data","courses","selectedCourseId","feedbackList","courseStudents","isLoading","isSaving","isEditMode","selectedFeedback","feedbackForm","id","student_id","course_id","lecturer_id","feedback_type","subject","feedback","priority","is_visible_to_student","is_visible_to_advisor","computed","_objectSpread","mounted","loadCourses","methods","_this","_asyncToGenerator","_regenerator","m","_callee","_this$getUser","userId","response","_error$response","_t","w","_context","n","console","log","getUser","p","error","$store","dispatch","message","type","a","get","concat","v","length","loadCourseFeedback","_this2","_callee2","_this2$getUser","lecturerId","_t2","_context2","loadCourseStudents","f","_this3","_callee3","_t3","_context3","showAddFeedbackModal","_this$getUser2","resetFeedbackForm","modal","document","getElementById","show","editFeedback","viewModal","getInstance","hide","viewFeedback","saveFeedback","_this4","_callee4","_t4","_context4","put","post","deleteFeedback","_this5","_callee5","_t5","_context5","confirm","student_name","getStudentInitials","split","map","charAt","join","toUpperCase","getFeedbackTypeBadgeClass","classes","getPriorityBadgeClass","formatFeedbackType","slice","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","truncateText","text","substring"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\NEW\\course-mark-management\\frontend\\src\\views\\lecturer\\StudentFeedback.vue"],"sourcesContent":["<template>\r\n  <div class=\"student-feedback\">\r\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n      <h1><i class=\"fas fa-comments me-2\"></i>Student Feedback Management</h1>\r\n      <button class=\"btn btn-primary\" @click=\"showAddFeedbackModal\">\r\n        <i class=\"fas fa-plus me-2\"></i>Add Feedback\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Course Selection -->\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-body\">\r\n        <div class=\"row align-items-center\">\r\n          <div class=\"col-md-6\">\r\n            <label for=\"courseSelect\" class=\"form-label fw-bold\">Select Course:</label>\r\n            <select \r\n              id=\"courseSelect\" \r\n              class=\"form-select\" \r\n              v-model=\"selectedCourseId\" \r\n              @change=\"loadCourseFeedback\"\r\n            >\r\n              <option value=\"\">-- Select a Course --</option>\r\n              <option v-for=\"course in courses\" :key=\"course.id\" :value=\"course.id\">\r\n                {{ course.code }} - {{ course.name }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div class=\"col-md-6 text-end\">\r\n            <div class=\"badge bg-info fs-6\" v-if=\"feedbackList.length > 0\">\r\n              {{ feedbackList.length }} Feedback Records\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Feedback List -->\r\n    <div class=\"card\" v-if=\"selectedCourseId\">\r\n      <div class=\"card-header\">\r\n        <h5 class=\"mb-0\">\r\n          <i class=\"fas fa-list me-2\"></i>Student Feedback\r\n        </h5>\r\n      </div>\r\n      <div class=\"card-body p-0\">\r\n        <div v-if=\"isLoading\" class=\"text-center p-4\">\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div v-else-if=\"feedbackList.length === 0\" class=\"text-center p-4 text-muted\">\r\n          <i class=\"fas fa-comment-slash fa-3x mb-3\"></i>\r\n          <p>No feedback records found for this course.</p>\r\n          <button class=\"btn btn-primary\" @click=\"showAddFeedbackModal\">\r\n            Add First Feedback\r\n          </button>\r\n        </div>\r\n\r\n        <div v-else class=\"table-responsive\">\r\n          <table class=\"table table-hover mb-0\">\r\n            <thead class=\"table-light\">\r\n              <tr>\r\n                <th>Student</th>\r\n                <th>Type</th>\r\n                <th>Subject</th>\r\n                <th>Priority</th>\r\n                <th>Visibility</th>\r\n                <th>Date</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"feedback in feedbackList\" :key=\"feedback.id\">\r\n                <td>\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <div class=\"avatar me-3\">\r\n                      {{ getStudentInitials(feedback.student_name) }}\r\n                    </div>\r\n                    <div>\r\n                      <strong>{{ feedback.student_name }}</strong>\r\n                      <br>\r\n                      <small class=\"text-muted\">{{ feedback.matric_number }}</small>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <span class=\"badge\" :class=\"getFeedbackTypeBadgeClass(feedback.feedback_type)\">\r\n                    {{ formatFeedbackType(feedback.feedback_type) }}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <strong>{{ feedback.subject }}</strong>\r\n                  <br>\r\n                  <small class=\"text-muted\">{{ truncateText(feedback.feedback, 50) }}</small>\r\n                </td>\r\n                <td>\r\n                  <span class=\"badge\" :class=\"getPriorityBadgeClass(feedback.priority)\">\r\n                    {{ feedback.priority.toUpperCase() }}\r\n                  </span>\r\n                </td>\r\n                <td>\r\n                  <div class=\"d-flex flex-column\">\r\n                    <small :class=\"feedback.is_visible_to_student ? 'text-success' : 'text-muted'\">\r\n                      <i :class=\"feedback.is_visible_to_student ? 'fas fa-eye' : 'fas fa-eye-slash'\"></i>\r\n                      Student\r\n                    </small>\r\n                    <small :class=\"feedback.is_visible_to_advisor ? 'text-success' : 'text-muted'\">\r\n                      <i :class=\"feedback.is_visible_to_advisor ? 'fas fa-eye' : 'fas fa-eye-slash'\"></i>\r\n                      Advisor\r\n                    </small>\r\n                  </div>\r\n                </td>\r\n                <td>{{ formatDate(feedback.created_at) }}</td>\r\n                <td>\r\n                  <div class=\"btn-group btn-group-sm\">\r\n                    <button \r\n                      class=\"btn btn-outline-info\" \r\n                      @click=\"viewFeedback(feedback)\" \r\n                      title=\"View Details\"\r\n                    >\r\n                      <i class=\"fas fa-eye\"></i>\r\n                    </button>\r\n                    <button \r\n                      class=\"btn btn-outline-warning\" \r\n                      @click=\"editFeedback(feedback)\" \r\n                      title=\"Edit\"\r\n                    >\r\n                      <i class=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      class=\"btn btn-outline-danger\" \r\n                      @click=\"deleteFeedback(feedback)\" \r\n                      title=\"Delete\"\r\n                    >\r\n                      <i class=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Add/Edit Feedback Modal -->\r\n    <div class=\"modal fade\" id=\"feedbackModal\" tabindex=\"-1\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">\r\n              <i class=\"fas fa-comment-dots me-2\"></i>\r\n              {{ isEditMode ? 'Edit' : 'Add' }} Student Feedback\r\n            </h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"saveFeedback\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Student *</label>\r\n                    <select class=\"form-select\" v-model=\"feedbackForm.student_id\" required>\r\n                      <option value=\"\">-- Select Student --</option>\r\n                      <option v-for=\"student in courseStudents\" :key=\"student.id\" :value=\"student.id\">\r\n                        {{ student.name }} ({{ student.matric_number }})\r\n                      </option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Feedback Type *</label>\r\n                    <select class=\"form-select\" v-model=\"feedbackForm.feedback_type\" required>\r\n                      <option value=\"general\">General</option>\r\n                      <option value=\"performance\">Performance</option>\r\n                      <option value=\"improvement\">Improvement</option>\r\n                      <option value=\"commendation\">Commendation</option>\r\n                      <option value=\"concern\">Concern</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row\">\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Subject *</label>\r\n                    <input \r\n                      type=\"text\" \r\n                      class=\"form-control\" \r\n                      v-model=\"feedbackForm.subject\" \r\n                      placeholder=\"Brief subject line\"\r\n                      required\r\n                    >\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-4\">\r\n                  <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Priority</label>\r\n                    <select class=\"form-select\" v-model=\"feedbackForm.priority\">\r\n                      <option value=\"low\">Low</option>\r\n                      <option value=\"medium\">Medium</option>\r\n                      <option value=\"high\">High</option>\r\n                      <option value=\"urgent\">Urgent</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Feedback Content *</label>\r\n                <textarea \r\n                  class=\"form-control\" \r\n                  v-model=\"feedbackForm.feedback\" \r\n                  rows=\"5\" \r\n                  placeholder=\"Detailed feedback for the student...\"\r\n                  required\r\n                ></textarea>\r\n              </div>\r\n\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"form-check\">\r\n                    <input \r\n                      class=\"form-check-input\" \r\n                      type=\"checkbox\" \r\n                      v-model=\"feedbackForm.is_visible_to_student\" \r\n                      id=\"visibleToStudent\"\r\n                    >\r\n                    <label class=\"form-check-label\" for=\"visibleToStudent\">\r\n                      Visible to Student\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"form-check\">\r\n                    <input \r\n                      class=\"form-check-input\" \r\n                      type=\"checkbox\" \r\n                      v-model=\"feedbackForm.is_visible_to_advisor\" \r\n                      id=\"visibleToAdvisor\"\r\n                    >\r\n                    <label class=\"form-check-label\" for=\"visibleToAdvisor\">\r\n                      Visible to Advisor\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"saveFeedback\" :disabled=\"isSaving\">\r\n              <span v-if=\"isSaving\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n              {{ isEditMode ? 'Update' : 'Add' }} Feedback\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- View Feedback Modal -->\r\n    <div class=\"modal fade\" id=\"viewFeedbackModal\" tabindex=\"-1\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">\r\n              <i class=\"fas fa-comment me-2\"></i>Feedback Details\r\n            </h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n          </div>\r\n          <div class=\"modal-body\" v-if=\"selectedFeedback\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6\">\r\n                <strong>Student:</strong> {{ selectedFeedback.student_name }}\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n                <strong>Course:</strong> {{ selectedFeedback.course_code }}\r\n              </div>\r\n            </div>\r\n            <hr>\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6\">\r\n                <strong>Type:</strong> \r\n                <span class=\"badge ms-2\" :class=\"getFeedbackTypeBadgeClass(selectedFeedback.feedback_type)\">\r\n                  {{ formatFeedbackType(selectedFeedback.feedback_type) }}\r\n                </span>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n                <strong>Priority:</strong> \r\n                <span class=\"badge ms-2\" :class=\"getPriorityBadgeClass(selectedFeedback.priority)\">\r\n                  {{ selectedFeedback.priority.toUpperCase() }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <hr>\r\n            <div class=\"mb-3\">\r\n              <strong>Subject:</strong>\r\n              <p class=\"mt-2\">{{ selectedFeedback.subject }}</p>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <strong>Feedback:</strong>\r\n              <p class=\"mt-2\">{{ selectedFeedback.feedback }}</p>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6\">\r\n                <strong>Visible to Student:</strong> \r\n                <span :class=\"selectedFeedback.is_visible_to_student ? 'text-success' : 'text-muted'\">\r\n                  <i :class=\"selectedFeedback.is_visible_to_student ? 'fas fa-check' : 'fas fa-times'\"></i>\r\n                  {{ selectedFeedback.is_visible_to_student ? 'Yes' : 'No' }}\r\n                </span>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n                <strong>Visible to Advisor:</strong> \r\n                <span :class=\"selectedFeedback.is_visible_to_advisor ? 'text-success' : 'text-muted'\">\r\n                  <i :class=\"selectedFeedback.is_visible_to_advisor ? 'fas fa-check' : 'fas fa-times'\"></i>\r\n                  {{ selectedFeedback.is_visible_to_advisor ? 'Yes' : 'No' }}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <hr>\r\n            <small class=\"text-muted\">\r\n              <strong>Created:</strong> {{ formatDate(selectedFeedback.created_at) }}\r\n              <br>\r\n              <strong>Last Updated:</strong> {{ formatDate(selectedFeedback.updated_at) }}\r\n            </small>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n            <button type=\"button\" class=\"btn btn-warning\" @click=\"editFeedback(selectedFeedback)\">\r\n              <i class=\"fas fa-edit me-2\"></i>Edit\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { Modal } from 'bootstrap';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'StudentFeedback',\r\n  data() {\r\n    return {\r\n      courses: [],\r\n      selectedCourseId: '',\r\n      feedbackList: [],\r\n      courseStudents: [],\r\n      isLoading: false,\r\n      isSaving: false,\r\n      isEditMode: false,\r\n      selectedFeedback: null,\r\n      feedbackForm: {\r\n        id: null,\r\n        student_id: '',\r\n        course_id: '',\r\n        lecturer_id: '',\r\n        feedback_type: 'general',\r\n        subject: '',\r\n        feedback: '',\r\n        priority: 'medium',\r\n        is_visible_to_student: true,\r\n        is_visible_to_advisor: true\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters('auth', ['getUser'])\r\n  },\r\n  mounted() {\r\n    this.loadCourses();\r\n  },\r\n  methods: {\r\n    async loadCourses() {\r\n      console.log('Loading courses...');\r\n      console.log('User data:', this.getUser);\r\n      \r\n      try {\r\n        const userId = this.getUser?.id;\r\n        if (!userId) {\r\n          console.error('No user ID found. User data:', this.getUser);\r\n          this.$store.dispatch('showToast', {\r\n            message: 'Please login first',\r\n            type: 'warning'\r\n          });\r\n          return;\r\n        }\r\n\r\n        console.log('Making API call with lecturer_id:', userId);\r\n        const response = await axios.get(`/api/courses/lecturer/${userId}`);\r\n        console.log('API response:', response.data);\r\n        \r\n        this.courses = response.data || [];\r\n        console.log('Courses loaded:', this.courses.length);\r\n      } catch (error) {\r\n        console.error('Error loading courses:', error);\r\n        console.error('Error response:', error.response?.data);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error loading courses',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n\r\n    async loadCourseFeedback() {\r\n      if (!this.selectedCourseId) {\r\n        this.feedbackList = [];\r\n        return;\r\n      }\r\n\r\n      this.isLoading = true;\r\n      try {\r\n        const lecturerId = this.getUser?.id;\r\n        const response = await axios.get(`/api/feedback/lecturer/${lecturerId}/course/${this.selectedCourseId}`);\r\n        this.feedbackList = response.data || [];\r\n        \r\n        // Also load students for this course\r\n        await this.loadCourseStudents();\r\n      } catch (error) {\r\n        console.error('Error loading feedback:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error loading feedback',\r\n          type: 'error'\r\n        });\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    async loadCourseStudents() {\r\n      try {\r\n        const response = await axios.get(`/api/courses/${this.selectedCourseId}/students`);\r\n        this.courseStudents = response.data || [];\r\n      } catch (error) {\r\n        console.error('Error loading students:', error);\r\n      }\r\n    },\r\n\r\n    showAddFeedbackModal() {\r\n      if (!this.selectedCourseId) {\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Please select a course first',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }\r\n\r\n      this.isEditMode = false;\r\n      this.resetFeedbackForm();\r\n      this.feedbackForm.course_id = this.selectedCourseId;\r\n      this.feedbackForm.lecturer_id = this.getUser?.id;\r\n      \r\n      const modal = new Modal(document.getElementById('feedbackModal'));\r\n      modal.show();\r\n    },\r\n\r\n    editFeedback(feedback) {\r\n      this.isEditMode = true;\r\n      this.feedbackForm = { ...feedback };\r\n      \r\n      // Close view modal if open\r\n      const viewModal = Modal.getInstance(document.getElementById('viewFeedbackModal'));\r\n      if (viewModal) {\r\n        viewModal.hide();\r\n      }\r\n      \r\n      // Show edit modal\r\n      const modal = new Modal(document.getElementById('feedbackModal'));\r\n      modal.show();\r\n    },\r\n\r\n    viewFeedback(feedback) {\r\n      this.selectedFeedback = feedback;\r\n      const modal = new Modal(document.getElementById('viewFeedbackModal'));\r\n      modal.show();\r\n    },\r\n\r\n    async saveFeedback() {\r\n      this.isSaving = true;\r\n      try {\r\n        await (this.isEditMode \r\n          ? axios.put(`/api/feedback/${this.feedbackForm.id}`, this.feedbackForm)\r\n          : axios.post('/api/feedback', this.feedbackForm));\r\n\r\n        this.$store.dispatch('showToast', {\r\n          message: this.isEditMode ? 'Feedback updated successfully' : 'Feedback added successfully',\r\n          type: 'success'\r\n        });\r\n        \r\n        // Hide modal\r\n        const modal = Modal.getInstance(document.getElementById('feedbackModal'));\r\n        modal.hide();\r\n        \r\n        // Reload feedback list\r\n        await this.loadCourseFeedback();\r\n      } catch (error) {\r\n        console.error('Error saving feedback:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error saving feedback',\r\n          type: 'error'\r\n        });\r\n      } finally {\r\n        this.isSaving = false;\r\n      }\r\n    },\r\n\r\n    async deleteFeedback(feedback) {\r\n      if (!confirm(`Are you sure you want to delete this feedback for ${feedback.student_name}?`)) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await axios.delete(`/api/feedback/${feedback.id}`);\r\n        \r\n        this.$store.dispatch('showToast', {\r\n          message: 'Feedback deleted successfully',\r\n          type: 'success'\r\n        });\r\n        \r\n        await this.loadCourseFeedback();\r\n      } catch (error) {\r\n        console.error('Error deleting feedback:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error deleting feedback',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n\r\n    resetFeedbackForm() {\r\n      this.feedbackForm = {\r\n        id: null,\r\n        student_id: '',\r\n        course_id: '',\r\n        lecturer_id: '',\r\n        feedback_type: 'general',\r\n        subject: '',\r\n        feedback: '',\r\n        priority: 'medium',\r\n        is_visible_to_student: true,\r\n        is_visible_to_advisor: true\r\n      };\r\n    },\r\n\r\n    getStudentInitials(name) {\r\n      return name.split(' ').map(n => n.charAt(0)).join('').toUpperCase();\r\n    },\r\n\r\n    getFeedbackTypeBadgeClass(type) {\r\n      const classes = {\r\n        'general': 'bg-secondary',\r\n        'performance': 'bg-success',\r\n        'improvement': 'bg-warning text-dark',\r\n        'commendation': 'bg-info',\r\n        'concern': 'bg-danger'\r\n      };\r\n      return classes[type] || 'bg-secondary';\r\n    },\r\n\r\n    getPriorityBadgeClass(priority) {\r\n      const classes = {\r\n        'low': 'bg-light text-dark',\r\n        'medium': 'bg-info',\r\n        'high': 'bg-warning text-dark',\r\n        'urgent': 'bg-danger'\r\n      };\r\n      return classes[priority] || 'bg-info';\r\n    },\r\n\r\n    formatFeedbackType(type) {\r\n      return type.charAt(0).toUpperCase() + type.slice(1);\r\n    },\r\n\r\n    formatDate(dateString) {\r\n      return new Date(dateString).toLocaleDateString('en-US', {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    },\r\n\r\n    truncateText(text, length) {\r\n      return text.length > length ? text.substring(0, length) + '...' : text;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.student-feedback h1 {\r\n  color: #2c3e50;\r\n  font-weight: 700;\r\n}\r\n\r\n.avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: linear-gradient(45deg, #007bff, #0056b3);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.card {\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  border: none;\r\n  border-radius: 10px;\r\n}\r\n\r\n.table th {\r\n  font-weight: 600;\r\n  border-top: none;\r\n}\r\n\r\n.table td {\r\n  vertical-align: middle;\r\n}\r\n\r\n.btn-group-sm .btn {\r\n  padding: 0.25rem 0.5rem;\r\n}\r\n\r\n.modal-body textarea {\r\n  resize: vertical;\r\n  min-height: 120px;\r\n}\r\n\r\n.badge {\r\n  font-size: 0.75rem;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}