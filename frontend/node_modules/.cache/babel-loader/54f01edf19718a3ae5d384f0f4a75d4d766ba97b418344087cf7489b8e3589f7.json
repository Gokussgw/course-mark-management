{"ast":null,"code":"import \"core-js/modules/es.number.to-fixed.js\";\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"system-health\"\n};\nvar _hoisted_2 = {\n  \"class\": \"card mb-4\"\n};\nvar _hoisted_3 = {\n  \"class\": \"card-header d-flex justify-content-between align-items-center\"\n};\nvar _hoisted_4 = [\"disabled\"];\nvar _hoisted_5 = [\"disabled\"];\nvar _hoisted_6 = {\n  \"class\": \"card-body\"\n};\nvar _hoisted_7 = {\n  key: 0,\n  \"class\": \"text-center my-3\"\n};\nvar _hoisted_8 = {\n  key: 1,\n  \"class\": \"row\"\n};\nvar _hoisted_9 = {\n  \"class\": \"col-md-6 mb-4\"\n};\nvar _hoisted_10 = {\n  \"class\": \"d-flex align-items-center\"\n};\nvar _hoisted_11 = {\n  \"class\": \"mb-0 text-capitalize\"\n};\nvar _hoisted_12 = {\n  \"class\": \"mb-0\"\n};\nvar _hoisted_13 = {\n  \"class\": \"col-md-6 mb-4\"\n};\nvar _hoisted_14 = {\n  \"class\": \"d-flex align-items-center\"\n};\nvar _hoisted_15 = {\n  \"class\": \"mb-0 text-capitalize\"\n};\nvar _hoisted_16 = {\n  \"class\": \"mb-0\"\n};\nvar _hoisted_17 = {\n  \"class\": \"mb-0\"\n};\nvar _hoisted_18 = {\n  \"class\": \"col-md-6 mb-4\"\n};\nvar _hoisted_19 = {\n  \"class\": \"health-status-box\"\n};\nvar _hoisted_20 = {\n  \"class\": \"mb-2\"\n};\nvar _hoisted_21 = {\n  \"class\": \"progress\",\n  style: {\n    \"height\": \"10px\"\n  }\n};\nvar _hoisted_22 = [\"aria-valuenow\"];\nvar _hoisted_23 = {\n  \"class\": \"d-flex justify-content-between\"\n};\nvar _hoisted_24 = {\n  \"class\": \"col-md-6 mb-4\"\n};\nvar _hoisted_25 = {\n  \"class\": \"health-status-box\"\n};\nvar _hoisted_26 = {\n  \"class\": \"mb-1\"\n};\nvar _hoisted_27 = {\n  \"class\": \"mb-1\"\n};\nvar _hoisted_28 = {\n  \"class\": \"mb-1\"\n};\nvar _hoisted_29 = {\n  key: 0,\n  \"class\": \"mb-0\"\n};\nvar _hoisted_30 = {\n  \"class\": \"col-12\"\n};\nvar _hoisted_31 = {\n  \"class\": \"d-flex justify-content-between align-items-center\"\n};\nvar _hoisted_32 = {\n  key: 0\n};\nvar _hoisted_33 = {\n  key: 1\n};\nvar _hoisted_34 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _$data$healthData$dat, _$data$healthData$dat2, _$data$healthData$dat3, _$data$healthData$dat4, _$data$healthData$dat5, _$data$healthData$dat6, _$data$healthData$sys, _$data$healthData$sys2, _$data$healthData$sys3, _$data$healthData$sys4, _$data$healthData$sys5, _$data$healthData$sys6, _$data$healthData$sys7, _$data$healthData$sys8;\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"h5\", {\n    \"class\": \"mb-0\"\n  }, \"System Health\", -1 /* CACHED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    \"class\": \"btn btn-outline-primary btn-sm me-2\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.refreshHealth && $options.refreshHealth.apply($options, arguments);\n    }),\n    disabled: $data.loading\n  }, [_createElementVNode(\"i\", {\n    \"class\": _normalizeClass([\"bi bi-arrow-clockwise\", {\n      'spin': $data.loading\n    }])\n  }, null, 2 /* CLASS */), _cache[3] || (_cache[3] = _createTextVNode(\" Refresh \"))], 8 /* PROPS */, _hoisted_4), _createElementVNode(\"button\", {\n    \"class\": \"btn btn-outline-success btn-sm\",\n    onClick: _cache[1] || (_cache[1] = function () {\n      return $options.initiateBackup && $options.initiateBackup.apply($options, arguments);\n    }),\n    disabled: $data.backupInProgress\n  }, _cache[4] || (_cache[4] = [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-cloud-arrow-up\"\n  }, null, -1 /* CACHED */), _createTextVNode(\" Backup Now \")]), 8 /* PROPS */, _hoisted_5)])]), _createElementVNode(\"div\", _hoisted_6, [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _cache[6] || (_cache[6] = [_createElementVNode(\"div\", {\n    \"class\": \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"visually-hidden\"\n  }, \"Loading...\")], -1 /* CACHED */)]))) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createCommentVNode(\" Overall Status \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"health-status-box\", $options.getStatusClass($data.healthData.status)])\n  }, [_cache[7] || (_cache[7] = _createElementVNode(\"h5\", null, \"Overall Status\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"status-indicator me-3\", $options.getStatusClass($data.healthData.status)])\n  }, [_createElementVNode(\"i\", {\n    \"class\": _normalizeClass($options.getStatusIcon($data.healthData.status))\n  }, null, 2 /* CLASS */)], 2 /* CLASS */), _createElementVNode(\"div\", null, [_createElementVNode(\"h3\", _hoisted_11, _toDisplayString($data.healthData.status || 'Unknown'), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_12, \"Last checked: \" + _toDisplayString($options.formatDate($data.healthData.timestamp)), 1 /* TEXT */)])])], 2 /* CLASS */)]), _createCommentVNode(\" Database Status \"), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"health-status-box\", $options.getStatusClass(((_$data$healthData$dat = $data.healthData.database) === null || _$data$healthData$dat === void 0 ? void 0 : _$data$healthData$dat.status) === 'online' ? 'ok' : 'critical')])\n  }, [_cache[8] || (_cache[8] = _createElementVNode(\"h5\", null, \"Database Status\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"status-indicator me-3\", $options.getStatusClass(((_$data$healthData$dat2 = $data.healthData.database) === null || _$data$healthData$dat2 === void 0 ? void 0 : _$data$healthData$dat2.status) === 'online' ? 'ok' : 'critical')])\n  }, [_createElementVNode(\"i\", {\n    \"class\": _normalizeClass($options.getStatusIcon(((_$data$healthData$dat3 = $data.healthData.database) === null || _$data$healthData$dat3 === void 0 ? void 0 : _$data$healthData$dat3.status) === 'online' ? 'ok' : 'critical'))\n  }, null, 2 /* CLASS */)], 2 /* CLASS */), _createElementVNode(\"div\", null, [_createElementVNode(\"h3\", _hoisted_15, _toDisplayString(((_$data$healthData$dat4 = $data.healthData.database) === null || _$data$healthData$dat4 === void 0 ? void 0 : _$data$healthData$dat4.status) || 'Unknown'), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_16, \"Response time: \" + _toDisplayString(((_$data$healthData$dat5 = $data.healthData.database) === null || _$data$healthData$dat5 === void 0 ? void 0 : _$data$healthData$dat5.responseTime) || 0) + \"ms\", 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_17, _toDisplayString((_$data$healthData$dat6 = $data.healthData.database) === null || _$data$healthData$dat6 === void 0 ? void 0 : _$data$healthData$dat6.version), 1 /* TEXT */)])])], 2 /* CLASS */)]), _createCommentVNode(\" Disk Usage \"), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, [_cache[9] || (_cache[9] = _createElementVNode(\"h5\", null, \"Disk Usage\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"progress-bar\", $options.getDiskUsageClass()]),\n    role: \"progressbar\",\n    style: _normalizeStyle({\n      width: \"\".concat(((_$data$healthData$sys = $data.healthData.system) === null || _$data$healthData$sys === void 0 || (_$data$healthData$sys = _$data$healthData$sys.diskUsage) === null || _$data$healthData$sys === void 0 ? void 0 : _$data$healthData$sys.usedPercent) || 0, \"%\")\n    }),\n    \"aria-valuenow\": ((_$data$healthData$sys2 = $data.healthData.system) === null || _$data$healthData$sys2 === void 0 || (_$data$healthData$sys2 = _$data$healthData$sys2.diskUsage) === null || _$data$healthData$sys2 === void 0 ? void 0 : _$data$healthData$sys2.usedPercent) || 0,\n    \"aria-valuemin\": \"0\",\n    \"aria-valuemax\": \"100\"\n  }, null, 14 /* CLASS, STYLE, PROPS */, _hoisted_22)])]), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"small\", null, _toDisplayString($options.formatBytes(((_$data$healthData$sys3 = $data.healthData.system) === null || _$data$healthData$sys3 === void 0 || (_$data$healthData$sys3 = _$data$healthData$sys3.diskUsage) === null || _$data$healthData$sys3 === void 0 ? void 0 : _$data$healthData$sys3.free) || 0)) + \" free\", 1 /* TEXT */), _createElementVNode(\"small\", null, _toDisplayString(((_$data$healthData$sys4 = $data.healthData.system) === null || _$data$healthData$sys4 === void 0 || (_$data$healthData$sys4 = _$data$healthData$sys4.diskUsage) === null || _$data$healthData$sys4 === void 0 ? void 0 : _$data$healthData$sys4.usedPercent) || 0) + \"% used\", 1 /* TEXT */), _createElementVNode(\"small\", null, _toDisplayString($options.formatBytes(((_$data$healthData$sys5 = $data.healthData.system) === null || _$data$healthData$sys5 === void 0 || (_$data$healthData$sys5 = _$data$healthData$sys5.diskUsage) === null || _$data$healthData$sys5 === void 0 ? void 0 : _$data$healthData$sys5.total) || 0)) + \" total\", 1 /* TEXT */)])])]), _createCommentVNode(\" PHP Info \"), _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"div\", _hoisted_25, [_cache[14] || (_cache[14] = _createElementVNode(\"h5\", null, \"PHP Info\", -1 /* CACHED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_26, [_cache[10] || (_cache[10] = _createElementVNode(\"strong\", null, \"Version:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(((_$data$healthData$sys6 = $data.healthData.system) === null || _$data$healthData$sys6 === void 0 ? void 0 : _$data$healthData$sys6.phpVersion) || 'Unknown'), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_27, [_cache[11] || (_cache[11] = _createElementVNode(\"strong\", null, \"Memory Limit:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(((_$data$healthData$sys7 = $data.healthData.system) === null || _$data$healthData$sys7 === void 0 ? void 0 : _$data$healthData$sys7.memoryLimit) || 'Unknown'), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_28, [_cache[12] || (_cache[12] = _createElementVNode(\"strong\", null, \"Max Execution Time:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString(((_$data$healthData$sys8 = $data.healthData.system) === null || _$data$healthData$sys8 === void 0 ? void 0 : _$data$healthData$sys8.maxExecutionTime) || 'Unknown') + \"s\", 1 /* TEXT */)]), $data.healthData.load && $data.healthData.load.length ? (_openBlock(), _createElementBlock(\"p\", _hoisted_29, [_cache[13] || (_cache[13] = _createElementVNode(\"strong\", null, \"Load Average:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.healthData.load[0].toFixed(2)) + \" (1m), \" + _toDisplayString($data.healthData.load[1].toFixed(2)) + \" (5m), \" + _toDisplayString($data.healthData.load[2].toFixed(2)) + \" (15m) \", 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])])]), _createCommentVNode(\" Last Backup \"), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"alert\", $options.getBackupAlertClass()])\n  }, [_createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"div\", null, [_cache[15] || (_cache[15] = _createElementVNode(\"strong\", null, \"Last Database Backup:\", -1 /* CACHED */)), $data.healthData.lastBackup ? (_openBlock(), _createElementBlock(\"span\", _hoisted_32, _toDisplayString($options.formatDate($data.healthData.lastBackup)), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_33, \"No recent backups found\"))]), _createElementVNode(\"button\", {\n    \"class\": _normalizeClass([\"btn btn-sm\", $options.getBackupButtonClass()]),\n    onClick: _cache[2] || (_cache[2] = function () {\n      return $options.initiateBackup && $options.initiateBackup.apply($options, arguments);\n    }),\n    disabled: $data.backupInProgress\n  }, [_cache[16] || (_cache[16] = _createElementVNode(\"i\", {\n    \"class\": \"bi bi-cloud-arrow-up me-1\"\n  }, null, -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.backupInProgress ? 'Backing up...' : 'Backup Now'), 1 /* TEXT */)], 10 /* CLASS, PROPS */, _hoisted_34)])], 2 /* CLASS */)])]))])])]);\n}","map":{"version":3,"names":["style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$options","refreshHealth","apply","arguments","disabled","$data","loading","_normalizeClass","initiateBackup","backupInProgress","_hoisted_6","_hoisted_7","role","_hoisted_8","_createCommentVNode","_hoisted_9","getStatusClass","healthData","status","_hoisted_10","getStatusIcon","_hoisted_11","_toDisplayString","_hoisted_12","formatDate","timestamp","_hoisted_13","_$data$healthData$dat","database","_hoisted_14","_$data$healthData$dat2","_$data$healthData$dat3","_hoisted_15","_$data$healthData$dat4","_hoisted_16","_$data$healthData$dat5","responseTime","_hoisted_17","_$data$healthData$dat6","version","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","getDiskUsageClass","_normalizeStyle","width","concat","_$data$healthData$sys","system","diskUsage","usedPercent","_$data$healthData$sys2","_hoisted_23","formatBytes","_$data$healthData$sys3","free","_$data$healthData$sys4","_$data$healthData$sys5","total","_hoisted_24","_hoisted_25","_hoisted_26","_$data$healthData$sys6","phpVersion","_hoisted_27","_$data$healthData$sys7","memoryLimit","_hoisted_28","_$data$healthData$sys8","maxExecutionTime","load","length","_hoisted_29","toFixed","_hoisted_30","getBackupAlertClass","_hoisted_31","lastBackup","_hoisted_32","_hoisted_33","getBackupButtonClass"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\course-mark-management\\frontend\\src\\components\\admin\\SystemHealthMonitor.vue"],"sourcesContent":["<template>\r\n  <div class=\"system-health\">\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n        <h5 class=\"mb-0\">System Health</h5>\r\n        <div>\r\n          <button \r\n            class=\"btn btn-outline-primary btn-sm me-2\" \r\n            @click=\"refreshHealth\"\r\n            :disabled=\"loading\"\r\n          >\r\n            <i class=\"bi bi-arrow-clockwise\" :class=\"{'spin': loading}\"></i>\r\n            Refresh\r\n          </button>\r\n          <button \r\n            class=\"btn btn-outline-success btn-sm\" \r\n            @click=\"initiateBackup\"\r\n            :disabled=\"backupInProgress\"\r\n          >\r\n            <i class=\"bi bi-cloud-arrow-up\"></i>\r\n            Backup Now\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div v-if=\"loading\" class=\"text-center my-3\">\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div v-else class=\"row\">\r\n          <!-- Overall Status -->\r\n          <div class=\"col-md-6 mb-4\">\r\n            <div class=\"health-status-box\" :class=\"getStatusClass(healthData.status)\">\r\n              <h5>Overall Status</h5>\r\n              <div class=\"d-flex align-items-center\">\r\n                <div class=\"status-indicator me-3\" :class=\"getStatusClass(healthData.status)\">\r\n                  <i :class=\"getStatusIcon(healthData.status)\"></i>\r\n                </div>\r\n                <div>\r\n                  <h3 class=\"mb-0 text-capitalize\">{{ healthData.status || 'Unknown' }}</h3>\r\n                  <p class=\"mb-0\">Last checked: {{ formatDate(healthData.timestamp) }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Database Status -->\r\n          <div class=\"col-md-6 mb-4\">\r\n            <div class=\"health-status-box\" :class=\"getStatusClass(healthData.database?.status === 'online' ? 'ok' : 'critical')\">\r\n              <h5>Database Status</h5>\r\n              <div class=\"d-flex align-items-center\">\r\n                <div class=\"status-indicator me-3\" :class=\"getStatusClass(healthData.database?.status === 'online' ? 'ok' : 'critical')\">\r\n                  <i :class=\"getStatusIcon(healthData.database?.status === 'online' ? 'ok' : 'critical')\"></i>\r\n                </div>\r\n                <div>\r\n                  <h3 class=\"mb-0 text-capitalize\">{{ healthData.database?.status || 'Unknown' }}</h3>\r\n                  <p class=\"mb-0\">Response time: {{ healthData.database?.responseTime || 0 }}ms</p>\r\n                  <p class=\"mb-0\">{{ healthData.database?.version }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Disk Usage -->\r\n          <div class=\"col-md-6 mb-4\">\r\n            <div class=\"health-status-box\">\r\n              <h5>Disk Usage</h5>\r\n              <div class=\"mb-2\">\r\n                <div class=\"progress\" style=\"height: 10px;\">\r\n                  <div \r\n                    class=\"progress-bar\" \r\n                    :class=\"getDiskUsageClass()\"\r\n                    role=\"progressbar\" \r\n                    :style=\"{ width: `${healthData.system?.diskUsage?.usedPercent || 0}%` }\"\r\n                    :aria-valuenow=\"healthData.system?.diskUsage?.usedPercent || 0\" \r\n                    aria-valuemin=\"0\" \r\n                    aria-valuemax=\"100\"\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex justify-content-between\">\r\n                <small>{{ formatBytes(healthData.system?.diskUsage?.free || 0) }} free</small>\r\n                <small>{{ healthData.system?.diskUsage?.usedPercent || 0 }}% used</small>\r\n                <small>{{ formatBytes(healthData.system?.diskUsage?.total || 0) }} total</small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- PHP Info -->\r\n          <div class=\"col-md-6 mb-4\">\r\n            <div class=\"health-status-box\">\r\n              <h5>PHP Info</h5>\r\n              <div>\r\n                <p class=\"mb-1\"><strong>Version:</strong> {{ healthData.system?.phpVersion || 'Unknown' }}</p>\r\n                <p class=\"mb-1\"><strong>Memory Limit:</strong> {{ healthData.system?.memoryLimit || 'Unknown' }}</p>\r\n                <p class=\"mb-1\"><strong>Max Execution Time:</strong> {{ healthData.system?.maxExecutionTime || 'Unknown' }}s</p>\r\n                <p v-if=\"healthData.load && healthData.load.length\" class=\"mb-0\">\r\n                  <strong>Load Average:</strong> \r\n                  {{ healthData.load[0].toFixed(2) }} (1m), \r\n                  {{ healthData.load[1].toFixed(2) }} (5m), \r\n                  {{ healthData.load[2].toFixed(2) }} (15m)\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Last Backup -->\r\n          <div class=\"col-12\">\r\n            <div class=\"alert\" :class=\"getBackupAlertClass()\">\r\n              <div class=\"d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <strong>Last Database Backup:</strong> \r\n                  <span v-if=\"healthData.lastBackup\">{{ formatDate(healthData.lastBackup) }}</span>\r\n                  <span v-else>No recent backups found</span>\r\n                </div>\r\n                <button \r\n                  class=\"btn btn-sm\" \r\n                  :class=\"getBackupButtonClass()\" \r\n                  @click=\"initiateBackup\"\r\n                  :disabled=\"backupInProgress\"\r\n                >\r\n                  <i class=\"bi bi-cloud-arrow-up me-1\"></i>\r\n                  {{ backupInProgress ? 'Backing up...' : 'Backup Now' }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'SystemHealthMonitor',\r\n  data() {\r\n    return {\r\n      healthData: {},\r\n      loading: true,\r\n      error: null,\r\n      backupInProgress: false,\r\n      refreshInterval: null\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchHealthData();\r\n    \r\n    // Refresh every 5 minutes\r\n    this.refreshInterval = setInterval(() => {\r\n      this.fetchHealthData();\r\n    }, 300000); // 5 minutes\r\n  },\r\n  beforeUnmount() {\r\n    // Clear the interval when component is destroyed\r\n    if (this.refreshInterval) {\r\n      clearInterval(this.refreshInterval);\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchHealthData() {\r\n      this.loading = true;\r\n      try {\r\n        const response = await axios.get(`${process.env.VUE_APP_API_URL}/api/admin/system/health`, {\r\n          headers: {\r\n            Authorization: `Bearer ${this.$store.getters['auth/token']}`\r\n          }\r\n        });\r\n        \r\n        this.healthData = response.data;\r\n      } catch (error) {\r\n        console.error('Failed to fetch system health data:', error);\r\n        this.$store.dispatch('notification/add', {\r\n          type: 'danger',\r\n          message: 'Failed to load system health information'\r\n        });\r\n        this.error = error;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async initiateBackup() {\r\n      this.backupInProgress = true;\r\n      try {\r\n        await axios.post(`${process.env.VUE_APP_API_URL}/api/admin/system/backup`, {}, {\r\n          headers: {\r\n            Authorization: `Bearer ${this.$store.getters['auth/token']}`\r\n          }\r\n        });\r\n        \r\n        this.$store.dispatch('notification/add', {\r\n          type: 'success',\r\n          message: 'Database backup initiated successfully'\r\n        });\r\n        \r\n        // Update health data after backup\r\n        this.fetchHealthData();\r\n      } catch (error) {\r\n        console.error('Failed to initiate backup:', error);\r\n        this.$store.dispatch('notification/add', {\r\n          type: 'danger',\r\n          message: 'Failed to initiate database backup'\r\n        });\r\n      } finally {\r\n        this.backupInProgress = false;\r\n      }\r\n    },\r\n    refreshHealth() {\r\n      this.fetchHealthData();\r\n    },\r\n    getStatusClass(status) {\r\n      if (!status) return 'status-unknown';\r\n      \r\n      switch (status.toLowerCase()) {\r\n        case 'ok':\r\n          return 'status-ok';\r\n        case 'warning':\r\n          return 'status-warning';\r\n        case 'critical':\r\n          return 'status-critical';\r\n        default:\r\n          return 'status-unknown';\r\n      }\r\n    },\r\n    getStatusIcon(status) {\r\n      if (!status) return 'bi bi-question-circle-fill';\r\n      \r\n      switch (status.toLowerCase()) {\r\n        case 'ok':\r\n          return 'bi bi-check-circle-fill';\r\n        case 'warning':\r\n          return 'bi bi-exclamation-triangle-fill';\r\n        case 'critical':\r\n          return 'bi bi-exclamation-circle-fill';\r\n        default:\r\n          return 'bi bi-question-circle-fill';\r\n      }\r\n    },\r\n    getDiskUsageClass() {\r\n      const usedPercent = this.healthData.system?.diskUsage?.usedPercent || 0;\r\n      \r\n      if (usedPercent > 90) {\r\n        return 'bg-danger';\r\n      } else if (usedPercent > 80) {\r\n        return 'bg-warning';\r\n      } else if (usedPercent > 70) {\r\n        return 'bg-info';\r\n      } else {\r\n        return 'bg-success';\r\n      }\r\n    },\r\n    getBackupAlertClass() {\r\n      if (!this.healthData.lastBackup) {\r\n        return 'alert-danger';\r\n      }\r\n      \r\n      // Check if last backup was more than 24 hours ago\r\n      const lastBackup = new Date(this.healthData.lastBackup);\r\n      const now = new Date();\r\n      const diffHours = (now - lastBackup) / (1000 * 60 * 60);\r\n      \r\n      if (diffHours > 72) {\r\n        return 'alert-danger';\r\n      } else if (diffHours > 24) {\r\n        return 'alert-warning';\r\n      } else {\r\n        return 'alert-success';\r\n      }\r\n    },\r\n    getBackupButtonClass() {\r\n      if (this.backupInProgress) {\r\n        return 'btn-secondary';\r\n      }\r\n      \r\n      if (!this.healthData.lastBackup) {\r\n        return 'btn-danger';\r\n      }\r\n      \r\n      // Check if last backup was more than 24 hours ago\r\n      const lastBackup = new Date(this.healthData.lastBackup);\r\n      const now = new Date();\r\n      const diffHours = (now - lastBackup) / (1000 * 60 * 60);\r\n      \r\n      if (diffHours > 72) {\r\n        return 'btn-danger';\r\n      } else if (diffHours > 24) {\r\n        return 'btn-warning';\r\n      } else {\r\n        return 'btn-success';\r\n      }\r\n    },\r\n    formatBytes(bytes) {\r\n      if (bytes === 0) return '0 Bytes';\r\n      \r\n      const k = 1024;\r\n      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n      \r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    },\r\n    formatDate(dateString, includeTime = false) {\r\n      if (!dateString) return 'N/A';\r\n      \r\n      const date = new Date(dateString);\r\n      \r\n      if (includeTime) {\r\n        return new Intl.DateTimeFormat('en-GB', {\r\n          year: 'numeric',\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        }).format(date);\r\n      }\r\n      \r\n      return new Intl.DateTimeFormat('en-GB', {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric'\r\n      }).format(date);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.health-status-box {\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 0.5rem;\r\n  padding: 1rem;\r\n  background-color: #f8f9fa;\r\n  height: 100%;\r\n}\r\n\r\n.status-indicator {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5rem;\r\n  color: white;\r\n}\r\n\r\n.status-ok {\r\n  background-color: #28a745;\r\n  border-color: #28a745;\r\n  color: white;\r\n}\r\n\r\n.status-warning {\r\n  background-color: #ffc107;\r\n  border-color: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.status-critical {\r\n  background-color: #dc3545;\r\n  border-color: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.status-unknown {\r\n  background-color: #6c757d;\r\n  border-color: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.spin {\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}