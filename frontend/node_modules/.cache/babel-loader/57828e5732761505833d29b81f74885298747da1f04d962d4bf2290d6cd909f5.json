{"ast":null,"code":"import _toConsumableArray from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"system-logs\"\n};\nvar _hoisted_2 = {\n  \"class\": \"card mb-4\"\n};\nvar _hoisted_3 = {\n  \"class\": \"card-header d-flex justify-content-between align-items-center\"\n};\nvar _hoisted_4 = {\n  \"class\": \"card-body\"\n};\nvar _hoisted_5 = {\n  \"class\": \"mb-3 d-flex flex-wrap justify-content-between align-items-center\"\n};\nvar _hoisted_6 = {\n  \"class\": \"d-flex mb-2 mb-md-0\"\n};\nvar _hoisted_7 = {\n  \"class\": \"input-group me-2\",\n  style: {\n    \"max-width\": \"300px\"\n  }\n};\nvar _hoisted_8 = {\n  \"class\": \"d-flex\"\n};\nvar _hoisted_9 = {\n  \"class\": \"input-group me-2\",\n  style: {\n    \"max-width\": \"200px\"\n  }\n};\nvar _hoisted_10 = {\n  \"class\": \"input-group\",\n  style: {\n    \"max-width\": \"200px\"\n  }\n};\nvar _hoisted_11 = {\n  key: 0,\n  \"class\": \"d-flex justify-content-center my-5\"\n};\nvar _hoisted_12 = {\n  key: 1,\n  \"class\": \"alert alert-info\"\n};\nvar _hoisted_13 = {\n  key: 2,\n  \"class\": \"table-responsive\"\n};\nvar _hoisted_14 = {\n  \"class\": \"table table-striped\"\n};\nvar _hoisted_15 = {\n  key: 0\n};\nvar _hoisted_16 = {\n  \"class\": \"text-muted\"\n};\nvar _hoisted_17 = {\n  key: 1,\n  \"class\": \"text-muted\"\n};\nvar _hoisted_18 = [\"onClick\"];\nvar _hoisted_19 = {\n  \"class\": \"d-flex justify-content-between align-items-center mt-3\"\n};\nvar _hoisted_20 = [\"disabled\"];\nvar _hoisted_21 = {\n  \"class\": \"mx-2\"\n};\nvar _hoisted_22 = [\"disabled\"];\nvar _hoisted_23 = {\n  \"class\": \"modal fade\",\n  id: \"logDetailModal\",\n  tabindex: \"-1\",\n  ref: \"logDetailModal\"\n};\nvar _hoisted_24 = {\n  \"class\": \"modal-dialog\"\n};\nvar _hoisted_25 = {\n  \"class\": \"modal-content\"\n};\nvar _hoisted_26 = {\n  \"class\": \"modal-body\"\n};\nvar _hoisted_27 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[28] || (_cache[28] = _createElementVNode(\"h1\", null, \"System Logs\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[10] || (_cache[10] = _createElementVNode(\"h5\", {\n    \"class\": \"mb-0\"\n  }, \"Activity Logs\", -1 /* CACHED */)), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    \"class\": \"btn btn-outline-secondary me-2\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.refreshLogs && $options.refreshLogs.apply($options, arguments);\n    })\n  }, _cache[8] || (_cache[8] = [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-arrow-clockwise\"\n  }, null, -1 /* CACHED */), _createTextVNode(\" Refresh \")])), _createElementVNode(\"button\", {\n    \"class\": \"btn btn-success\",\n    onClick: _cache[1] || (_cache[1] = function () {\n      return $options.exportLogsCSV && $options.exportLogsCSV.apply($options, arguments);\n    })\n  }, _cache[9] || (_cache[9] = [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-download\"\n  }, null, -1 /* CACHED */), _createTextVNode(\" Export CSV \")]))])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createCommentVNode(\" Search and filter controls \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_cache[11] || (_cache[11] = _createElementVNode(\"span\", {\n    \"class\": \"input-group-text\"\n  }, [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-search\"\n  })], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"class\": \"form-control\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $data.searchQuery = $event;\n    }),\n    placeholder: \"Search logs...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.searchQuery]])]), _withDirectives(_createElementVNode(\"select\", {\n    \"class\": \"form-select me-2\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $data.actionFilter = $event;\n    }),\n    style: {\n      \"max-width\": \"200px\"\n    }\n  }, _cache[12] || (_cache[12] = [_createStaticVNode(\"<option value=\\\"\\\" data-v-161a8c78>All Actions</option><option value=\\\"login\\\" data-v-161a8c78>Login</option><option value=\\\"logout\\\" data-v-161a8c78>Logout</option><option value=\\\"create\\\" data-v-161a8c78>Create</option><option value=\\\"update\\\" data-v-161a8c78>Update</option><option value=\\\"delete\\\" data-v-161a8c78>Delete</option><option value=\\\"import\\\" data-v-161a8c78>Import</option><option value=\\\"export\\\" data-v-161a8c78>Export</option>\", 8)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.actionFilter]])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[13] || (_cache[13] = _createElementVNode(\"span\", {\n    \"class\": \"input-group-text\"\n  }, \"From\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"class\": \"form-control\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n      return $data.dateFrom = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.dateFrom]])]), _createElementVNode(\"div\", _hoisted_10, [_cache[14] || (_cache[14] = _createElementVNode(\"span\", {\n    \"class\": \"input-group-text\"\n  }, \"To\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"class\": \"form-control\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n      return $data.dateTo = $event;\n    })\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.dateTo]])])])]), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _cache[15] || (_cache[15] = [_createElementVNode(\"div\", {\n    \"class\": \"spinner-border text-primary\",\n    role: \"status\"\n  }, [_createElementVNode(\"span\", {\n    \"class\": \"visually-hidden\"\n  }, \"Loading...\")], -1 /* CACHED */)]))) : $data.logs.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \" No logs found matching your criteria. \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"table\", _hoisted_14, [_cache[18] || (_cache[18] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Time\"), _createElementVNode(\"th\", null, \"User\"), _createElementVNode(\"th\", null, \"Action\"), _createElementVNode(\"th\", null, \"Description\"), _createElementVNode(\"th\", null, \"Details\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredLogs, function (log) {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: log.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString($options.formatDate(log.created_at)), 1 /* TEXT */), _createElementVNode(\"td\", null, [log.user_name ? (_openBlock(), _createElementBlock(\"span\", _hoisted_15, [_createTextVNode(_toDisplayString(log.user_name), 1 /* TEXT */), _cache[16] || (_cache[16] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)), _createElementVNode(\"small\", _hoisted_16, _toDisplayString(log.user_email), 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_17, \"System\"))]), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n      \"class\": _normalizeClass([\"badge\", $options.getActionBadgeClass(log.action)])\n    }, _toDisplayString(log.action), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", null, _toDisplayString(log.description), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      \"class\": \"btn btn-sm btn-outline-info\",\n      onClick: function onClick($event) {\n        return $options.showLogDetail(log);\n      }\n    }, _toConsumableArray(_cache[17] || (_cache[17] = [_createElementVNode(\"i\", {\n      \"class\": \"bi bi-info-circle\"\n    }, null, -1 /* CACHED */)])), 8 /* PROPS */, _hoisted_18)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])), _createCommentVNode(\" Pagination \"), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", null, \" Showing \" + _toDisplayString($data.logs.length ? ($data.currentPage - 1) * $data.pageSize + 1 : 0) + \" to \" + _toDisplayString(Math.min($data.currentPage * $data.pageSize, $data.totalLogs)) + \" of \" + _toDisplayString($data.totalLogs) + \" logs \", 1 /* TEXT */), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    \"class\": \"btn btn-sm btn-outline-primary me-2\",\n    onClick: _cache[6] || (_cache[6] = function () {\n      return $options.prevPage && $options.prevPage.apply($options, arguments);\n    }),\n    disabled: $data.currentPage <= 1\n  }, _cache[19] || (_cache[19] = [_createElementVNode(\"i\", {\n    \"class\": \"bi bi-chevron-left\"\n  }, null, -1 /* CACHED */), _createTextVNode(\" Previous \")]), 8 /* PROPS */, _hoisted_20), _createElementVNode(\"span\", _hoisted_21, \" Page \" + _toDisplayString($data.currentPage) + \" of \" + _toDisplayString($options.totalPages), 1 /* TEXT */), _createElementVNode(\"button\", {\n    \"class\": \"btn btn-sm btn-outline-primary\",\n    onClick: _cache[7] || (_cache[7] = function () {\n      return $options.nextPage && $options.nextPage.apply($options, arguments);\n    }),\n    disabled: $data.currentPage >= $options.totalPages\n  }, _cache[20] || (_cache[20] = [_createTextVNode(\" Next \"), _createElementVNode(\"i\", {\n    \"class\": \"bi bi-chevron-right\"\n  }, null, -1 /* CACHED */)]), 8 /* PROPS */, _hoisted_22)])])])]), _createCommentVNode(\" Log Detail Modal \"), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"div\", _hoisted_25, [_cache[26] || (_cache[26] = _createElementVNode(\"div\", {\n    \"class\": \"modal-header\"\n  }, [_createElementVNode(\"h5\", {\n    \"class\": \"modal-title\"\n  }, \"Log Details\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    \"class\": \"btn-close\",\n    \"data-bs-dismiss\": \"modal\",\n    \"aria-label\": \"Close\"\n  })], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_26, [$data.selectedLog ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"p\", null, [_cache[21] || (_cache[21] = _createElementVNode(\"strong\", null, \"ID:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.selectedLog.id), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[22] || (_cache[22] = _createElementVNode(\"strong\", null, \"Time:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($options.formatDate($data.selectedLog.created_at, true)), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[23] || (_cache[23] = _createElementVNode(\"strong\", null, \"User:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.selectedLog.user_name || 'System'), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[24] || (_cache[24] = _createElementVNode(\"strong\", null, \"Action:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.selectedLog.action), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[25] || (_cache[25] = _createElementVNode(\"strong\", null, \"Description:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($data.selectedLog.description), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true)]), _cache[27] || (_cache[27] = _createElementVNode(\"div\", {\n    \"class\": \"modal-footer\"\n  }, [_createElementVNode(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-secondary\",\n    \"data-bs-dismiss\": \"modal\"\n  }, \"Close\")], -1 /* CACHED */))])])], 512 /* NEED_PATCH */)]);\n}","map":{"version":3,"names":["style","id","tabindex","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$options","refreshLogs","apply","arguments","exportLogsCSV","_hoisted_4","_hoisted_5","_createCommentVNode","_hoisted_6","_hoisted_7","type","$data","searchQuery","$event","placeholder","actionFilter","_hoisted_8","_hoisted_9","dateFrom","_hoisted_10","dateTo","loading","_hoisted_11","role","logs","length","_hoisted_12","_hoisted_13","_hoisted_14","_Fragment","_renderList","filteredLogs","log","key","_toDisplayString","formatDate","created_at","user_name","_hoisted_15","_hoisted_16","user_email","_hoisted_17","_normalizeClass","getActionBadgeClass","action","description","showLogDetail","_hoisted_19","currentPage","pageSize","Math","min","totalLogs","prevPage","disabled","_hoisted_21","totalPages","nextPage","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","selectedLog","_hoisted_27"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\course-mark-management\\frontend\\src\\views\\admin\\SystemLogs.vue"],"sourcesContent":["<template>\r\n  <div class=\"system-logs\">\r\n    <h1>System Logs</h1>\r\n    <div class=\"card mb-4\">\r\n      <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n        <h5 class=\"mb-0\">Activity Logs</h5>\r\n        <div>\r\n          <button class=\"btn btn-outline-secondary me-2\" @click=\"refreshLogs\">\r\n            <i class=\"bi bi-arrow-clockwise\"></i> Refresh\r\n          </button>\r\n          <button class=\"btn btn-success\" @click=\"exportLogsCSV\">\r\n            <i class=\"bi bi-download\"></i> Export CSV\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <div class=\"mb-3 d-flex flex-wrap justify-content-between align-items-center\">\r\n          <!-- Search and filter controls -->\r\n          <div class=\"d-flex mb-2 mb-md-0\">\r\n            <div class=\"input-group me-2\" style=\"max-width: 300px;\">\r\n              <span class=\"input-group-text\">\r\n                <i class=\"bi bi-search\"></i>\r\n              </span>\r\n              <input \r\n                type=\"text\" \r\n                class=\"form-control\" \r\n                v-model=\"searchQuery\" \r\n                placeholder=\"Search logs...\" \r\n              />\r\n            </div>\r\n            <select class=\"form-select me-2\" v-model=\"actionFilter\" style=\"max-width: 200px;\">\r\n              <option value=\"\">All Actions</option>\r\n              <option value=\"login\">Login</option>\r\n              <option value=\"logout\">Logout</option>\r\n              <option value=\"create\">Create</option>\r\n              <option value=\"update\">Update</option>\r\n              <option value=\"delete\">Delete</option>\r\n              <option value=\"import\">Import</option>\r\n              <option value=\"export\">Export</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div class=\"d-flex\">\r\n            <div class=\"input-group me-2\" style=\"max-width: 200px;\">\r\n              <span class=\"input-group-text\">From</span>\r\n              <input type=\"date\" class=\"form-control\" v-model=\"dateFrom\">\r\n            </div>\r\n            <div class=\"input-group\" style=\"max-width: 200px;\">\r\n              <span class=\"input-group-text\">To</span>\r\n              <input type=\"date\" class=\"form-control\" v-model=\"dateTo\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"loading\" class=\"d-flex justify-content-center my-5\">\r\n          <div class=\"spinner-border text-primary\" role=\"status\">\r\n            <span class=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-else-if=\"logs.length === 0\" class=\"alert alert-info\">\r\n          No logs found matching your criteria.\r\n        </div>\r\n\r\n        <div v-else class=\"table-responsive\">\r\n          <table class=\"table table-striped\">\r\n            <thead>\r\n              <tr>\r\n                <th>Time</th>\r\n                <th>User</th>\r\n                <th>Action</th>\r\n                <th>Description</th>\r\n                <th>Details</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"log in filteredLogs\" :key=\"log.id\">\r\n                <td>{{ formatDate(log.created_at) }}</td>\r\n                <td>\r\n                  <span v-if=\"log.user_name\">\r\n                    {{ log.user_name }}<br>\r\n                    <small class=\"text-muted\">{{ log.user_email }}</small>\r\n                  </span>\r\n                  <span v-else class=\"text-muted\">System</span>\r\n                </td>\r\n                <td>\r\n                  <span class=\"badge\" :class=\"getActionBadgeClass(log.action)\">\r\n                    {{ log.action }}\r\n                  </span>\r\n                </td>\r\n                <td>{{ log.description }}</td>\r\n                <td>\r\n                  <button \r\n                    class=\"btn btn-sm btn-outline-info\"\r\n                    @click=\"showLogDetail(log)\"\r\n                  >\r\n                    <i class=\"bi bi-info-circle\"></i>\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- Pagination -->\r\n        <div class=\"d-flex justify-content-between align-items-center mt-3\">\r\n          <div>\r\n            Showing {{ logs.length ? (currentPage - 1) * pageSize + 1 : 0 }} to \r\n            {{ Math.min(currentPage * pageSize, totalLogs) }} of {{ totalLogs }} logs\r\n          </div>\r\n          <div>\r\n            <button \r\n              class=\"btn btn-sm btn-outline-primary me-2\" \r\n              @click=\"prevPage\" \r\n              :disabled=\"currentPage <= 1\"\r\n            >\r\n              <i class=\"bi bi-chevron-left\"></i> Previous\r\n            </button>\r\n            <span class=\"mx-2\">\r\n              Page {{ currentPage }} of {{ totalPages }}\r\n            </span>\r\n            <button \r\n              class=\"btn btn-sm btn-outline-primary\" \r\n              @click=\"nextPage\" \r\n              :disabled=\"currentPage >= totalPages\"\r\n            >\r\n              Next <i class=\"bi bi-chevron-right\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Log Detail Modal -->\r\n    <div class=\"modal fade\" id=\"logDetailModal\" tabindex=\"-1\" ref=\"logDetailModal\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Log Details</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div v-if=\"selectedLog\">\r\n              <p><strong>ID:</strong> {{ selectedLog.id }}</p>\r\n              <p><strong>Time:</strong> {{ formatDate(selectedLog.created_at, true) }}</p>\r\n              <p><strong>User:</strong> {{ selectedLog.user_name || 'System' }}</p>\r\n              <p><strong>Action:</strong> {{ selectedLog.action }}</p>\r\n              <p><strong>Description:</strong> {{ selectedLog.description }}</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Modal } from 'bootstrap';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'SystemLogs',\r\n  data() {\r\n    return {\r\n      logs: [],\r\n      totalLogs: 0,\r\n      currentPage: 1,\r\n      pageSize: 15,\r\n      loading: true,\r\n      searchQuery: '',\r\n      actionFilter: '',\r\n      dateFrom: '',\r\n      dateTo: '',\r\n      selectedLog: null,\r\n      logDetailModal: null\r\n    };\r\n  },\r\n  computed: {\r\n    filteredLogs() {\r\n      let filtered = [...this.logs];\r\n      \r\n      // Apply search filter\r\n      if (this.searchQuery) {\r\n        const query = this.searchQuery.toLowerCase();\r\n        filtered = filtered.filter(log => \r\n          (log.description && log.description.toLowerCase().includes(query)) ||\r\n          (log.user_name && log.user_name.toLowerCase().includes(query)) ||\r\n          (log.user_email && log.user_email.toLowerCase().includes(query)) ||\r\n          (log.action && log.action.toLowerCase().includes(query))\r\n        );\r\n      }\r\n      \r\n      // Apply action filter\r\n      if (this.actionFilter) {\r\n        filtered = filtered.filter(log => \r\n          log.action && log.action.toLowerCase() === this.actionFilter.toLowerCase()\r\n        );\r\n      }\r\n      \r\n      // Apply date filters\r\n      if (this.dateFrom) {\r\n        const fromDate = new Date(this.dateFrom);\r\n        filtered = filtered.filter(log => {\r\n          const logDate = new Date(log.created_at);\r\n          return logDate >= fromDate;\r\n        });\r\n      }\r\n      \r\n      if (this.dateTo) {\r\n        const toDate = new Date(this.dateTo);\r\n        toDate.setHours(23, 59, 59, 999);  // End of the day\r\n        filtered = filtered.filter(log => {\r\n          const logDate = new Date(log.created_at);\r\n          return logDate <= toDate;\r\n        });\r\n      }\r\n      \r\n      return filtered;\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.totalLogs / this.pageSize);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchLogs();\r\n    this.$nextTick(() => {\r\n      this.logDetailModal = new Modal(this.$refs.logDetailModal);\r\n    });\r\n  },\r\n  methods: {\r\n    async fetchLogs() {\r\n      this.loading = true;\r\n      try {\r\n        const response = await axios.get(`${process.env.VUE_APP_API_URL}/api/admin/logs`, {\r\n          params: {\r\n            limit: this.pageSize,\r\n            offset: (this.currentPage - 1) * this.pageSize\r\n          },\r\n          headers: {\r\n            Authorization: `Bearer ${this.$store.getters['auth/token']}`\r\n          }\r\n        });\r\n        \r\n        this.logs = response.data.logs;\r\n        this.totalLogs = response.data.total;\r\n      } catch (error) {\r\n        console.error('Failed to fetch logs:', error);\r\n        this.$store.dispatch('notification/add', {\r\n          type: 'danger',\r\n          message: 'Failed to load system logs'\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    refreshLogs() {\r\n      this.fetchLogs();\r\n    },\r\n    getActionBadgeClass(action) {\r\n      if (!action) return 'bg-secondary';\r\n      \r\n      switch(action.toLowerCase()) {\r\n        case 'login':\r\n          return 'bg-success';\r\n        case 'logout':\r\n          return 'bg-info';\r\n        case 'create':\r\n          return 'bg-primary';\r\n        case 'update':\r\n          return 'bg-warning';\r\n        case 'delete':\r\n          return 'bg-danger';\r\n        case 'import':\r\n          return 'bg-dark';\r\n        case 'export':\r\n          return 'bg-secondary';\r\n        default:\r\n          return 'bg-secondary';\r\n      }\r\n    },\r\n    formatDate(dateString, includeTime = false) {\r\n      if (!dateString) return '';\r\n      \r\n      const date = new Date(dateString);\r\n      if (includeTime) {\r\n        return new Intl.DateTimeFormat('en-GB', {\r\n          year: 'numeric',\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          second: '2-digit'\r\n        }).format(date);\r\n      }\r\n      \r\n      return new Intl.DateTimeFormat('en-GB', {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      }).format(date);\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) {\r\n        this.currentPage--;\r\n        this.fetchLogs();\r\n      }\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) {\r\n        this.currentPage++;\r\n        this.fetchLogs();\r\n      }\r\n    },\r\n    showLogDetail(log) {\r\n      this.selectedLog = log;\r\n      this.logDetailModal.show();\r\n    },\r\n    async exportLogsCSV() {\r\n      try {\r\n        // Set up the CSV header\r\n        const header = ['ID', 'Time', 'User', 'Email', 'Action', 'Description'];\r\n        const csvRows = [header];\r\n        \r\n        // Get all logs (this is a simplified approach; for large datasets you might want to use the API)\r\n        let allLogs = this.filteredLogs;\r\n        \r\n        // Add each log to the CSV data\r\n        allLogs.forEach(log => {\r\n          const row = [\r\n            log.id,\r\n            this.formatDate(log.created_at, true),\r\n            log.user_name || 'System',\r\n            log.user_email || 'N/A',\r\n            log.action,\r\n            log.description\r\n          ];\r\n          csvRows.push(row);\r\n        });\r\n        \r\n        // Convert to CSV string\r\n        const csvContent = csvRows.map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(',')).join('\\n');\r\n        \r\n        // Create and download the CSV file\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const url = URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', `system_logs_${new Date().toISOString().slice(0,10)}.csv`);\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        \r\n        this.$store.dispatch('notification/add', {\r\n          type: 'success',\r\n          message: 'Logs exported successfully'\r\n        });\r\n      } catch (error) {\r\n        console.error('Failed to export logs:', error);\r\n        this.$store.dispatch('notification/add', {\r\n          type: 'danger',\r\n          message: 'Failed to export logs'\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.system-logs {\r\n  padding: 20px;\r\n}\r\n\r\n.card {\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n}\r\n\r\n.card-header {\r\n  background-color: #f8f9fa;\r\n  border-bottom: 1px solid rgba(0, 0, 0, 0.125);\r\n}\r\n\r\n.badge {\r\n  font-size: 0.8rem;\r\n  padding: 0.35em 0.65em;\r\n}\r\n\r\ntable {\r\n  font-size: 0.9rem;\r\n}\r\n\r\ntable th {\r\n  font-weight: 600;\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.table-responsive {\r\n  max-height: 600px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-body p {\r\n  margin-bottom: 0.5rem;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}