{"ast":null,"code":"import _regenerator from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/ansmu/Desktop/Web/course-mark-management/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url.to-json.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { mapGetters } from 'vuex';\nimport * as bootstrap from 'bootstrap';\nexport default {\n  name: 'AdminEnrollmentManagement',\n  data: function data() {\n    return {\n      selectedCourseId: '',\n      searchQuery: '',\n      currentCourseEnrollments: [],\n      allStudents: [],\n      bulkEnrollForm: {\n        studentIds: [],\n        academicYear: '2025-2026',\n        semester: 'Fall'\n      },\n      enrollmentToRemove: null\n    };\n  },\n  computed: _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, mapGetters('auth', ['getUser'])), mapGetters('courses', ['getCourses'])), mapGetters('enrollments', ['getAvailableStudents', 'isLoading'])), mapGetters('users', ['getUsers'])), {}, {\n    userInfo: function userInfo() {\n      return this.getUser || {\n        name: 'Admin'\n      };\n    },\n    courses: function courses() {\n      return this.getCourses || [];\n    },\n    availableStudents: function availableStudents() {\n      return this.getAvailableStudents || [];\n    },\n    selectedCourse: function selectedCourse() {\n      var _this$courses,\n        _this = this;\n      return ((_this$courses = this.courses) === null || _this$courses === void 0 ? void 0 : _this$courses.find(function (c) {\n        return c.id == _this.selectedCourseId;\n      })) || null;\n    },\n    filteredCourseEnrollments: function filteredCourseEnrollments() {\n      console.log('filteredCourseEnrollments called, currentCourseEnrollments:', this.currentCourseEnrollments);\n      console.log('searchQuery:', this.searchQuery);\n      if (!this.searchQuery) return this.currentCourseEnrollments || [];\n      var query = this.searchQuery.toLowerCase();\n      return (this.currentCourseEnrollments || []).filter(function (enrollment) {\n        return enrollment.student_name.toLowerCase().includes(query) || enrollment.student_email.toLowerCase().includes(query) || enrollment.matric_number && enrollment.matric_number.toLowerCase().includes(query);\n      });\n    },\n    totalStudents: function totalStudents() {\n      var _this$allStudents;\n      return ((_this$allStudents = this.allStudents) === null || _this$allStudents === void 0 ? void 0 : _this$allStudents.length) || 0;\n    },\n    totalCourses: function totalCourses() {\n      var _this$courses2;\n      return ((_this$courses2 = this.courses) === null || _this$courses2 === void 0 ? void 0 : _this$courses2.length) || 0;\n    },\n    totalEnrollments: function totalEnrollments() {\n      var _this$allStudents2;\n      return ((_this$allStudents2 = this.allStudents) === null || _this$allStudents2 === void 0 ? void 0 : _this$allStudents2.reduce(function (total, student) {\n        return total + (student.enrollment_count || 0);\n      }, 0)) || 0;\n    }\n  }),\n  created: function created() {\n    var _this2 = this;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return _this2.loadTemporaryData();\n          case 1:\n            return _context.a(2);\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    loadTemporaryData: function loadTemporaryData() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              try {\n                // Load temporary courses\n                _this3.$store.commit('courses/SET_COURSES', [{\n                  id: 1,\n                  code: 'CS101',\n                  name: 'Introduction to Programming',\n                  academic_year: '2025-2026',\n                  semester: 'Fall',\n                  lecturer_id: 2,\n                  lecturer_name: 'Lecturer One'\n                }, {\n                  id: 2,\n                  code: 'CS201',\n                  name: 'Data Structures',\n                  academic_year: '2025-2026',\n                  semester: 'Fall',\n                  lecturer_id: 2,\n                  lecturer_name: 'Lecturer One'\n                }]);\n\n                // Load temporary students\n                _this3.allStudents = [{\n                  id: 4,\n                  name: 'Student One',\n                  email: 'student1@example.com',\n                  role: 'student',\n                  matric_number: 'S123456',\n                  enrollment_count: 2\n                }, {\n                  id: 5,\n                  name: 'Student Two',\n                  email: 'student2@example.com',\n                  role: 'student',\n                  matric_number: 'S123457',\n                  enrollment_count: 1\n                }, {\n                  id: 6,\n                  name: 'Student Three',\n                  email: 'student3@example.com',\n                  role: 'student',\n                  matric_number: 'S123458',\n                  enrollment_count: 0\n                }];\n\n                // Load temporary users (including lecturers) into the store\n                _this3.$store.commit('users/SET_USERS', [{\n                  id: 1,\n                  name: 'Admin User',\n                  email: 'admin@example.com',\n                  role: 'admin'\n                }, {\n                  id: 2,\n                  name: 'Lecturer One',\n                  email: 'lecturer1@example.com',\n                  role: 'lecturer'\n                }, {\n                  id: 3,\n                  name: 'Advisor One',\n                  email: 'advisor1@example.com',\n                  role: 'advisor'\n                }, {\n                  id: 4,\n                  name: 'Student One',\n                  email: 'student1@example.com',\n                  role: 'student',\n                  matric_number: 'S123456'\n                }, {\n                  id: 5,\n                  name: 'Student Two',\n                  email: 'student2@example.com',\n                  role: 'student',\n                  matric_number: 'S123457'\n                }, {\n                  id: 6,\n                  name: 'Student Three',\n                  email: 'student3@example.com',\n                  role: 'student',\n                  matric_number: 'S123458'\n                }]);\n                console.log('Temporary admin enrollment data loaded');\n              } catch (error) {\n                console.error('Error loading temporary data:', error);\n              }\n            case 1:\n              return _context2.a(2);\n          }\n        }, _callee2);\n      }))();\n    },\n    loadInitialData: function loadInitialData() {\n      var _this4 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var _t;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.p = 0;\n              _context3.n = 1;\n              return Promise.all([_this4.$store.dispatch('courses/fetchCourses'), _this4.loadAllStudents()]);\n            case 1:\n              _context3.n = 3;\n              break;\n            case 2:\n              _context3.p = 2;\n              _t = _context3.v;\n              console.error('Error loading initial data:', _t);\n              _this4.$store.dispatch('showToast', {\n                message: 'Error loading data',\n                type: 'error'\n              });\n            case 3:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[0, 2]]);\n      }))();\n    },\n    loadAllStudents: function loadAllStudents() {\n      var _this5 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4() {\n        var response, _t2;\n        return _regenerator().w(function (_context4) {\n          while (1) switch (_context4.n) {\n            case 0:\n              _context4.p = 0;\n              _context4.n = 1;\n              return _this5.$store.dispatch('users/fetchUsers');\n            case 1:\n              response = _context4.v;\n              _this5.allStudents = response.filter(function (user) {\n                return user.role === 'student';\n              });\n              _context4.n = 3;\n              break;\n            case 2:\n              _context4.p = 2;\n              _t2 = _context4.v;\n              console.error('Error loading students:', _t2);\n            case 3:\n              return _context4.a(2);\n          }\n        }, _callee4, null, [[0, 2]]);\n      }))();\n    },\n    loadCourseEnrollments: function loadCourseEnrollments() {\n      var _this6 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.n) {\n            case 0:\n              if (_this6.selectedCourseId) {\n                _context5.n = 1;\n                break;\n              }\n              _this6.currentCourseEnrollments = [];\n              return _context5.a(2);\n            case 1:\n              try {\n                console.log('Loading enrollments for course:', _this6.selectedCourseId);\n\n                // Load temporary course enrollments based on selected course\n                if (_this6.selectedCourseId == 1) {\n                  _this6.currentCourseEnrollments = [{\n                    enrollment_id: 1,\n                    student_id: 4,\n                    student_name: 'Student One',\n                    student_email: 'student1@example.com',\n                    matric_number: 'S123456',\n                    academic_year: '2025-2026',\n                    semester: 'Fall',\n                    enrolled_at: '2025-01-15'\n                  }, {\n                    enrollment_id: 2,\n                    student_id: 5,\n                    student_name: 'Student Two',\n                    student_email: 'student2@example.com',\n                    matric_number: 'S123457',\n                    academic_year: '2025-2026',\n                    semester: 'Fall',\n                    enrolled_at: '2025-01-16'\n                  }];\n                  console.log('Set enrollments for CS101:', _this6.currentCourseEnrollments);\n\n                  // Set available students for this course\n                  _this6.$store.commit('enrollments/SET_AVAILABLE_STUDENTS', [{\n                    id: 6,\n                    name: 'Student Three',\n                    email: 'student3@example.com',\n                    matric_number: 'S123458',\n                    enrollment_count: 0\n                  }]);\n                } else if (_this6.selectedCourseId == 2) {\n                  _this6.currentCourseEnrollments = [{\n                    enrollment_id: 3,\n                    student_id: 5,\n                    student_name: 'Student Two',\n                    student_email: 'student2@example.com',\n                    matric_number: 'S123457',\n                    academic_year: '2025-2026',\n                    semester: 'Fall',\n                    enrolled_at: '2025-01-17'\n                  }];\n                  console.log('Set enrollments for CS201:', _this6.currentCourseEnrollments);\n\n                  // Set available students for this course\n                  _this6.$store.commit('enrollments/SET_AVAILABLE_STUDENTS', [{\n                    id: 4,\n                    name: 'Student One',\n                    email: 'student1@example.com',\n                    matric_number: 'S123456',\n                    enrollment_count: 1\n                  }, {\n                    id: 6,\n                    name: 'Student Three',\n                    email: 'student3@example.com',\n                    matric_number: 'S123458',\n                    enrollment_count: 0\n                  }]);\n                } else {\n                  _this6.currentCourseEnrollments = [];\n                  console.log('No enrollments for course:', _this6.selectedCourseId);\n                }\n                console.log('Course enrollments loaded for course:', _this6.selectedCourseId);\n              } catch (error) {\n                console.error('Error loading course enrollments:', error);\n                _this6.$store.dispatch('showToast', {\n                  message: 'Error loading course enrollments',\n                  type: 'error'\n                });\n              }\n            case 2:\n              return _context5.a(2);\n          }\n        }, _callee5);\n      }))();\n    },\n    loadCourseEnrollmentsOriginal: function loadCourseEnrollmentsOriginal() {\n      var _this7 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6() {\n        var _t3;\n        return _regenerator().w(function (_context6) {\n          while (1) switch (_context6.n) {\n            case 0:\n              if (_this7.selectedCourseId) {\n                _context6.n = 1;\n                break;\n              }\n              _this7.currentCourseEnrollments = [];\n              return _context6.a(2);\n            case 1:\n              _context6.p = 1;\n              _context6.n = 2;\n              return Promise.all([_this7.$store.dispatch('enrollments/fetchCourseEnrollments', _this7.selectedCourseId), _this7.$store.dispatch('enrollments/fetchAvailableStudents', _this7.selectedCourseId)]);\n            case 2:\n              _this7.currentCourseEnrollments = _this7.$store.getters['enrollments/getEnrollments'];\n              _context6.n = 4;\n              break;\n            case 3:\n              _context6.p = 3;\n              _t3 = _context6.v;\n              console.error('Error loading course enrollments:', _t3);\n              _this7.$store.dispatch('showToast', {\n                message: 'Error loading course enrollments',\n                type: 'error'\n              });\n            case 4:\n              return _context6.a(2);\n          }\n        }, _callee6, null, [[1, 3]]);\n      }))();\n    },\n    getLecturerName: function getLecturerName(lecturerId) {\n      if (!this.getUsers || !Array.isArray(this.getUsers)) {\n        return 'Unknown Lecturer';\n      }\n      var lecturer = this.getUsers.find(function (u) {\n        return u.id === lecturerId && u.role === 'lecturer';\n      });\n      return lecturer ? lecturer.name : 'Unknown Lecturer';\n    },\n    getStudentInitials: function getStudentInitials(name) {\n      return name.split(' ').map(function (n) {\n        return n[0];\n      }).join('').toUpperCase();\n    },\n    formatDate: function formatDate(dateString) {\n      if (!dateString) return 'N/A';\n      return new Date(dateString).toLocaleDateString('en-GB', {\n        day: 'numeric',\n        month: 'short',\n        year: 'numeric'\n      });\n    },\n    openBulkEnrollModal: function openBulkEnrollModal() {\n      var _this$selectedCourse;\n      this.bulkEnrollForm = {\n        studentIds: [],\n        academicYear: ((_this$selectedCourse = this.selectedCourse) === null || _this$selectedCourse === void 0 ? void 0 : _this$selectedCourse.academic_year) || '2025-2026',\n        semester: 'Fall'\n      };\n      var modal = new bootstrap.Modal(document.getElementById('bulkEnrollModal'));\n      modal.show();\n    },\n    toggleSelectAllStudents: function toggleSelectAllStudents(event) {\n      if (event.target.checked) {\n        this.bulkEnrollForm.studentIds = this.availableStudents.map(function (s) {\n          return s.id;\n        });\n      } else {\n        this.bulkEnrollForm.studentIds = [];\n      }\n    },\n    bulkEnrollStudents: function bulkEnrollStudents() {\n      var _this8 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7() {\n        var result, modalElement, modal, _t4;\n        return _regenerator().w(function (_context7) {\n          while (1) switch (_context7.n) {\n            case 0:\n              _context7.p = 0;\n              _context7.n = 1;\n              return _this8.$store.dispatch('enrollments/bulkEnrollStudents', {\n                courseId: _this8.selectedCourseId,\n                studentIds: _this8.bulkEnrollForm.studentIds,\n                academicYear: _this8.bulkEnrollForm.academicYear,\n                semester: _this8.bulkEnrollForm.semester\n              });\n            case 1:\n              result = _context7.v;\n              // Close modal\n              modalElement = document.getElementById('bulkEnrollModal');\n              modal = bootstrap.Modal.getInstance(modalElement);\n              modal.hide();\n\n              // Refresh enrollments\n              _context7.n = 2;\n              return _this8.loadCourseEnrollments();\n            case 2:\n              _this8.$store.dispatch('showToast', {\n                message: result.message,\n                type: 'success'\n              });\n              _context7.n = 4;\n              break;\n            case 3:\n              _context7.p = 3;\n              _t4 = _context7.v;\n              console.error('Error bulk enrolling students:', _t4);\n              _this8.$store.dispatch('showToast', {\n                message: _t4.message || 'Error enrolling students',\n                type: 'error'\n              });\n            case 4:\n              return _context7.a(2);\n          }\n        }, _callee7, null, [[0, 3]]);\n      }))();\n    },\n    confirmRemoveEnrollment: function confirmRemoveEnrollment(enrollment) {\n      this.enrollmentToRemove = enrollment;\n      var modal = new bootstrap.Modal(document.getElementById('removeEnrollmentModal'));\n      modal.show();\n    },\n    removeEnrollment: function removeEnrollment() {\n      var _this9 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8() {\n        var modalElement, modal, _t5;\n        return _regenerator().w(function (_context8) {\n          while (1) switch (_context8.n) {\n            case 0:\n              _context8.p = 0;\n              _context8.n = 1;\n              return _this9.$store.dispatch('enrollments/removeEnrollment', {\n                enrollmentId: _this9.enrollmentToRemove.enrollment_id,\n                courseId: _this9.selectedCourseId\n              });\n            case 1:\n              // Close modal\n              modalElement = document.getElementById('removeEnrollmentModal');\n              modal = bootstrap.Modal.getInstance(modalElement);\n              modal.hide();\n\n              // Refresh enrollments\n              _context8.n = 2;\n              return _this9.loadCourseEnrollments();\n            case 2:\n              _this9.$store.dispatch('showToast', {\n                message: 'Student removed from course successfully!',\n                type: 'success'\n              });\n              _this9.enrollmentToRemove = null;\n              _context8.n = 4;\n              break;\n            case 3:\n              _context8.p = 3;\n              _t5 = _context8.v;\n              console.error('Error removing enrollment:', _t5);\n              _this9.$store.dispatch('showToast', {\n                message: _t5.message || 'Error removing student',\n                type: 'error'\n              });\n            case 4:\n              return _context8.a(2);\n          }\n        }, _callee8, null, [[0, 3]]);\n      }))();\n    },\n    viewStudentDetails: function viewStudentDetails(studentId) {\n      // Navigate to student details page\n      this.$router.push(\"/admin/student/\".concat(studentId));\n    },\n    openStudentEnrollmentHistoryModal: function openStudentEnrollmentHistoryModal() {\n      // This could open a modal to search and view student enrollment history\n      this.$store.dispatch('showToast', {\n        message: 'Student enrollment history feature coming soon',\n        type: 'info'\n      });\n    },\n    openTransferStudentModal: function openTransferStudentModal() {\n      // This could open a modal to transfer students between courses\n      this.$store.dispatch('showToast', {\n        message: 'Student transfer feature coming soon',\n        type: 'info'\n      });\n    },\n    exportAllEnrollments: function exportAllEnrollments() {\n      var _this0 = this,\n        _this$selectedCourse2;\n      if (!this.currentCourseEnrollments.length) {\n        this.$store.dispatch('showToast', {\n          message: 'No enrollments to export',\n          type: 'warning'\n        });\n        return;\n      }\n\n      // Create CSV content\n      var headers = ['Course Code', 'Course Name', 'Student Name', 'Matric Number', 'Email', 'Academic Year', 'Semester', 'Enrolled Date'];\n      var csvContent = headers.join(',') + '\\n';\n      this.currentCourseEnrollments.forEach(function (enrollment) {\n        var _this0$selectedCourse, _this0$selectedCourse2;\n        var row = [((_this0$selectedCourse = _this0.selectedCourse) === null || _this0$selectedCourse === void 0 ? void 0 : _this0$selectedCourse.code) || 'N/A', \"\\\"\".concat(((_this0$selectedCourse2 = _this0.selectedCourse) === null || _this0$selectedCourse2 === void 0 ? void 0 : _this0$selectedCourse2.name) || 'N/A', \"\\\"\"), \"\\\"\".concat(enrollment.student_name, \"\\\"\"), enrollment.matric_number || 'N/A', enrollment.student_email, enrollment.academic_year, enrollment.semester, _this0.formatDate(enrollment.enrolled_at)];\n        csvContent += row.join(',') + '\\n';\n      });\n\n      // Download CSV\n      var blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      var url = URL.createObjectURL(blob);\n      var link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', \"\".concat(((_this$selectedCourse2 = this.selectedCourse) === null || _this$selectedCourse2 === void 0 ? void 0 : _this$selectedCourse2.code) || 'course', \"_enrollments.csv\"));\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n    logout: function logout() {\n      var _this1 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee9() {\n        return _regenerator().w(function (_context9) {\n          while (1) switch (_context9.n) {\n            case 0:\n              if (!confirm('Are you sure you want to logout?')) {\n                _context9.n = 2;\n                break;\n              }\n              _context9.n = 1;\n              return _this1.$store.dispatch('auth/logout');\n            case 1:\n              _this1.$router.push('/login');\n            case 2:\n              return _context9.a(2);\n          }\n        }, _callee9);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","bootstrap","name","data","selectedCourseId","searchQuery","currentCourseEnrollments","allStudents","bulkEnrollForm","studentIds","academicYear","semester","enrollmentToRemove","computed","_objectSpread","userInfo","getUser","courses","getCourses","availableStudents","getAvailableStudents","selectedCourse","_this$courses","_this","find","c","id","filteredCourseEnrollments","console","log","query","toLowerCase","filter","enrollment","student_name","includes","student_email","matric_number","totalStudents","_this$allStudents","length","totalCourses","_this$courses2","totalEnrollments","_this$allStudents2","reduce","total","student","enrollment_count","created","_this2","_asyncToGenerator","_regenerator","m","_callee","w","_context","n","loadTemporaryData","a","methods","_this3","_callee2","_context2","$store","commit","code","academic_year","lecturer_id","lecturer_name","email","role","error","loadInitialData","_this4","_callee3","_t","_context3","p","Promise","all","dispatch","loadAllStudents","v","message","type","_this5","_callee4","response","_t2","_context4","user","loadCourseEnrollments","_this6","_callee5","_context5","enrollment_id","student_id","enrolled_at","loadCourseEnrollmentsOriginal","_this7","_callee6","_t3","_context6","getters","getLecturerName","lecturerId","getUsers","Array","isArray","lecturer","u","getStudentInitials","split","map","join","toUpperCase","formatDate","dateString","Date","toLocaleDateString","day","month","year","openBulkEnrollModal","_this$selectedCourse","modal","Modal","document","getElementById","show","toggleSelectAllStudents","event","target","checked","s","bulkEnrollStudents","_this8","_callee7","result","modalElement","_t4","_context7","courseId","getInstance","hide","confirmRemoveEnrollment","removeEnrollment","_this9","_callee8","_t5","_context8","enrollmentId","viewStudentDetails","studentId","$router","push","concat","openStudentEnrollmentHistoryModal","openTransferStudentModal","exportAllEnrollments","_this0","_this$selectedCourse2","headers","csvContent","forEach","_this0$selectedCourse","_this0$selectedCourse2","row","blob","Blob","url","URL","createObjectURL","link","createElement","href","setAttribute","body","appendChild","click","removeChild","logout","_this1","_callee9","_context9","confirm"],"sources":["C:\\Users\\ansmu\\Desktop\\Web\\course-mark-management\\frontend\\src\\views\\admin\\EnrollmentManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-enrollment-management\">\r\n    <!-- Dashboard Header -->\r\n    <div class=\"dashboard-header d-flex justify-content-between align-items-center mb-4\">\r\n      <h1 class=\"mb-0\">Student Enrollment Management</h1>\r\n      <div class=\"user-info d-flex align-items-center\">\r\n        <span class=\"me-3\">Welcome, {{ userInfo.name }}</span>\r\n        <button class=\"btn btn-outline-danger btn-sm\" @click=\"logout\">\r\n          <i class=\"fas fa-sign-out-alt me-1\"></i>\r\n          Logout\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Stats Overview -->\r\n    <div class=\"row mb-4\">\r\n      <div class=\"col-md-3\">\r\n        <div class=\"card bg-primary text-white\">\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex justify-content-between\">\r\n              <div>\r\n                <h5 class=\"card-title\">Total Students</h5>\r\n                <h2 class=\"mb-0\">{{ totalStudents }}</h2>\r\n              </div>\r\n              <div class=\"align-self-center\">\r\n                <i class=\"fas fa-user-graduate fa-2x\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-3\">\r\n        <div class=\"card bg-success text-white\">\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex justify-content-between\">\r\n              <div>\r\n                <h5 class=\"card-title\">Total Courses</h5>\r\n                <h2 class=\"mb-0\">{{ totalCourses }}</h2>\r\n              </div>\r\n              <div class=\"align-self-center\">\r\n                <i class=\"fas fa-book fa-2x\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-3\">\r\n        <div class=\"card bg-info text-white\">\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex justify-content-between\">\r\n              <div>\r\n                <h5 class=\"card-title\">Total Enrollments</h5>\r\n                <h2 class=\"mb-0\">{{ totalEnrollments }}</h2>\r\n              </div>\r\n              <div class=\"align-self-center\">\r\n                <i class=\"fas fa-users fa-2x\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-3\">\r\n        <div class=\"card bg-warning text-white\">\r\n          <div class=\"card-body\">\r\n            <div class=\"d-flex justify-content-between\">\r\n              <div>\r\n                <h5 class=\"card-title\">Current Semester</h5>\r\n                <h2 class=\"mb-0\">Fall 2025</h2>\r\n              </div>\r\n              <div class=\"align-self-center\">\r\n                <i class=\"fas fa-calendar fa-2x\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Course Selection and Management -->\r\n    <div class=\"row\">\r\n      <div class=\"col-md-8\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <div class=\"d-flex justify-content-between align-items-center\">\r\n              <h5 class=\"mb-0\">Course Enrollments</h5>\r\n              <div class=\"d-flex gap-2\">\r\n                <select class=\"form-select form-select-sm\" v-model=\"selectedCourseId\" @change=\"loadCourseEnrollments\" style=\"width: 250px;\">\r\n                  <option value=\"\">Select a course...</option>\r\n                  <option v-for=\"course in courses\" :key=\"course.id\" :value=\"course.id\">\r\n                    {{ course.code }} - {{ course.name }}\r\n                  </option>\r\n                </select>\r\n                <button class=\"btn btn-success btn-sm\" @click=\"openBulkEnrollModal\" :disabled=\"!selectedCourseId\">\r\n                  <i class=\"fas fa-users me-1\"></i>Bulk Enroll\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"!selectedCourseId\" class=\"text-center py-4\">\r\n              <i class=\"fas fa-book-open fa-3x text-muted mb-3\"></i>\r\n              <h6 class=\"text-muted\">Select a course to manage enrollments</h6>\r\n              <p class=\"text-muted\">Choose a course from the dropdown above to view and manage student enrollments.</p>\r\n            </div>\r\n\r\n            <div v-else-if=\"isLoading\" class=\"text-center py-4\">\r\n              <div class=\"spinner-border text-primary\" role=\"status\">\r\n                <span class=\"visually-hidden\">Loading...</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div v-else-if=\"currentCourseEnrollments.length === 0\" class=\"text-center py-4\">\r\n              <i class=\"fas fa-users fa-3x text-muted mb-3\"></i>\r\n              <h6 class=\"text-muted\">No students enrolled</h6>\r\n              <p class=\"text-muted\">This course has no enrolled students yet.</p>\r\n              <button class=\"btn btn-primary\" @click=\"openBulkEnrollModal\">\r\n                <i class=\"fas fa-user-plus me-2\"></i>Enroll Students\r\n              </button>\r\n            </div>\r\n\r\n            <div v-else>\r\n              <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <div>\r\n                  <span class=\"badge bg-primary me-2\">{{ currentCourseEnrollments.length }} enrolled</span>\r\n                  <span class=\"text-muted\">{{ selectedCourse?.code }} - {{ selectedCourse?.name }}</span>\r\n                </div>\r\n                <input \r\n                  type=\"text\" \r\n                  class=\"form-control form-control-sm\" \r\n                  placeholder=\"Search students...\"\r\n                  v-model=\"searchQuery\"\r\n                  style=\"width: 200px;\"\r\n                >\r\n              </div>\r\n\r\n              <div class=\"table-responsive\">\r\n                <table class=\"table table-hover align-middle\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Student</th>\r\n                      <th>Matric Number</th>\r\n                      <th>Email</th>\r\n                      <th>Academic Year</th>\r\n                      <th>Semester</th>\r\n                      <th>Enrolled Date</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"enrollment in filteredCourseEnrollments\" :key=\"enrollment.enrollment_id\">\r\n                      <td>\r\n                        <div class=\"d-flex align-items-center\">\r\n                          <div class=\"avatar avatar-sm me-3\">\r\n                            {{ getStudentInitials(enrollment.student_name) }}\r\n                          </div>\r\n                          <strong>{{ enrollment.student_name }}</strong>\r\n                        </div>\r\n                      </td>\r\n                      <td>{{ enrollment.matric_number || 'N/A' }}</td>\r\n                      <td>{{ enrollment.student_email }}</td>\r\n                      <td>{{ enrollment.academic_year }}</td>\r\n                      <td>{{ enrollment.semester }}</td>\r\n                      <td>{{ formatDate(enrollment.enrolled_at) }}</td>\r\n                      <td>\r\n                        <div class=\"btn-group btn-group-sm\">\r\n                          <button \r\n                            class=\"btn btn-outline-info\"\r\n                            @click=\"viewStudentDetails(enrollment.student_id)\"\r\n                            title=\"View Student Details\"\r\n                          >\r\n                            <i class=\"fas fa-eye\"></i>\r\n                          </button>\r\n                          <button \r\n                            class=\"btn btn-outline-danger\" \r\n                            @click=\"confirmRemoveEnrollment(enrollment)\"\r\n                            title=\"Remove from Course\"\r\n                          >\r\n                            <i class=\"fas fa-user-minus\"></i>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-4\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h5 class=\"mb-0\">Quick Actions</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"d-grid gap-2\">\r\n              <button class=\"btn btn-primary\" @click=\"openStudentEnrollmentHistoryModal\">\r\n                <i class=\"fas fa-history me-2\"></i>View Student History\r\n              </button>\r\n              <button class=\"btn btn-info\" @click=\"exportAllEnrollments\">\r\n                <i class=\"fas fa-file-export me-2\"></i>Export All Enrollments\r\n              </button>\r\n              <button class=\"btn btn-warning\" @click=\"openTransferStudentModal\">\r\n                <i class=\"fas fa-exchange-alt me-2\"></i>Transfer Student\r\n              </button>\r\n              <router-link to=\"/admin/dashboard\" class=\"btn btn-outline-secondary\">\r\n                <i class=\"fas fa-arrow-left me-2\"></i>Back to Dashboard\r\n              </router-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"card mt-3\">\r\n          <div class=\"card-header\">\r\n            <h5 class=\"mb-0\">Course Statistics</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"selectedCourse\">\r\n              <div class=\"stat-item\">\r\n                <strong>Course Code:</strong> {{ selectedCourse.code }}\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <strong>Course Name:</strong> {{ selectedCourse.name }}\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <strong>Lecturer:</strong> {{ getLecturerName(selectedCourse.lecturer_id) }}\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <strong>Academic Year:</strong> {{ selectedCourse.academic_year || 'N/A' }}\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <strong>Semester:</strong> {{ selectedCourse.semester || 'N/A' }}\r\n              </div>\r\n              <div class=\"stat-item\">\r\n                <strong>Enrolled Students:</strong> {{ currentCourseEnrollments.length }}\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"text-muted text-center\">\r\n              Select a course to view statistics\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Bulk Enrollment Modal -->\r\n    <div class=\"modal fade\" id=\"bulkEnrollModal\" tabindex=\"-1\" aria-labelledby=\"bulkEnrollModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"bulkEnrollModalLabel\">Bulk Enroll Students</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div v-if=\"selectedCourse\" class=\"alert alert-info\">\r\n              <strong>Course:</strong> {{ selectedCourse.code }} - {{ selectedCourse.name }}\r\n            </div>\r\n            \r\n            <form @submit.prevent=\"bulkEnrollStudents\">\r\n              <div class=\"row mb-3\">\r\n                <div class=\"col-md-6\">\r\n                  <label for=\"bulkAcademicYear\" class=\"form-label\">Academic Year</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    class=\"form-control\" \r\n                    id=\"bulkAcademicYear\" \r\n                    v-model=\"bulkEnrollForm.academicYear\"\r\n                    placeholder=\"e.g., 2025-2026\"\r\n                    required\r\n                  >\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <label for=\"bulkSemester\" class=\"form-label\">Semester</label>\r\n                  <select class=\"form-select\" id=\"bulkSemester\" v-model=\"bulkEnrollForm.semester\" required>\r\n                    <option value=\"\">Select Semester</option>\r\n                    <option value=\"Fall\">Fall</option>\r\n                    <option value=\"Spring\">Spring</option>\r\n                    <option value=\"Summer\">Summer</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\">Select Students to Enroll</label>\r\n                <div class=\"d-flex justify-content-between align-items-center mb-2\">\r\n                  <div class=\"form-check\">\r\n                    <input \r\n                      class=\"form-check-input\" \r\n                      type=\"checkbox\" \r\n                      id=\"selectAllStudents\"\r\n                      @change=\"toggleSelectAllStudents\"\r\n                      :checked=\"bulkEnrollForm.studentIds.length === availableStudents.length && availableStudents.length > 0\"\r\n                    >\r\n                    <label class=\"form-check-label\" for=\"selectAllStudents\">\r\n                      Select All ({{ availableStudents.length }} available)\r\n                    </label>\r\n                  </div>\r\n                  <span class=\"badge bg-primary\">{{ bulkEnrollForm.studentIds.length }} selected</span>\r\n                </div>\r\n                \r\n                <div class=\"student-list\" style=\"max-height: 300px; overflow-y: auto;\">\r\n                  <div v-for=\"student in availableStudents\" :key=\"student.id\" class=\"form-check\">\r\n                    <input \r\n                      class=\"form-check-input\" \r\n                      type=\"checkbox\" \r\n                      :id=\"`bulk-student-${student.id}`\"\r\n                      :value=\"student.id\"\r\n                      v-model=\"bulkEnrollForm.studentIds\"\r\n                    >\r\n                    <label class=\"form-check-label\" :for=\"`bulk-student-${student.id}`\">\r\n                      <strong>{{ student.name }}</strong> - {{ student.email }}\r\n                      <small class=\"text-muted d-block\">{{ student.matric_number || 'No matric number' }}</small>\r\n                      <small class=\"text-muted\">{{ student.enrollment_count }} current enrollments</small>\r\n                    </label>\r\n                  </div>\r\n                  \r\n                  <div v-if=\"availableStudents.length === 0\" class=\"text-center py-3 text-muted\">\r\n                    <div v-if=\"isLoading\">Loading available students...</div>\r\n                    <div v-else>No students available for enrollment</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div class=\"d-flex justify-content-end gap-2\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                <button \r\n                  type=\"submit\" \r\n                  class=\"btn btn-primary\" \r\n                  :disabled=\"isLoading || bulkEnrollForm.studentIds.length === 0\"\r\n                >\r\n                  <span v-if=\"isLoading\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n                  Enroll {{ bulkEnrollForm.studentIds.length }} Students\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Remove Enrollment Confirmation Modal -->\r\n    <div class=\"modal fade\" id=\"removeEnrollmentModal\" tabindex=\"-1\" aria-labelledby=\"removeEnrollmentModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"removeEnrollmentModalLabel\">Remove Student Enrollment</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div v-if=\"enrollmentToRemove\">\r\n              <div class=\"alert alert-warning\">\r\n                <i class=\"fas fa-exclamation-triangle me-2\"></i>\r\n                <strong>Warning:</strong> This action will remove the student from the course and delete all their marks.\r\n              </div>\r\n              <p>Are you sure you want to remove <strong>{{ enrollmentToRemove.student_name }}</strong> from <strong>{{ selectedCourse?.code }}</strong>?</p>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n            <button \r\n              type=\"button\" \r\n              class=\"btn btn-danger\" \r\n              @click=\"removeEnrollment\"\r\n              :disabled=\"isLoading\"\r\n            >\r\n              <span v-if=\"isLoading\" class=\"spinner-border spinner-border-sm me-2\"></span>\r\n              Remove Student\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport * as bootstrap from 'bootstrap';\r\n\r\nexport default {\r\n  name: 'AdminEnrollmentManagement',\r\n  data() {\r\n    return {\r\n      selectedCourseId: '',\r\n      searchQuery: '',\r\n      currentCourseEnrollments: [],\r\n      allStudents: [],\r\n      bulkEnrollForm: {\r\n        studentIds: [],\r\n        academicYear: '2025-2026',\r\n        semester: 'Fall'\r\n      },\r\n      enrollmentToRemove: null\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters('auth', ['getUser']),\r\n    ...mapGetters('courses', ['getCourses']),\r\n    ...mapGetters('enrollments', ['getAvailableStudents', 'isLoading']),\r\n    ...mapGetters('users', ['getUsers']),\r\n    \r\n    userInfo() {\r\n      return this.getUser || { name: 'Admin' };\r\n    },\r\n    \r\n    courses() {\r\n      return this.getCourses || [];\r\n    },\r\n    \r\n    availableStudents() {\r\n      return this.getAvailableStudents || [];\r\n    },\r\n    \r\n    selectedCourse() {\r\n      return this.courses?.find(c => c.id == this.selectedCourseId) || null;\r\n    },\r\n    \r\n    filteredCourseEnrollments() {\r\n      console.log('filteredCourseEnrollments called, currentCourseEnrollments:', this.currentCourseEnrollments);\r\n      console.log('searchQuery:', this.searchQuery);\r\n      \r\n      if (!this.searchQuery) return this.currentCourseEnrollments || [];\r\n      \r\n      const query = this.searchQuery.toLowerCase();\r\n      return (this.currentCourseEnrollments || []).filter(enrollment => \r\n        enrollment.student_name.toLowerCase().includes(query) ||\r\n        enrollment.student_email.toLowerCase().includes(query) ||\r\n        (enrollment.matric_number && enrollment.matric_number.toLowerCase().includes(query))\r\n      );\r\n    },\r\n    \r\n    totalStudents() {\r\n      return this.allStudents?.length || 0;\r\n    },\r\n    \r\n    totalCourses() {\r\n      return this.courses?.length || 0;\r\n    },\r\n    \r\n    totalEnrollments() {\r\n      return this.allStudents?.reduce((total, student) => total + (student.enrollment_count || 0), 0) || 0;\r\n    }\r\n  },\r\n  async created() {\r\n    await this.loadTemporaryData();\r\n  },\r\n  methods: {\r\n    async loadTemporaryData() {\r\n      try {\r\n        // Load temporary courses\r\n        this.$store.commit('courses/SET_COURSES', [\r\n          {\r\n            id: 1,\r\n            code: 'CS101',\r\n            name: 'Introduction to Programming',\r\n            academic_year: '2025-2026',\r\n            semester: 'Fall',\r\n            lecturer_id: 2,\r\n            lecturer_name: 'Lecturer One'\r\n          },\r\n          {\r\n            id: 2,\r\n            code: 'CS201',\r\n            name: 'Data Structures',\r\n            academic_year: '2025-2026',\r\n            semester: 'Fall',\r\n            lecturer_id: 2,\r\n            lecturer_name: 'Lecturer One'\r\n          }\r\n        ]);\r\n        \r\n        // Load temporary students\r\n        this.allStudents = [\r\n          {\r\n            id: 4,\r\n            name: 'Student One',\r\n            email: 'student1@example.com',\r\n            role: 'student',\r\n            matric_number: 'S123456',\r\n            enrollment_count: 2\r\n          },\r\n          {\r\n            id: 5,\r\n            name: 'Student Two',\r\n            email: 'student2@example.com',\r\n            role: 'student',\r\n            matric_number: 'S123457',\r\n            enrollment_count: 1\r\n          },\r\n          {\r\n            id: 6,\r\n            name: 'Student Three',\r\n            email: 'student3@example.com',\r\n            role: 'student',\r\n            matric_number: 'S123458',\r\n            enrollment_count: 0\r\n          }\r\n        ];\r\n        \r\n        // Load temporary users (including lecturers) into the store\r\n        this.$store.commit('users/SET_USERS', [\r\n          {\r\n            id: 1,\r\n            name: 'Admin User',\r\n            email: 'admin@example.com',\r\n            role: 'admin'\r\n          },\r\n          {\r\n            id: 2,\r\n            name: 'Lecturer One',\r\n            email: 'lecturer1@example.com',\r\n            role: 'lecturer'\r\n          },\r\n          {\r\n            id: 3,\r\n            name: 'Advisor One',\r\n            email: 'advisor1@example.com',\r\n            role: 'advisor'\r\n          },\r\n          {\r\n            id: 4,\r\n            name: 'Student One',\r\n            email: 'student1@example.com',\r\n            role: 'student',\r\n            matric_number: 'S123456'\r\n          },\r\n          {\r\n            id: 5,\r\n            name: 'Student Two',\r\n            email: 'student2@example.com',\r\n            role: 'student',\r\n            matric_number: 'S123457'\r\n          },\r\n          {\r\n            id: 6,\r\n            name: 'Student Three',\r\n            email: 'student3@example.com',\r\n            role: 'student',\r\n            matric_number: 'S123458'\r\n          }\r\n        ]);\r\n        \r\n        console.log('Temporary admin enrollment data loaded');\r\n      } catch (error) {\r\n        console.error('Error loading temporary data:', error);\r\n      }\r\n    },\r\n\r\n    async loadInitialData() {\r\n      try {\r\n        // Load courses and all students\r\n        await Promise.all([\r\n          this.$store.dispatch('courses/fetchCourses'),\r\n          this.loadAllStudents()\r\n        ]);\r\n      } catch (error) {\r\n        console.error('Error loading initial data:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error loading data',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n    \r\n    async loadAllStudents() {\r\n      try {\r\n        const response = await this.$store.dispatch('users/fetchUsers');\r\n        this.allStudents = response.filter(user => user.role === 'student');\r\n      } catch (error) {\r\n        console.error('Error loading students:', error);\r\n      }\r\n    },\r\n    \r\n    async loadCourseEnrollments() {\r\n      if (!this.selectedCourseId) {\r\n        this.currentCourseEnrollments = [];\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        console.log('Loading enrollments for course:', this.selectedCourseId);\r\n        \r\n        // Load temporary course enrollments based on selected course\r\n        if (this.selectedCourseId == 1) {\r\n          this.currentCourseEnrollments = [\r\n            {\r\n              enrollment_id: 1,\r\n              student_id: 4,\r\n              student_name: 'Student One',\r\n              student_email: 'student1@example.com',\r\n              matric_number: 'S123456',\r\n              academic_year: '2025-2026',\r\n              semester: 'Fall',\r\n              enrolled_at: '2025-01-15'\r\n            },\r\n            {\r\n              enrollment_id: 2,\r\n              student_id: 5,\r\n              student_name: 'Student Two',\r\n              student_email: 'student2@example.com',\r\n              matric_number: 'S123457',\r\n              academic_year: '2025-2026',\r\n              semester: 'Fall',\r\n              enrolled_at: '2025-01-16'\r\n            }\r\n          ];\r\n          \r\n          console.log('Set enrollments for CS101:', this.currentCourseEnrollments);\r\n          \r\n          // Set available students for this course\r\n          this.$store.commit('enrollments/SET_AVAILABLE_STUDENTS', [\r\n            {\r\n              id: 6,\r\n              name: 'Student Three',\r\n              email: 'student3@example.com',\r\n              matric_number: 'S123458',\r\n              enrollment_count: 0\r\n            }\r\n          ]);\r\n        } else if (this.selectedCourseId == 2) {\r\n          this.currentCourseEnrollments = [\r\n            {\r\n              enrollment_id: 3,\r\n              student_id: 5,\r\n              student_name: 'Student Two',\r\n              student_email: 'student2@example.com',\r\n              matric_number: 'S123457',\r\n              academic_year: '2025-2026',\r\n              semester: 'Fall',\r\n              enrolled_at: '2025-01-17'\r\n            }\r\n          ];\r\n          \r\n          console.log('Set enrollments for CS201:', this.currentCourseEnrollments);\r\n          \r\n          // Set available students for this course\r\n          this.$store.commit('enrollments/SET_AVAILABLE_STUDENTS', [\r\n            {\r\n              id: 4,\r\n              name: 'Student One',\r\n              email: 'student1@example.com',\r\n              matric_number: 'S123456',\r\n              enrollment_count: 1\r\n            },\r\n            {\r\n              id: 6,\r\n              name: 'Student Three',\r\n              email: 'student3@example.com',\r\n              matric_number: 'S123458',\r\n              enrollment_count: 0\r\n            }\r\n          ]);\r\n        } else {\r\n          this.currentCourseEnrollments = [];\r\n          console.log('No enrollments for course:', this.selectedCourseId);\r\n        }\r\n        \r\n        console.log('Course enrollments loaded for course:', this.selectedCourseId);\r\n      } catch (error) {\r\n        console.error('Error loading course enrollments:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error loading course enrollments',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n\r\n    async loadCourseEnrollmentsOriginal() {\r\n      if (!this.selectedCourseId) {\r\n        this.currentCourseEnrollments = [];\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        await Promise.all([\r\n          this.$store.dispatch('enrollments/fetchCourseEnrollments', this.selectedCourseId),\r\n          this.$store.dispatch('enrollments/fetchAvailableStudents', this.selectedCourseId)\r\n        ]);\r\n        \r\n        this.currentCourseEnrollments = this.$store.getters['enrollments/getEnrollments'];\r\n      } catch (error) {\r\n        console.error('Error loading course enrollments:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: 'Error loading course enrollments',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n    \r\n    getLecturerName(lecturerId) {\r\n      if (!this.getUsers || !Array.isArray(this.getUsers)) {\r\n        return 'Unknown Lecturer';\r\n      }\r\n      const lecturer = this.getUsers.find(u => u.id === lecturerId && u.role === 'lecturer');\r\n      return lecturer ? lecturer.name : 'Unknown Lecturer';\r\n    },\r\n    \r\n    getStudentInitials(name) {\r\n      return name\r\n        .split(' ')\r\n        .map(n => n[0])\r\n        .join('')\r\n        .toUpperCase();\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'N/A';\r\n      return new Date(dateString).toLocaleDateString('en-GB', {\r\n        day: 'numeric',\r\n        month: 'short',\r\n        year: 'numeric'\r\n      });\r\n    },\r\n    \r\n    openBulkEnrollModal() {\r\n      this.bulkEnrollForm = {\r\n        studentIds: [],\r\n        academicYear: this.selectedCourse?.academic_year || '2025-2026',\r\n        semester: 'Fall'\r\n      };\r\n      \r\n      const modal = new bootstrap.Modal(document.getElementById('bulkEnrollModal'));\r\n      modal.show();\r\n    },\r\n    \r\n    toggleSelectAllStudents(event) {\r\n      if (event.target.checked) {\r\n        this.bulkEnrollForm.studentIds = this.availableStudents.map(s => s.id);\r\n      } else {\r\n        this.bulkEnrollForm.studentIds = [];\r\n      }\r\n    },\r\n    \r\n    async bulkEnrollStudents() {\r\n      try {\r\n        const result = await this.$store.dispatch('enrollments/bulkEnrollStudents', {\r\n          courseId: this.selectedCourseId,\r\n          studentIds: this.bulkEnrollForm.studentIds,\r\n          academicYear: this.bulkEnrollForm.academicYear,\r\n          semester: this.bulkEnrollForm.semester\r\n        });\r\n        \r\n        // Close modal\r\n        const modalElement = document.getElementById('bulkEnrollModal');\r\n        const modal = bootstrap.Modal.getInstance(modalElement);\r\n        modal.hide();\r\n        \r\n        // Refresh enrollments\r\n        await this.loadCourseEnrollments();\r\n        \r\n        this.$store.dispatch('showToast', {\r\n          message: result.message,\r\n          type: 'success'\r\n        });\r\n      } catch (error) {\r\n        console.error('Error bulk enrolling students:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: error.message || 'Error enrolling students',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n    \r\n    confirmRemoveEnrollment(enrollment) {\r\n      this.enrollmentToRemove = enrollment;\r\n      \r\n      const modal = new bootstrap.Modal(document.getElementById('removeEnrollmentModal'));\r\n      modal.show();\r\n    },\r\n    \r\n    async removeEnrollment() {\r\n      try {\r\n        await this.$store.dispatch('enrollments/removeEnrollment', {\r\n          enrollmentId: this.enrollmentToRemove.enrollment_id,\r\n          courseId: this.selectedCourseId\r\n        });\r\n        \r\n        // Close modal\r\n        const modalElement = document.getElementById('removeEnrollmentModal');\r\n        const modal = bootstrap.Modal.getInstance(modalElement);\r\n        modal.hide();\r\n        \r\n        // Refresh enrollments\r\n        await this.loadCourseEnrollments();\r\n        \r\n        this.$store.dispatch('showToast', {\r\n          message: 'Student removed from course successfully!',\r\n          type: 'success'\r\n        });\r\n        \r\n        this.enrollmentToRemove = null;\r\n      } catch (error) {\r\n        console.error('Error removing enrollment:', error);\r\n        this.$store.dispatch('showToast', {\r\n          message: error.message || 'Error removing student',\r\n          type: 'error'\r\n        });\r\n      }\r\n    },\r\n    \r\n    viewStudentDetails(studentId) {\r\n      // Navigate to student details page\r\n      this.$router.push(`/admin/student/${studentId}`);\r\n    },\r\n    \r\n    openStudentEnrollmentHistoryModal() {\r\n      // This could open a modal to search and view student enrollment history\r\n      this.$store.dispatch('showToast', {\r\n        message: 'Student enrollment history feature coming soon',\r\n        type: 'info'\r\n      });\r\n    },\r\n    \r\n    openTransferStudentModal() {\r\n      // This could open a modal to transfer students between courses\r\n      this.$store.dispatch('showToast', {\r\n        message: 'Student transfer feature coming soon',\r\n        type: 'info'\r\n      });\r\n    },\r\n    \r\n    exportAllEnrollments() {\r\n      if (!this.currentCourseEnrollments.length) {\r\n        this.$store.dispatch('showToast', {\r\n          message: 'No enrollments to export',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Create CSV content\r\n      const headers = ['Course Code', 'Course Name', 'Student Name', 'Matric Number', 'Email', 'Academic Year', 'Semester', 'Enrolled Date'];\r\n      let csvContent = headers.join(',') + '\\n';\r\n      \r\n      this.currentCourseEnrollments.forEach(enrollment => {\r\n        const row = [\r\n          this.selectedCourse?.code || 'N/A',\r\n          `\"${this.selectedCourse?.name || 'N/A'}\"`,\r\n          `\"${enrollment.student_name}\"`,\r\n          enrollment.matric_number || 'N/A',\r\n          enrollment.student_email,\r\n          enrollment.academic_year,\r\n          enrollment.semester,\r\n          this.formatDate(enrollment.enrolled_at)\r\n        ];\r\n        csvContent += row.join(',') + '\\n';\r\n      });\r\n      \r\n      // Download CSV\r\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `${this.selectedCourse?.code || 'course'}_enrollments.csv`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    },\r\n\r\n    async logout() {\r\n      if (confirm('Are you sure you want to logout?')) {\r\n        await this.$store.dispatch('auth/logout');\r\n        this.$router.push('/login');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-enrollment-management h1 {\r\n  color: #2c3e50;\r\n  font-weight: 700;\r\n}\r\n\r\n.card {\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  border: none;\r\n  border-radius: 10px;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: linear-gradient(45deg, #007bff, #0056b3);\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n}\r\n\r\n.avatar.avatar-sm {\r\n  width: 32px;\r\n  height: 32px;\r\n  font-size: 12px;\r\n}\r\n\r\n.student-list {\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 5px;\r\n  padding: 10px;\r\n}\r\n\r\n.form-check {\r\n  padding: 8px;\r\n  border-bottom: 1px solid #f8f9fa;\r\n}\r\n\r\n.form-check:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.form-check:hover {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.stat-item {\r\n  margin-bottom: 10px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #f8f9fa;\r\n}\r\n\r\n.stat-item:last-child {\r\n  border-bottom: none;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.table th {\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  border-top: none;\r\n}\r\n\r\n.btn-group .btn {\r\n  margin-right: 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}